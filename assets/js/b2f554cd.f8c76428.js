"use strict";(self.webpackChunkgugulh_blog=self.webpackChunkgugulh_blog||[]).push([[5894],{6042:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"vue\u8fdb\u9636","metadata":{"permalink":"/blog/vue\u8fdb\u9636","source":"@site/blog/2025-05-30-Vue\u8fdb\u9636.md","title":"Vue\u8fdb\u9636","description":"1. \u4f7f\u7528 v-html \u5728\u6a21\u677f\u4e2d\u8f93\u51fa\u5143\u7d20\u7684 html \u4ee3\u7801","date":"2025-05-30T00:00:00.000Z","formattedDate":"2025\u5e745\u670830\u65e5","tags":[{"label":"Vue","permalink":"/blog/tags/vue"}],"readingTime":7.45,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"vue\u8fdb\u9636","title":"Vue\u8fdb\u9636","authors":"gugulh","tags":["Vue"]},"nextItem":{"title":"Spring AI\u5feb\u901f\u5165\u95e8","permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8"}},"content":"## 1. \u4f7f\u7528 v-html \u5728\u6a21\u677f\u4e2d\u8f93\u51fa\u5143\u7d20\u7684 html \u4ee3\u7801\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      content: `<p>\u8fd9\u662f\u4e00\u6bb5<span style=\\"color: hsl(0, 80%, 70%);\\">HTML</span>\u4ee3\u7801</p>`,\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    \x3c!-- \u4f1a\u8fdb\u884c\u6e32\u67d3 --\x3e\\n    \x3c!-- <article v-html=\\"content\\" /> --\x3e\\n    \x3c!-- \u4f1a\u539f\u6837\u8f93\u51fahtml\u4ee3\u7801 --\x3e\\n    <article>{{ content }}</article>\\n  </div>\\n</div>\\n```\\n\\n## 2. v-once:\u53ea\u6e32\u67d3\u4e00\u6b21 html \u6a21\u677f\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      list: [1, 2, 3],\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <p v-once>list \u521d\u59cb\u957f\u5ea6\uff1a {{ list.length }}</p>\\n    <p>list \u65b0\u957f\u5ea6\uff1a {{ list.length }}</p>\\n    <button @click=\\"list.push(list.length + 1)\\">\u6dfb\u52a0\u5143\u7d20</button>\\n  </div>\\n</div>\\n```\\n\\n## 3. \u7ed9 v-bind \u548c v-on \u8bbe\u7f6e\u52a8\u6001\u53c2\u6570\\n\\n- \u4e5f\u53ef\u4ee5\u5199\u6210`<input type=\\"text\\" :[\'place\'+\'holer\']=\\"value\\" @[event]=\\"handleChange\\" />`,\u4f46\u6ce8\u610f\u4e0d\u8981\u6709+\u4e24\u8fb9\u4e0d\u8981\u6709\u7a7a\u683c\\n- \u5982\u679c`<input type=\\"text\\" :[null]=\\"value\\" @[event]=\\"handleChange\\" />`\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      attr: \\"placeholder\\",\\n      value: \\"\u8bf7\u8f93\u5165\u4e00\u4e9b\u5b57\u7b26\\",\\n      event: \\"change\\",\\n    };\\n  },\\n  methods: {\\n    handleChange() {\\n      console.log(\\"input \u53d8\u5316\\");\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <input type=\\"text\\" :[attr]=\\"value\\" @[event]=\\"handleChange\\" />\\n  </div>\\n</div>\\n```\\n\\n## 4. v-for \u8fdb\u9636\u7528\u6cd5\u793a\u4f8b\\n\\n```js\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      blogPost: {\\n        title: \\"GuguLH\'s Home\\",\\n        author: \\"gugulh\\",\\n        pubDate: \\"2022-02-22\\",\\n      },\\n      todos: [\\n        {\\n          id: 1,\\n          content: \\"\u5f85\u529e1\\",\\n        },\\n        {\\n          id: 2,\\n          content: \\"\u5f85\u529e2\\",\\n        },\\n        {\\n          id: 3,\\n          content: \\"\u5f85\u529e3\\",\\n        },\\n      ],\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <ul>\\n      \x3c!-- <li v-for=\\"value in blogPost\\">{{value}}</li> --\x3e\\n      <li v-for=\\"(value, name, index) in blogPost\\">\\n        {{index}}. {{name}} - {{value}}\\n      </li>\\n    </ul>\\n    <ul>\\n      <li v-for=\\"todo in todos\\" :key=\\"todo.id\\">{{ todo.content }}</li>\\n    </ul>\\n    <ul>\\n      <li v-for=\\"n in 5\\" :key=\\"n\\">{{ n }}</li>\\n    </ul>\\n  </div>\\n</div>\\n```\\n\\n## 5. `<template/>`\u6807\u7b7e\u7528\u6cd5\\n\\n- `<template/>`\u6e32\u67d3\u4e00\u7ec4\u6807\u7b7e\u4f46\u4e0d\u989d\u5916\u589e\u52a0\u591a\u4f59\u5d4c\u5957\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <template v-if=\\"show\\" class=\\"content\\">\\n      <h1>\u6807\u9898</h1>\\n      <p>\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\n    </template>\\n    <button @click=\\"show = !show\\">\u5207\u6362\u663e\u793a</button>\\n  </div>\\n</div>\\n```\\n\\n## 6. \u4e8b\u4ef6\u4f20\u53c2\u4e0e\u591a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\\n\\n- `@click=\\"handleClick(msg)\\"`\\n\\n- `@click=\\"handleClick(msg, $event)\\"`: `$event`\u53ef\u4ee5\u8bbf\u95ee\u5e76\u4f20\u9012\u539f\u751f\u7684 js dom \u4e8b\u4ef6\\n- `@click=\\"handleClick1(), handlerClick2()\\"`:\u53ef\u4ee5\u4f20\u9012\u591a\u4e2a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570, \u7528`,`\u9694\u5f00\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      todos: [\\n        {\\n          id: 1,\\n          content: \\"\u5f85\u529e1\\",\\n        },\\n        {\\n          id: 2,\\n          content: \\"\u5f85\u529e2\\",\\n        },\\n        {\\n          id: 3,\\n          content: \\"\u5f85\u529e3\\",\\n        },\\n      ],\\n    };\\n  },\\n  methods: {\\n    handleClick(id, e) {\\n      alert(id + \\", \\" + e.clientX + \\", \\" + e.clientY);\\n    },\\n    showContent(content) {\\n      alert(content);\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <ul>\\n      <li\\n        v-for=\\"todo in todos\\"\\n        :key=\\"todo.id\\"\\n        @click=\\"handleClick(todo.id, $event), showContent(todo.content)\\"\\n      >\\n        {{todo.content}}\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n```\\n\\n## 7. \u5e38\u7528\u4e8b\u4ef6\u76f8\u5173\u7684\u4fee\u9970\u7b26\\n\\n| \u4fee\u9970\u7b26  |                                               \u8bf4\u660e                                                |\\n| :-----: | :-----------------------------------------------------------------------------------------------: |\\n| prevent |                                           \u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6                                            |\\n|  stop   |                                             \u963b\u6b62\u5192\u6ce1                                              |\\n| capture | capture \u5b9e\u73b0\u6355\u83b7\u89e6\u53d1\u4e8b\u4ef6\u7684\u673a\u5236 \u5373\u662f\u7ed9\u5143\u7d20\u6dfb\u52a0\u4e00\u4e2a\u76d1\u542c\u5668,\u5f53\u5143\u7d20\u53d1\u751f\u5192\u6ce1\u65f6,\u5148\u89e6\u53d1\u5e26\u6709\u8be5\u4fee\u9970\u7b26\u7684\u5143\u7d20 |\\n|  once   |                                          \u53ea\u89e6\u53d1\u4e00\u6b21\u4e8b\u4ef6                                           |\\n|  self   |                                \u53ea\u6709\u70b9\u51fb\u5f53\u524d\u5143\u7d20\u672c\u8eab\u65f6\u624d\u4f1a\u89e6\u53d1\u56de\u8c03                                 |\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {};\\n  },\\n  methods: {\\n    handleUlClick() {\\n      alert(0);\\n    },\\n    handleLiClick() {\\n      alert(1);\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <a href=\\"https://gugulh.github.io\\" @click.prevent=\\"\\">\u70b9\u51fb\u8df3\u8f6c</a>\\n    \x3c!-- <ul @click=\\"handleUlClick\\">\\n          <li @click=\\"handleLiClick\\">1</li>\\n          <li>2</li>\\n        </ul>  --\x3e\\n    \x3c!-- stop--\x3e\\n    <ul @click=\\"handleUlClick\\">\\n      <li @click.stop=\\"handleLiClick\\">1</li>\\n      <li>2</li>\\n    </ul>\\n    \x3c!-- capture --\x3e\\n    \x3c!-- <ul @click.capture=\\"handleUlClick\\">\\n          <li @click=\\"handleLiClick\\">1</li>\\n          <li>2</li>\\n        </ul> --\x3e\\n    \x3c!-- self --\x3e\\n    \x3c!-- <ul @click.self=\\"handleUlClick\\">\\n          <li @click=\\"handleLiClick\\">1</li>\\n          <li>2</li>\\n        </ul> --\x3e\\n    \x3c!-- once --\x3e\\n    \x3c!-- <ul @click.once=\\"handleUlClick\\">\\n          <li @click=\\"handleLiClick\\">1</li>\\n          <li>2</li>\\n        </ul> --\x3e\\n  </div>\\n</div>\\n```\\n\\n## 8. \u5e38\u89c1\u5904\u7406\u952e\u76d8,\u9f20\u6807\u4e8b\u4ef6\u7684\u4fee\u9970\u7b26\\n\\n- \u952e\u76d8\u4fee\u9970\u7b26: `.enter`,`.tab`,`.delete`,`.esc`,`.up`,`.down`,`.left`,`.right`\\n- \u5e38\u89c1\u7ec4\u5408\u952e\u4fee\u9970\u7b26: `.ctrl`,`.alt`,`.shift`,`.meta`(Win \u662f\u5fbd\u6807\u952e,Mac \u662f Command \u952e)\\n- \u9f20\u6807\u4fee\u9970\u7b26: `.left`,`.middle`,`.right`\\n\\n- `.exact`: \u5141\u8bb8\u7cbe\u786e\u5730\u63a7\u5236\u4fee\u9970\u7b26\u7ec4\u5408\u89e6\u53d1\u7684\u4e8b\u4ef6\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      comments: [\\"\u597d\\", \\"\u975e\u5e38\u597d\\", \\"\u8d5e\\"],\\n      comment: \\"\\",\\n    };\\n  },\\n  methods: {\\n    addComment() {\\n      this.comments.push(this.comment);\\n      this.comment = \\"\\";\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <ul @mousedown.right=\\"comments.reverse()\\">\\n      <li v-for=\\"content in comments\\">{{ content }}</li>\\n    </ul>\\n    <input type=\\"text\\" v-model=\\"comment\\" @keyup.ctrl.enter.exact=\\"addComment\\" />\\n  </div>\\n</div>\\n```\\n\\n## 9. \u8868\u5355\u8f93\u5165\u76f8\u5173\u7684\u4fee\u9970\u7b26`.lazy` `.trim` `.number`\\n\\n- `.lazy`: `@input` => `@change`\\n- `.number`: \u8f6c\u6362\u4e3a\u6570\u5b57\u7c7b\u578b\\n- `.trim`: \u53bb\u9664\u6536\u5c3e\u7a7a\u683c\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      username: \\"\\",\\n      year: 2000,\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <input type=\\"text\\" v-model.lazy.trim=\\"username\\" />\\n    <p>{{ username }}</p>\\n    \x3c!-- <input type=\\"text\\" v-model.number=\\"year\\" /> --\x3e\\n    <input type=\\"number\\" v-model=\\"year\\" />\\n    <p>{{ typeof year }}</p>\\n  </div>\\n</div>\\n```\\n\\n## 10. \u901a\u8fc7 Vue \u5b9e\u4f8b\u8bbf\u95ee\u548c\u4fee\u6539\u5e94\u7528\u7684\u914d\u7f6e\\n\\n- \u5b9e\u4f8b\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee data \u5c5e\u6027\\n- \u4e5f\u53ef\u4ee5\u901a\u8fc7`$data`\u8bbf\u95ee\\n- \u53ef\u4ee5\u8bbf\u95ee`computed`, `methods` \u548c `watch`\\n- \u9002\u5408\u4f20\u7edf\u7f51\u7ad9\u548c Vue \u76f8\u7ed3\u5408\u7684\u573a\u666f\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      msg: \\"\u4f60\u597d\uff01\\",\\n      name: \\"\u5f20\u4e09\\",\\n    };\\n  },\\n  computed: {\\n    greetings() {\\n      return `${this.msg} ${this.name}`;\\n    },\\n  },\\n  methods: {\\n    changeName(name) {\\n      this.name = name;\\n    },\\n  },\\n  watch: {\\n    name(newName) {\\n      console.log(\\"watch \u76d1\u542c\uff1a\\" + newName);\\n    },\\n  },\\n});\\nconst vm = app.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <p>{{ msg }} {{ name }}</p>\\n    \x3c!-- <p>{{ greetings }}</p> --\x3e\\n  </div>\\n</div>\\n```\\n\\n## 11. Vue \u751f\u547d\u5468\u671f\u51fd\u6570\\n\\n- beforeCreate: \u8c03\u7528`app.mount()`\u521b\u5efa Vue \u5b9e\u4f8b\u4e4b\u540e, `createApp()`\u4e2d\u914d\u7f6e\u9879\u751f\u6548\u4e4b\u524d\u8c03\u7528\\n- created: \u5728`beforeCreate()`\u4e4b\u540e,`createApp()`\u4e2d\u914d\u7f6e\u9879\u751f\u6548\u4e4b\u524d\u8c03\u7528,\u8fd9\u4e2a\u65f6\u5019 computed,method \u548c watch \u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\\n- beforeMount: \u5728 created \u751f\u547d\u5468\u671f\u6267\u884c\u5b8c\u6210\u4e4b\u540e,\u5e94\u7528\u8fd8\u6ca1\u6709\u6302\u8f7d\u5230`app.mount()`\u6307\u5b9a\u7684 html \u5143\u7d20\u4e0a,\u5728\u6302\u8f7d\u4e4b\u524d\u4f1a\u8c03\u7528`beforeMount()`\u751f\u547d\u5468\u671f\u94a9\u5b50,\u8fd9\u4e2a\u65f6\u5019\u5e94\u7528\u8fd8\u6ca1\u5728\u9875\u9762\u4e0a\u6e32\u67d3\u51fa\u6765\\n- mounted: `mounted()`\u4f1a\u5728\u5e94\u7528\u6302\u8f7d\u5230`app.mount()`\u6307\u5b9a\u7684 html \u5143\u7d20\u540e\u6267\u884c,\u8fd9\u4e2a\u65f6\u5019\u5e94\u7528\u5df2\u7ecf\u5728\u9875\u9762\u4e0a\u6e32\u67d3\u51fa\u6765\u4e86\\n- beforeUpdate: \u5f53\u5e94\u7528\u4e2d html \u6a21\u677f\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u65f6,\u4f8b\u5982 data \u4e2d\u7684\u5c5e\u6027\u53d1\u751f\u4e86\u53d8\u5316,\u90a3\u4e48\u5728\u5237\u65b0\u4e4b\u524d\u4f1a\u6267\u884c`beforeUpdate()`\u751f\u547d\u5468\u671f\u94a9\u5b50\\n- updated: `updated()`\u662f\u5728\u6570\u636e\u66f4\u65b0\u4e4b\u540e,html \u91cd\u65b0\u6e32\u67d3\u5b8c\u6210\u4e4b\u540e\u8c03\u7528\\n- beforeUnmount: `beforeUnmount()`\u4f1a\u5728\u5e94\u7528\u5378\u8f7d\u524d\u6267\u884c,\u8c03\u7528`app.unmount()`\u4f1a\u5378\u8f7d\u7ec4\u4ef6,\u90a3\u4e48\u6b63\u5f0f\u5378\u8f7d\u524d,\u5148\u6267\u884c`beforeUnmount()`\u751f\u547d\u5468\u671f\u94a9\u5b50,\u8fd9\u4e2a\u65f6\u5019 Vue \u8fd8\u662f\u6b63\u5e38\u7684,\u53ef\u4ee5\u5728\u91cc\u9762\u505a\u4e00\u4e9b\u6e05\u7406\u6536\u5c3e\u64cd\u4f5c\\n- unmounted: `unmounted()`\u751f\u547d\u5468\u671f\u4f1a\u5728\u5e94\u7528\u6b63\u5f0f\u5378\u8f7d\u4e4b\u540e\u8c03\u7528,\u8fd9\u4e2a\u65f6\u5019\u8ddf\u5e94\u7528\u6709\u5173\u7684\u4e8b\u4ef6\u76d1\u542c,\u6216\u8005\u6307\u4ee4\u7ed1\u5b9a\u90fd\u5df2\u7ecf\u5378\u8f7d\u4e86\\n- \u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\\n\\n|                             created                             |              mounted              |\\n| :-------------------------------------------------------------: | :-------------------------------: |\\n| 1.\u6700\u65e9\u53ef\u4ee5\u8bbf\u95ee this<br/>2.\u53ef\u4ee5\u4fee\u6539 data \u5c5e\u6027<br/>3.\u8bf7\u6c42\u8fdc\u7a0b\u6570\u636e | DOM \u8282\u70b9\u5df2\u6302\u8f7d,\u53ef\u4ee5\u4fee\u6539\u548c\u8bbf\u95ee DOM |\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      posts: [],\\n    };\\n  },\\n  methods: {\\n    async fetchPosts() {\\n      // \u6a21\u62df\u8bf7\u6c42\u8fdc\u7a0b\u6570\u636e\\n      const res = await fetch(\\"./sample.json\\");\\n      const retData = await res.json();\\n      this.posts = retData;\\n    },\\n  },\\n  created() {\\n    this.fetchPosts();\\n  },\\n});\\nconst vm = app.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <ul>\\n      <li v-for=\\"post in posts\\" :key=\\"post.id\\">{{ post.title }}</li>\\n    </ul>\\n  </div>\\n</div>\\n```"},{"id":"spring ai\u5feb\u901f\u5165\u95e8","metadata":{"permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8","source":"@site/blog/2025-05-28-Spring AI\u5feb\u901f\u5165\u95e8.md","title":"Spring AI\u5feb\u901f\u5165\u95e8","description":"\u4e4b\u524d\u4e00\u76f4\u4f7f\u7528 Langchain \u5f00\u53d1\u7684\u5927\u6a21\u578b\u76f8\u5173\u5e94\u7528,\u8fd1\u671f\u56e0\u9700\u8981,\u8bd5\u4e00\u8bd5 Spring AI","date":"2025-05-28T00:00:00.000Z","formattedDate":"2025\u5e745\u670828\u65e5","tags":[{"label":"Spring AI","permalink":"/blog/tags/spring-ai"}],"readingTime":4.24,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"spring ai\u5feb\u901f\u5165\u95e8","title":"Spring AI\u5feb\u901f\u5165\u95e8","authors":"gugulh","tags":["Spring AI"]},"prevItem":{"title":"Vue\u8fdb\u9636","permalink":"/blog/vue\u8fdb\u9636"},"nextItem":{"title":"Vue\u57fa\u7840\u5165\u95e8","permalink":"/blog/vue\u57fa\u7840\u5165\u95e8"}},"content":"\u4e4b\u524d\u4e00\u76f4\u4f7f\u7528 Langchain \u5f00\u53d1\u7684\u5927\u6a21\u578b\u76f8\u5173\u5e94\u7528,\u8fd1\u671f\u56e0\u9700\u8981,\u8bd5\u4e00\u8bd5 Spring AI\\n\\n\u4e00\u4e9b\u5927\u6a21\u578b\u76f8\u5173\u7684\u524d\u7f6e\u77e5\u8bc6\u4e0d\u518d\u8d58\u8ff0,\u76f4\u63a5\u5b9e\u64cd\\n\\n## 1. \u524d\u7f6e\u8981\u6c42\\n\\n- JDK17+\\n- \u6709\u4f7f\u7528\u7b2c\u4e09\u65b9\u5bc6\u94a5\u6216\u8005\u6709\u90e8\u7f72\u672c\u5730\u5927\u6a21\u578b(Ollma)\\n\\n## 2. \u521b\u5efa Spring Boot3 \u9879\u76ee\\n\\n```xml\\n    <parent>\\n        <groupId>org.springframework.boot</groupId>\\n        <artifactId>spring-boot-starter-parent</artifactId>\\n        <version>3.4.6</version>\\n        <relativePath/>\\n    </parent>\\n\\n    <properties>\\n        <maven.compiler.source>17</maven.compiler.source>\\n        <maven.compiler.target>17</maven.compiler.target>\\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\\n        <spring-ai.ver>1.0.0</spring-ai.ver>\\n    </properties>\\n\\n    <dependencyManagement>\\n        \x3c!-- Spring AI --\x3e\\n        <dependencies>\\n            <dependency>\\n                <groupId>org.springframework.ai</groupId>\\n                <artifactId>spring-ai-bom</artifactId>\\n                <version>${spring-ai.ver}</version>\\n                <type>pom</type>\\n                <scope>import</scope>\\n            </dependency>\\n        </dependencies>\\n    </dependencyManagement>\\n\\n    <dependencies>\\n        \x3c!-- Web\u4f9d\u8d56 --\x3e\\n        <dependency>\\n            <groupId>org.springframework.boot</groupId>\\n            <artifactId>spring-boot-starter-web</artifactId>\\n        </dependency>\\n        \x3c!-- MySQL\u9a71\u52a8 --\x3e\\n        <dependency>\\n            <groupId>com.mysql</groupId>\\n            <artifactId>mysql-connector-j</artifactId>\\n            <scope>runtime</scope>\\n        </dependency>\\n        \x3c!-- Spring AI Deepseek --\x3e\\n        \x3c!-- \u53ef\u4ee5\u6362\u6210\u5176\u4ed6\u7684\u5927\u6a21\u578b\u63d0\u4f9b\u5546,\u81ea\u5df1\u53bb\u7236pom\u627e --\x3e\\n        <dependency>\\n            <groupId>org.springframework.ai</groupId>\\n            <artifactId>spring-ai-starter-model-deepseek</artifactId>\\n        </dependency>\\n        \x3c!-- Lombok --\x3e\\n        <dependency>\\n            <groupId>org.projectlombok</groupId>\\n            <artifactId>lombok</artifactId>\\n        </dependency>\\n\\n        <dependency>\\n            <groupId>org.springframework.boot</groupId>\\n            <artifactId>spring-boot-starter-test</artifactId>\\n        </dependency>\\n    </dependencies>\\n\\n    <build>\\n        <plugins>\\n            <plugin>\\n                <groupId>org.springframework.boot</groupId>\\n                <artifactId>spring-boot-maven-plugin</artifactId>\\n            </plugin>\\n        </plugins>\\n    </build>\\n```\\n\\n## 3. application.yaml\\n\\n```yaml\\nspring:\\n  application:\\n    name: spring-ai\\n  ai:\\n    deepseek:\\n      api-key: \u4f60\u7684API Key\\n      base-url: https://api.deepseek.com\\n      chat:\\n        options:\\n          model: deepseek-chat\\n          temperature: 0.2\\n```\\n\\n## 4. \u914d\u7f6e DeepSeek \u5ba2\u6237\u7aef\\n\\n```java\\n    /**\\n     * \u914d\u7f6e\u5ba2\u6237\u7aef\\n     */\\n    @Bean\\n    public ChatClient chatClient(DeepSeekChatModel model) {\\n        String SYSTEM_PROMPT = \\"\\"\\"\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\n                \\"\\"\\";\\n\\n        return ChatClient.builder(model)\\n                .defaultSystem(SYSTEM_PROMPT)\\n                .build();\\n    }\\n```\\n\\n## 5. \u5b9a\u4e49 Controller,\u5b8c\u6210\u7b80\u5355\u5bf9\u8bdd\\n\\n- \u963b\u585e\u5f0f\u54cd\u5e94: \u7b49\u5927\u6a21\u578b\u5b8c\u5168\u8f93\u51fa\u7ed3\u679c\u540e\u8fd4\u56de\\n- \u6d41\u5f0f\u54cd\u5e94: \u5927\u6a21\u578b\u4f1a\u6bcf\u6b21\u5410\u51fa\u4e00\u4e2a\u5b57, \u7c7b\u4f3c\u524d\u7aef\u6253\u5b57\u673a\u6548\u679c\\n\\n```java\\n    @Autowired\\n    private ChatClient chatClient;\\n\\n    /**\\n     * \u963b\u585e\u5f0f\u8c03\u7528\\n     */\\n    @GetMapping(\\"/chat\\")\\n    public String chat(@RequestParam(name = \\"prompt\\", required = true) String prompt) {\\n        return chatClient.prompt()\\n                .user(prompt)\\n                .call() // \u963b\u585e\u5f0f\u8c03\u7528\\n                .content();\\n    }\\n\\n    /**\\n     * \u4f7f\u7528WebFlux\u5b8c\u6210\u6d41\u5f0f\u54cd\u5e94,\u524d\u7aef\u7c7b\u4f3c\u6253\u5b57\u673a\u6548\u679c\\n     */\\n    @GetMapping(value = \\"/chat-stream\\", produces = \\"text/html;charset=utf-8\\")\\n    public Flux<String> chatStream(@RequestParam(name = \\"prompt\\", required = true) String prompt) {\\n        return chatClient.prompt()\\n                .user(prompt)\\n                .stream() // \u6d41\u5f0f\u54cd\u5e94\\n                .content();\\n    }\\n```\\n\\n## 6. \u6dfb\u52a0\u65e5\u5fd7\\n\\n- \u63a5\u53e3\u662f Advisor, \u53ef\u4ee5\u9009\u62e9\u5b9e\u73b0\u7c7b SimpleLoggerAdvisor, \u4f1a\u5728\u63a7\u5236\u53f0\u6253\u5370\\n- \u9700\u8981\u914d\u7f6e\u65e5\u5fd7\u7ea7\u522b\\n\\n```java\\n    @Bean\\n    public ChatClient chatClient(DeepSeekChatModel model) {\\n        String SYSTEM_PROMPT = \\"\\"\\"\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\n                \\"\\"\\";\\n\\n        return ChatClient.builder(model)\\n                .defaultSystem(SYSTEM_PROMPT)\\n                .defaultAdvisors(new SimpleLoggerAdvisor()) // \u73af\u7ed5\u589e\u5f3a,\u6dfb\u52a0\u65e5\u5fd7\u6253\u5370, advisors\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\\n                .build();\\n    }\\n```\\n\\n```yaml\\nlogging:\\n  level:\\n    org.springframework.ai.chat.client.advisor: debug\\n```\\n\\n## 7. \u6dfb\u52a0\u4f1a\u8bdd\u8bb0\u5fc6\u529f\u80fd\\n\\n- \u5b9e\u73b0 ChatMemory \u63a5\u53e3,\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u5b9e\u73b0 MessageWindowChatMemory(\u76ee\u524d\u6700\u65b0\u7248\u672c Spring AI \u5c31\u8fd9\u4e00\u4e2a\u5b9e\u73b0, \u57fa\u4e8e\u77ed\u671f\u6d88\u606f\u7a97\u53e3\u5b9e\u73b0, \u5982\u679c\u6d88\u606f\u5b58\u50a8\u5927\u4e8e\u4e86\u9608\u503c \u9ed8\u8ba4 20,\u5219\u4f1a\u629b\u5f03\u6700\u65e7\u7684\u6d88\u606f)\\n- \u53ef\u81ea\u5b9a\u4e49\u5b9e\u73b0\\n\\n```java\\n    /**\\n     * \u914d\u7f6eChatMemory\\n     */\\n    @Bean\\n    public ChatMemory chatMemory() {\\n        return MessageWindowChatMemory.builder().build();\\n    }\\n\\n    /**\\n     * \u914d\u7f6e\u5ba2\u6237\u7aef\\n     */\\n    @Bean\\n    public ChatClient chatClient(DeepSeekChatModel model, ChatMemory chatMemory) {\\n        String SYSTEM_PROMPT = \\"\\"\\"\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\n                \\"\\"\\";\\n\\n        return ChatClient.builder(model)\\n                .defaultSystem(SYSTEM_PROMPT)\\n                .defaultAdvisors(\\n                        new SimpleLoggerAdvisor(), // \u73af\u7ed5\u589e\u5f3a,\u6dfb\u52a0\u65e5\u5fd7\u6253\u5370\\n                        MessageChatMemoryAdvisor.builder(chatMemory).build() // \u6dfb\u52a0\u4f1a\u8bdd\u8bb0\u5fc6\u529f\u80fd\\n                )\\n                .build();\\n    }\\n\\n    /**\\n     * controller\u9700\u8981\u5bf9\u6bcf\u4e00\u6b21\u7684\u4f1a\u8bddid\u8fdb\u884c\u7ef4\u62a4\\n     */\\n    @PostMapping(value = \\"/chat-stream\\", produces = \\"text/html;charset=utf-8\\")\\n    public Flux<String> chatStream(\\n            @RequestParam(name = \\"prompt\\", required = true) String prompt,\\n            @RequestParam(name = \\"chatId\\", required = true) String chatId\\n    ) {\\n        return chatClient.prompt()\\n                .user(prompt)\\n                .advisors(advisorSpec -> advisorSpec.param(ChatMemory.CONVERSATION_ID, chatId)) // \u6dfb\u52a0\u4f1a\u8bddID\u5230Advisor\u4e0a\u4e0b\u6587\u4e2d\\n                .stream() // \u6d41\u5f0f\u54cd\u5e94\\n                .content();\\n    }\\n```"},{"id":"vue\u57fa\u7840\u5165\u95e8","metadata":{"permalink":"/blog/vue\u57fa\u7840\u5165\u95e8","source":"@site/blog/2025-05-26-Vue\u57fa\u7840\u5165\u95e8.md","title":"Vue\u57fa\u7840\u5165\u95e8","description":"1. \u4f7f\u7528 data \u63d0\u4f9b\u6570\u636e","date":"2025-05-26T00:00:00.000Z","formattedDate":"2025\u5e745\u670826\u65e5","tags":[{"label":"Vue","permalink":"/blog/tags/vue"}],"readingTime":10.75,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"vue\u57fa\u7840\u5165\u95e8","title":"Vue\u57fa\u7840\u5165\u95e8","authors":"gugulh","tags":["Vue"]},"prevItem":{"title":"Spring AI\u5feb\u901f\u5165\u95e8","permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8"},"nextItem":{"title":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","permalink":"/blog/Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5"}},"content":"## 1. \u4f7f\u7528 data \u63d0\u4f9b\u6570\u636e\\n\\n- data \u5c5e\u6027\u662f\u4e00\u4e2a\u51fd\u6570\\n- \u51fd\u6570\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\\n- \u5728\u6a21\u677f\u4e2d\u8bbf\u95ee\u9876\u7ea7\u5c5e\u6027: `<div>{{prop}}</div>`\\n- \u5d4c\u5957\u5c5e\u6027: `<div>{{prop.username}}</div>`\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      name: \\"\u5f20\u5c71\\",\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <h1>\u4f60\u597d,{{name}}!</h1>\\n</div>\\n```\\n\\n# 2. \u5728 html \u5c5e\u6027\u4e2d\u7ed1\u5b9a data \u6570\u636e: v-bind\\n\\n- `<a v-bind:href=\\"link\\">\u94fe\u63a5</a>`\\n- `<a :href=\\"link\\">\u94fe\u63a5</a>`\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      link: \\"https://gugulh.github.io/\\",\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <a v-bind:href=\\"link\\">\u94fe\u63a5</a>\\n  <a :href=\\"link\\">\u94fe\u63a5</a>\\n</div>\\n```\\n\\n## 3. \u5c55\u793a\u5217\u8868\u5185\u5bb9: v-for\\n\\n- \u904d\u5386\u6570\u7ec4\u7c7b\u578b\u6570\u636e\\n- \u53ef\u4ee5\u8bbf\u95ee\u7d22\u5f15:`<li v-for=\\"(todo, index) in todos\\">{{index + 1}} - {{todo}}</li>`\\n- \u80fd\u591f\u904d\u5386\u5bf9\u8c61\u6570\u7ec4\\n- \u53ef\u4ee5\u5728\u6307\u4ee4\u4e2d\u4f7f\u7528 js \u8868\u8fbe\u5f0f\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      // todos: [\\"\u4e00\u8d77\u538b\u9a6c\u8def\\", \\"\u4e00\u8d77\u5403\u996d\\", \\"\u4e00\u8d77\u6e9cpp\\"]\\n      todos: [\\n        {\\n          content: \\"\u4e00\u8d77\u5403\u996d\\",\\n          complete: true,\\n        },\\n        {\\n          content: \\"\u4e00\u8d77\u538b\u9a6c\u8def\\",\\n          complete: true,\\n        },\\n        {\\n          content: \\"\u4e00\u8d77\u6e9cpp\\",\\n          complete: false,\\n        },\\n      ],\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <ul>\\n    \x3c!-- <li v-for=\\"(todo, index) in todos\\">{{index + 1}} - {{todo}}</li> --\x3e\\n    <li v-for=\\"(todo, index) in todos\\">\\n      <input type=\\"checkbox\\" :checked=\\"todo.complete\\" />{{todo.content}}\\n    </li>\\n  </ul>\\n</div>\\n```\\n\\n## 4. \u6839\u636e\u6761\u4ef6\u5c55\u793a\u9875\u9762\u5185\u5bb9\\n\\n- v-if, v-else-if, \u548c v-else\\n- \u4e0e js \u4e2d if, else...if, else \u4e00\u6837\\n- \u8fd9\u4e09\u4e2a\u6807\u7b7e\u5fc5\u987b\u76f8\u90bb\u4f7f\u7528\\n- v-show \u4f1a\u8bbe\u7f6e display \u5c5e\u6027\u4e3a none \u9690\u85cf\u5143\u7d20\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      // books: [\\"JavaScript \u57fa\u7840\u8bed\u6cd5\u8be6\u89e3\\", \\"Vue \u5165\u95e8\u5b9e\u6218\\", \\"React \u5165\u95e8\u5230\u7cbe\u901a\\"],\\n      books: [],\\n      // books: [\\"JavaScript \u57fa\u7840\u8bed\u6cd5\u8be6\u89e3\\"],\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  \x3c!-- <p v-if=\\"books.length === 0\\">\u76ee\u524d\u6ca1\u6709\u4efb\u4f55\u4e66\u7c4d</p>\\n    <h2 v-else-if=\\"books.length === 1\\">{{ books[0] }}</h2>\\n    <ul v-else>\\n      <li v-for=\\"book in books\\">{{ book }}</li>\\n    </ul> --\x3e\\n  <p v-show=\\"books.length === 0\\">\u76ee\u524d\u6ca1\u6709\u4efb\u4f55\u4e66\u7c4d</p>\\n  <ul v-show=\\"books.length > 0\\">\\n    <li v-for=\\"book in books\\">{{ book }}</li>\\n  </ul>\\n</div>\\n```\\n\\n## 5. \u4e8b\u4ef6\u4e0e\u54cd\u5e94\u5165\u95e8\\n\\n- v-on:\u4e8b\u4ef6\u540d \u6216 @\u4e8b\u4ef6\u540d\\n- \u503c\u53ef\u4ee5\u4e3a js \u8868\u8fbe\u5f0f\u6216\u51fd\u6570\\n- \u5e38\u89c1\u7684\u6ce8\u518c\u4e8b\u4ef6\\n\\n| HTML \u4e8b\u4ef6\u540d | Vue \u4e8b\u4ef6\u540d |\\n| :---------: | :--------: |\\n|   onclick   |   click    |\\n|  onchange   |   change   |\\n|   onblur    |    blur    |\\n|   onfocus   |   focus    |\\n|  onsubmit   |   submit   |\\n|   onreset   |   reset    |\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      showAnswer: false,\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div class=\\"question\\">\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\n    </p>\\n    <button @click=\\"showAnswer = !showAnswer\\">\\n      {{ showAnswer ? \\"\u9690\u85cf\\" : \\"\u663e\u793a\\" }}\u7b54\u6848\\n    </button>\\n  </div>\\n</div>\\n```\\n\\n## 6. computed \u8ba1\u7b97\u5c5e\u6027\\n\\n- \u4f7f\u7528 computed \u914d\u7f6e\u9879\u5b9a\u4e49\u8ba1\u7b97\u5c5e\u6027\\n- \u6bcf\u4e2a\u8ba1\u7b97\u5c5e\u6027\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\\n- \u51fd\u6570\u53ef\u4ee5\u4f7f\u7528 this \u8bbf\u95ee data \u6216\u5176\u4ed6\u914d\u7f6e\u9879\u4e2d\u7684\u503c\\n- \u5728\u6a21\u677f\u4e2d\u53ef\u4ee5\u50cf data \u5c5e\u6027\u4e00\u6837\u4f7f\u7528\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      showAnswer: false,\\n    };\\n  },\\n  computed: {\\n    label() {\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848\\" : \\"\u663e\u793a\u7b54\u6848\\";\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div class=\\"question\\">\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\n    </p>\\n    <button @click=\\"showAnswer = !showAnswer\\">{{ label }}</button>\\n  </div>\\n</div>\\n```\\n\\n\u4f18\u70b9: \u907f\u514d\u5728 html \u4e2d\u76f4\u63a5\u5199\u8ba1\u7b97\u903b\u8f91,\u53ef\u4ee5\u4ee3\u7801\u590d\u7528,\u51cf\u5c11\u5197\u4f59\u4ee3\u7801\\n\\n## 7. methods \u65b9\u6cd5\u5904\u7406\u4e8b\u4ef6\\n\\n- \u4f7f\u7528 methods \u914d\u7f6e\u9879\u5904\u7406\u4e8b\u4ef6\u6216\u590d\u7528\u903b\u8f91\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      showAnswer: false,\\n    };\\n  },\\n  computed: {\\n    label() {\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848\\" : \\"\u663e\u793a\u7b54\u6848\\";\\n    },\\n  },\\n  methods: {\\n    toggleAnswer() {\\n      this.showAnswer = !this.showAnswer;\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div class=\\"question\\">\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\n    </p>\\n    <button @click=\\"toggleAnswer\\">{{ label }}</button>\\n  </div>\\n</div>\\n```\\n\\n## 8. watch \u76d1\u542c\u6570\u636e\u53d8\u5316\\n\\n- \u4f7f\u7528 watch \u5b9a\u4e49\u76d1\u542c\u5668: watcher \u53ef\u4ee5\u662f\u5b9a\u65f6\u5668,\u8bf7\u6c42 API \u7b49\u8017\u65f6\u64cd\u4f5c\\n\\n```mermaid\\nflowchart LR\\n    A[data \u5c5e\u6027] --\x3e B[watcher \u76d1\u542c\u5668]\\n    B --\x3e C[\u4fee\u6539\u5176\u5b83 data \u5c5e\u6027]\\n    C --\x3e D[\u53cd\u5e94\u5230\u6a21\u677f\u4e0a]\\n```\\n\\n- \u76d1\u542c\u5668\u540d\u5b57\u8981\u548c\u76d1\u542c\u7684\u5c5e\u6027\u540d\u4fdd\u6301\u4e00\u81f4\\n- \u76d1\u542c\u5668\u63a5\u6536\u5c5e\u6027\u65e7\u503c\u548c\u65b0\u503c\u4f5c\u4e3a\u53c2\u6570\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      showAnswer: false,\\n      countDown: 5,\\n      timer: null,\\n    };\\n  },\\n  computed: {\\n    label() {\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848 \\" + this.countDown : \\"\u663e\u793a\u7b54\u6848\\";\\n    },\\n  },\\n  methods: {\\n    toggleAnswer() {\\n      this.showAnswer = !this.showAnswer;\\n    },\\n  },\\n  watch: {\\n    showAnswer(newVal, oldVal) {\\n      if (newVal) {\\n        this.countDown = 5;\\n        if (this.timer) {\\n          clearInterval(this.timer);\\n          this.timer = null;\\n        }\\n        // 5\u79d2\u540e\u5173\u95ed\u7b54\u6848\\n        this.timer = setInterval(() => {\\n          this.countDown -= 1;\\n          if (this.countDown === 0) {\\n            this.showAnswer = false;\\n            clearInterval(this.timer);\\n            this.timer = null;\\n          }\\n        }, 1000);\\n      }\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div class=\\"question\\">\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\n    </p>\\n    <button @click=\\"toggleAnswer\\">{{ label }}</button>\\n  </div>\\n</div>\\n```\\n\\n## 9. computed, methods \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\n\\n- computed \u548c methods \u4e4b\u95f4\u7684\u533a\u522b\\n  - \u8ba1\u7b97\u5c5e\u6027\u9002\u5408\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u64cd\u4f5c,\u7ed3\u679c\u4f1a\u7f13\u5b58\\n  - \u8ba1\u7b97\u5c5e\u6027\u53ef\u4ee5\u76f4\u63a5\u5728 html \u4e2d,\u50cf data \u4e2d\u7684\u5c5e\u6027\u4e00\u6837\u4f7f\u7528\\n  - \u65b9\u6cd5\u9002\u5408\u505a\u590d\u6742\u7684\u64cd\u4f5c,\u901a\u5e38\u4f5c\u4e3a\u4e8b\u4ef6\u76d1\u542c\u6216\u8005\u516c\u5171\u4e1a\u52a1\u903b\u8f91\\n  - \u65b9\u6cd5\u53ef\u4ee5\u5f53\u4f5c\u666e\u901a js \u51fd\u6570\u4f7f\u7528\\n- computed \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\n\\n|               computed                |          watch          |\\n| :-----------------------------------: | :---------------------: |\\n|          \u7b80\u5355\u7684\u4e1a\u52a1\u903b\u8f91\u8ba1\u7b97           | \u8017\u65f6\u64cd\u4f5c\u548c\u8fdc\u7a0b API \u52a0\u8f7d |\\n|      \u53ef\u4ee5\u76f4\u63a5\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528       | \u4e0d\u80fd\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528  |\\n|          \u54cd\u5e94 data \u6570\u636e\u53d8\u5316           |      \u54cd\u5e94\u6570\u636e\u53d8\u5316       |\\n|            \u6709\u8fd4\u56de\u503c/getter            |       \u6ca1\u6709\u8fd4\u56de\u503c        |\\n| \u4e5f\u53ef\u4ee5\u4f7f\u7528 setters \u4fee\u6539 data \u4e2d\u7684\u6570\u636e | \u53ef\u4ee5\u4fee\u6539 data \u4e2d\u7684\u6570\u636e  |\\n\\n- methods \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\n\\n|          methods           |         watch          |\\n| :------------------------: | :--------------------: |\\n|   \u53ef\u4ee5\u5728 watch \u4e2d\u88ab\u8c03\u7528    |        \u4e0d\u80fd\u8c03\u7528        |\\n| \u53ef\u4ee5\u76f4\u63a5\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528 | \u4e0d\u80fd\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528 |\\n|     \u54cd\u5e94 data \u6570\u636e\u53d8\u5316     |   \u54cd\u5e94 data \u6570\u636e\u53d8\u5316   |\\n|  \u53ef\u4ee5\u6709\u8fd4\u56de\u503c,\u4e5f\u53ef\u4ee5\u6ca1\u6709   |       \u6ca1\u6709\u8fd4\u56de\u503c       |\\n\\n- \u5e94\u7528\u573a\u666f\\n  - computed \u9002\u5408\u6839\u636e data \u4e2d\u7684\u5c5e\u6027\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u8ba1\u7b97\u5e76\u8fd4\u56de\u7ed3\u679c,\u4f8b\u5982\u6570\u7ec4\u7684\u6392\u5e8f\u7b5b\u9009,\u53ea\u6709 data \u4e2d\u7684\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u65f6,\u624d\u4f1a\u91cd\u65b0\u8ba1\u7b97,\u5176\u4ed6\u60c5\u51b5\u4f1a\u7f13\u5b58\u7ed3\u679c\\n  - watch \u9002\u5408\u5728 js \u4e2d\u76d1\u542c data \u7684\u53d8\u5316,\u5e76\u6839\u636e\u53d8\u5316\u505a\u4e00\u4e9b\u8017\u65f6\u7684\u64cd\u4f5c\\n  - methods \u9002\u5408\u66f4\u590d\u6742\u7684\u8ba1\u7b97,\u901a\u5e38\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f7f\u7528\u6216\u8005\u662f\u62bd\u53d6\u516c\u5171\u7684\u4e1a\u52a1\u903b\u8f91,\u5f53\u4f5c\u666e\u901a\u7684 js \u51fd\u6570\\n\\n## 10. \u8868\u5355\u8f93\u5165\u6570\u636e\u5904\u7406\\n\\n- \u7ed9 input \u6dfb\u52a0@input \u4e8b\u4ef6\\n- \u5728 input \u4e8b\u4ef6\u76d1\u542c\u4e2d,\u4fee\u6539 data \u5c5e\u6027\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      username: \\"\\",\\n    };\\n  },\\n  methods: {\\n    handleInput(e) {\\n      this.username = e.target.value;\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <div class=\\"input-field\\">\\n      <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\n      <input id=\\"username\\" type=\\"text\\" @input=\\"handleInput\\" />\\n    </div>\\n    <div class=\\"result\\">\\n      <p>\u4f60\u8f93\u5165\u7684\u7528\u6237\u540d\u662f\uff1a{{ username }}</p>\\n    </div>\\n  </div>\\n</div>\\n```\\n\\n## 11. \u53cc\u5411\u7ed1\u5b9a\u548c v-model\\n\\n- \u53cc\u5411\u7ed1\u5b9a:\u8f93\u5165\u6846\u7684\u503c\u548c data \u7b49\u5c5e\u6027\u503c\u4e92\u76f8\u540c\u6b65\\n- v-model \u7b80\u5316\u4e86@input \u548c:value \u6570\u636e\u7684\u540c\u6b65\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      username: \\"\\",\\n    };\\n  },\\n  methods: {\\n    handleInput(e) {\\n      this.username = e.target.value;\\n    },\\n    resetUsername() {\\n      this.username = \\"\\";\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <div class=\\"input-field\\">\\n      <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\n      <input\\n        id=\\"username\\"\\n        type=\\"text\\"\\n        @input=\\"handleInput\\"\\n        :value=\\"username\\"\\n        \x3c!--\\n        v-model=\\"username\\"\\n        --\\n      />\\n      />\\n      <button @click=\\"resetUsername\\">\u91cd\u7f6e</button>\\n    </div>\\n    <div class=\\"result\\">\\n      <p>\u4f60\u8f93\u5165\u7684\u7528\u6237\u540d\u662f\uff1a{{ username }}</p>\\n    </div>\\n  </div>\\n</div>\\n```\\n\\n## 12. \u5176\u4ed6\u8868\u5355\u63a7\u4ef6\u4e8b\u4ef6\u5904\u7406\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      username: \\"\\",\\n      gender: \\"\\",\\n      interests: [],\\n      occupation: \\"\\",\\n      intro: \\"\\",\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div class=\\"form\\">\\n    <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\n    <input id=\\"username\\" type=\\"text\\" v-model=\\"username\\" />\\n    <label for=\\"gender\\">\u6027\u522b\uff1a</label>\\n    <div id=\\"gender\\" class=\\"radio-group\\">\\n      <input name=\\"gender\\" type=\\"radio\\" value=\\"male\\" v-model=\\"gender\\" />\\n      <span>\u7537</span>\\n      <input name=\\"gender\\" type=\\"radio\\" value=\\"female\\" v-model=\\"gender\\" />\\n      <span>\u5973</span>\\n    </div>\\n    <label for=\\"interest\\">\u5174\u8da3\uff1a</label>\\n    <div id=\\"interest\\" class=\\"checkbox-group\\">\\n      <input\\n        type=\\"checkbox\\"\\n        name=\\"interests\\"\\n        value=\\"frontend\\"\\n        v-model=\\"interests\\"\\n      />\\n      <span>\u524d\u7aef</span>\\n      <input\\n        type=\\"checkbox\\"\\n        name=\\"interests\\"\\n        value=\\"backend\\"\\n        v-model=\\"interests\\"\\n      />\\n      <span>\u540e\u7aef</span>\\n      <input\\n        type=\\"checkbox\\"\\n        name=\\"interests\\"\\n        value=\\"fullstack\\"\\n        v-model=\\"interests\\"\\n      />\\n      <span>\u5168\u6808</span>\\n    </div>\\n    <label for=\\"occupation\\">\u804c\u4e1a\uff1a</label>\\n    <select name=\\"occupation\\" id=\\"occupation\\" v-model=\\"occupation\\">\\n      <option value=\\"frontend\\">\u524d\u7aef\u5de5\u7a0b\u5e08</option>\\n      <option value=\\"backend\\">\u540e\u7aef\u5de5\u7a0b\u5e08</option>\\n      <option value=\\"fullstack\\">\u5168\u6808\u5de5\u7a0b\u5e08</option>\\n    </select>\\n    <label for=\\"intro\\">\u81ea\u6211\u4ecb\u7ecd\uff1a</label>\\n    <textarea id=\\"intro\\" rows=\\"10\\" v-model=\\"intro\\"></textarea>\\n  </div>\\n  <div class=\\"result\\">\\n    <ul>\\n      <li>\u7528\u6237\u540d\uff1a {{ username }}</li>\\n      <li>\u6027\u522b\uff1a{{ gender }}</li>\\n      <li>\u5174\u8da3\uff1a{{ interests }}</li>\\n      <li>\u804c\u4e1a\uff1a{{ occupation }}</li>\\n      <li>\u81ea\u6211\u4ecb\u7ecd\uff1a {{ intro }}</li>\\n    </ul>\\n  </div>\\n</div>\\n```\\n\\n## 13. \u8868\u5355\u63d0\u4ea4\u4e8b\u4ef6\u5904\u7406\\n\\n- \u4f7f\u7528`<form @submit.prevent=\\"handleSubmit\\">...</form>`\\n- \u6216\u8005\u4f7f\u7528`<form @submit=\\"handleSubmit\\">...</form>`, \u4f46\u662f\u5728 js \u4e2d\u8981\u8bbe\u7f6e`e.preventDefault();`\u963b\u6b62\u9ed8\u8ba4\u8df3\u8f6c\\n- \u5207\u8bb0\u8fd8\u6709\u4e00\u4e2a button \u7528\u6765\u63d0\u4ea4`<button type=\\"submit\\">\u63d0\u4ea4</button>`\\n\\n## 14. \u5728 inline-style \u5185\u8054\u6837\u5f0f\u4e2d\u7ed1\u5b9a data \u6570\u636e\\n\\n- \u76f4\u63a5\u4f7f\u7528 v-bind \u7ed1\u5b9a\\n- \u4e5f\u53ef\u4ee5\u7ed1\u5b9a\u8ba1\u7b97\u5c5e\u6027,\u65b9\u6cd5\u7b49\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      fontSize: 16,\\n    };\\n  },\\n  computed: {\\n    pStyle() {\\n      return {\\n        color: \\"white\\",\\n        fontSize: this.fontSize + \\"px\\",\\n      };\\n    },\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <div>\\n    <p :style=\\"pStyle\\">\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\n    <button class=\\"btn\\" @click=\\"fontSize += 1\\">+</button>\\n    <button class=\\"btn\\" @click=\\"fontSize -= 1\\">-</button>\\n  </div>\\n</div>\\n```\\n\\n## 15. \u6839\u636e\u6761\u4ef6\u6dfb\u52a0\u6216\u5220\u9664 class \u6837\u5f0f\\n\\n- \u76f4\u63a5\u4f7f\u7528 v-bind \u7ed1\u5b9a\\n- \u53ef\u4ee5\u7ed1\u5b9a\u5355\u4e2a class\\n- \u53ef\u4ee5\u7528\u6570\u7ec4\u7ed1\u5b9a\u591a\u4e2a class\\n- \u53ef\u4ee5\u7528\u5bf9\u8c61\u6839\u636e\u6761\u4ef6\u6dfb\u52a0/\u79fb\u9664 class\\n\\n```javascript\\nconst app = Vue.createApp({\\n  data() {\\n    return {\\n      textClass: \\"text-blue\\",\\n      stateClass: \\"danger\\",\\n      isHidden: false,\\n    };\\n  },\\n});\\napp.mount(\\"#app\\");\\n```\\n\\n```html\\n<div id=\\"app\\">\\n  <p :class=\\"[textClass, stateClass, { hide: isHidden }]\\">\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\n  <button @click=\\"isHidden = !isHidden\\">\u5207\u6362\u72b6\u6001</button>\\n</div>\\n```"},{"id":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","metadata":{"permalink":"/blog/Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","source":"@site/blog/2024-04-07-Gin middleware.md","title":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","description":"\u524d\u8a00","date":"2024-04-07T00:00:00.000Z","formattedDate":"2024\u5e744\u67087\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"},{"label":"Gin","permalink":"/blog/tags/gin"},{"label":"Middleware","permalink":"/blog/tags/middleware"}],"readingTime":8.44,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","title":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","authors":"gugulh","tags":["Go","Gin","Middleware"]},"prevItem":{"title":"Vue\u57fa\u7840\u5165\u95e8","permalink":"/blog/vue\u57fa\u7840\u5165\u95e8"},"nextItem":{"title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898"}},"content":"## \u524d\u8a00\\n\\n\u5728\u6784\u5efa\u9ad8\u6027\u80fd\u3001\u6a21\u5757\u5316\u7684 Web \u5e94\u7528\u65f6\uff0c**\u4e2d\u95f4\u4ef6\uff08Middleware\uff09**\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u57fa\u77f3\u3002\u5bf9\u4e8e Go \u8bed\u8a00\u7684\u660e\u661f\u7ea7 Web \u6846\u67b6 **Gin** \u800c\u8a00\uff0c\u4e2d\u95f4\u4ef6\u673a\u5236\u7684\u7b80\u6d01\u548c\u5f3a\u5927\uff0c\u662f\u5176\u5e7f\u53d7\u5f00\u53d1\u8005\u559c\u7231\u7684\u91cd\u8981\u539f\u56e0\u4e4b\u4e00\u3002\u672c\u6587\u5c06\u4ece Go \u8bed\u8a00\u7a0b\u5e8f\u5458\u7684\u89d2\u5ea6\uff0c\u6df1\u5165\u5256\u6790 Gin \u4e2d\u95f4\u4ef6\u7684\u539f\u7406\u3001\u5e94\u7528\u573a\u666f\uff0c\u5e76\u4ee5\u4e00\u4e2a\u5b9e\u7528\u7684**\u8de8\u57df\uff08CORS\uff09\u4e2d\u95f4\u4ef6**\u4e3a\u4f8b\uff0c\u7ed9\u51fa\u5b8c\u6574\u7684\u4ee3\u7801\u5b9e\u8df5\u3002\\n\\n## 1. \u4ec0\u4e48\u662f Gin \u4e2d\u95f4\u4ef6\uff1f\\n\\n\u5728 Gin \u6846\u67b6\u4e2d\uff0c\u4e2d\u95f4\u4ef6\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6216\u591a\u4e2a**\u5904\u7406\u5668\u51fd\u6570\uff08HandlerFunc\uff09**\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728 HTTP \u8bf7\u6c42\u5230\u8fbe\u6700\u7ec8\u7684\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u51fd\u6570\uff08Handler\uff09\u4e4b\u524d\u6216\u4e4b\u540e\u6267\u884c\u9884\u5b9a\u7684\u903b\u8f91\u3002\\n\\nGin \u6846\u67b6\u7684\u6838\u5fc3\u8bbe\u8ba1\u91c7\u7528\u4e86**\u6d0b\u8471\u6a21\u578b\uff08Onion Model\uff09**\u6216\u79f0\u4e3a**\u94fe\u5f0f\u5904\u7406\uff08Chain of Handlers\uff09**\u3002\u5f53\u4e00\u4e2a\u8bf7\u6c42\u8fdb\u5165 Gin \u8def\u7531\u65f6\uff0c\u5b83\u4f1a\u4f9d\u6b21\u7a7f\u8fc7\u4e00\u7cfb\u5217\u7684\u4e2d\u95f4\u4ef6\uff0c\u76f4\u5230\u5230\u8fbe\u6700\u7ec8\u7684\u4e1a\u52a1 Handler\u3002\\n\\n### 1.1 \u4e2d\u95f4\u4ef6\u7684\u7ed3\u6784\\n\\n\u5728 Gin \u4e2d\uff0c\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u5c31\u662f\u4e00\u4e2a\u6807\u51c6\u7684 `gin.HandlerFunc`\uff1a\\n\\n```go\\ntype HandlerFunc func(*Context)\\n```\\n\\n\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u6307\u5411 `gin.Context` \u7684\u6307\u9488\uff0c`Context` \u5bf9\u8c61\u5305\u542b\u4e86\u8bf7\u6c42\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5e76\u63d0\u4f9b\u4e86\u4fee\u6539\u54cd\u5e94\u3001\u63a7\u5236\u6d41\u7a0b\u7684\u65b9\u6cd5\u3002\\n\\n### 1.2 \u6838\u5fc3\u65b9\u6cd5\uff1a`c.Next()`\\n\\nGin \u4e2d\u95f4\u4ef6\u7684\u5173\u952e\u5728\u4e8e `c.Next()` \u65b9\u6cd5\u3002\\n\\n* **\u6267\u884c `c.Next()` \u4e4b\u524d**\uff1a\u6267\u884c\u7684\u903b\u8f91\u88ab\u79f0\u4e3a **\u524d\u7f6e\u5904\u7406\uff08Before\uff09**\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u3001\u8bf7\u6c42\u53c2\u6570\u6821\u9a8c\u3002\\n* **\u8c03\u7528 `c.Next()`**\uff1a\u5c06\u63a7\u5236\u6743\u79fb\u4ea4\u7ed9\u94fe\u4e2d\u7684\u4e0b\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u6216\u6700\u7ec8\u7684 Handler\u3002\\n* **\u6267\u884c `c.Next()` \u4e4b\u540e**\uff1a\u6267\u884c\u7684\u903b\u8f91\u88ab\u79f0\u4e3a **\u540e\u7f6e\u5904\u7406\uff08After\uff09**\uff0c\u4f8b\u5982\u54cd\u5e94\u4fee\u6539\u3001\u8017\u65f6\u7edf\u8ba1\u3002\\n\\n\u8fd9\u79cd\u8bbe\u8ba1\u4f7f\u5f97\u4e2d\u95f4\u4ef6\u53ef\u4ee5\u201c\u5305\u88f9\u201d\u4e1a\u52a1\u903b\u8f91\uff0c\u5f62\u6210\u4e86\u5f3a\u5927\u7684\u529f\u80fd\u6269\u5c55\u80fd\u529b\u3002\\n\\n## 2. Gin \u4e2d\u95f4\u4ef6\u7684\u5de5\u4f5c\u6d41\u7a0b (\u6d0b\u8471\u6a21\u578b)\\n\\nGin \u7684\u6d0b\u8471\u6a21\u578b\u662f\u7406\u89e3\u4e2d\u95f4\u4ef6\u6267\u884c\u987a\u5e8f\u7684\u5173\u952e\u3002\u8bf7\u6c42\u4ece\u6700\u5916\u5c42\uff08\u7b2c\u4e00\u4e2a\u4e2d\u95f4\u4ef6\uff09\u8fdb\u5165\uff0c\u5c42\u5c42\u6df1\u5165\uff0c\u76f4\u5230\u6838\u5fc3\uff08\u6700\u7ec8 Handler\uff09\u3002\u5904\u7406\u5b8c\u6210\u540e\uff0c\u518d\u4ece\u6838\u5fc3\u4e00\u5c42\u5c42\u8fd4\u56de\uff0c\u6267\u884c\u540e\u7f6e\u903b\u8f91\u3002\\n\\n```mermaid\\ngraph TD\\n    A[HTTP Request] --\x3e B(Middleware 1: \u524d\u7f6e\u903b\u8f91);\\n    B --\x3e C(Middleware 2: \u524d\u7f6e\u903b\u8f91);\\n    C --\x3e D[\u6700\u7ec8 Handler: \u4e1a\u52a1\u903b\u8f91];\\n    D --\x3e E(Middleware 2: \u540e\u7f6e\u903b\u8f91);\\n    E --\x3e F(Middleware 1: \u540e\u7f6e\u903b\u8f91);\\n    F --\x3e G[HTTP Response];\\n```\\n\\n\\n\\n### 2.1 \u5e38\u89c1\u7684\u5e94\u7528\u573a\u666f\\n\\nGin \u4e2d\u95f4\u4ef6\u53ef\u4ee5\u5e94\u7528\u4e8e\u5404\u79cd\u6a2a\u5207\u5173\u6ce8\u70b9\uff1a\\n\\n1.  **\u8eab\u4efd\u8ba4\u8bc1/\u6388\u6743**\uff1a\u68c0\u67e5 JWT \u6216 Session\uff0c\u5224\u65ad\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u8bbf\u95ee\u3002\\n2.  **\u65e5\u5fd7\u8bb0\u5f55**\uff1a\u8bb0\u5f55\u8bf7\u6c42\u7684\u8def\u5f84\u3001\u65b9\u6cd5\u3001IP \u5730\u5740\u548c\u54cd\u5e94\u65f6\u95f4\u3002\\n3.  **\u8de8\u57df\u5904\u7406 (CORS)**\uff1a\u8bbe\u7f6e\u5fc5\u8981\u7684 HTTP \u54cd\u5e94\u5934\uff0c\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u3002\\n4.  **\u6570\u636e\u6821\u9a8c**\uff1a\u5728\u5230\u8fbe\u4e1a\u52a1\u5c42\u524d\uff0c\u7edf\u4e00\u5bf9\u8bf7\u6c42\u53c2\u6570\u8fdb\u884c\u7ed3\u6784\u548c\u5185\u5bb9\u7684\u6821\u9a8c\u3002\\n5.  **\u9650\u6d41/\u7194\u65ad**\uff1a\u63a7\u5236\u8bf7\u6c42\u9891\u7387\uff0c\u4fdd\u62a4\u540e\u7aef\u670d\u52a1\u3002\\n6.  **\u9519\u8bef\u6062\u590d**\uff1a\u4f7f\u7528 `gin.Recovery()` \u6355\u83b7 `panic`\uff0c\u907f\u514d\u670d\u52a1\u5d29\u6e83\u3002\\n\\n## 3. \u5b9e\u8df5\uff1a\u6784\u5efa\u4e00\u4e2a\u901a\u7528\u7684 CORS \u8de8\u57df\u4e2d\u95f4\u4ef6\\n\\n\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09\u662f Web \u5f00\u53d1\u4e2d\u51e0\u4e4e\u5fc5\u4e0d\u53ef\u5c11\u7684\u914d\u7f6e\u3002Gin \u6846\u67b6\u867d\u7136\u6ca1\u6709\u5185\u7f6e\uff0c\u4f46\u5b9e\u73b0\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u975e\u5e38\u7b80\u5355\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93: github.com/gin-contrib/cors\\n\\n### 3.1 CORS \u4e2d\u95f4\u4ef6\u4ee3\u7801\u793a\u4f8b\\n\\n\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u5c06\u5904\u7406\u6d4f\u89c8\u5668\u7684\u9884\u68c0\u8bf7\u6c42\uff08Preflight Request\uff0c\u5373 `OPTIONS` \u65b9\u6cd5\uff09\uff0c\u5e76\u8bbe\u7f6e\u5fc5\u8981\u7684\u54cd\u5e94\u5934\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42\u3002\\n\\n```go\\npackage middleware\\n\\nimport (\\n\\t\\"net/http\\"\\n\\t\\"github.com/gin-gonic/gin\\"\\n)\\n\\n// CorsMiddleware \u662f\u4e00\u4e2a\u901a\u7528\u7684\u8de8\u57df\u5904\u7406\u4e2d\u95f4\u4ef6\\nfunc CorsMiddleware() gin.HandlerFunc {\\n\\treturn func(c *gin.Context) {\\n\\t\\t// 1 \u8bbe\u7f6e\u5141\u8bb8\u6240\u6709\u57df\u8bbf\u95ee\\n\\t\\t// \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u66ff\u6362\u4e3a\u7279\u5b9a\u7684\u57df\u540d\uff0c\u4f8b\u5982\uff1ac.Writer.Header().Set(\\"Access-Control-Allow-Origin\\", \\"[https://yourdomain.com](https://yourdomain.com)\\")\\n\\t\\tc.Writer.Header().Set(\\"Access-Control-Allow-Origin\\", \\"*\\")\\n\\n\\t\\t// 2 \u5141\u8bb8\u7684\u8bf7\u6c42\u65b9\u6cd5\\n\\t\\tc.Writer.Header().Set(\\"Access-Control-Allow-Methods\\", \\"POST, GET, OPTIONS, PUT, DELETE, UPDATE\\")\\n\\n\\t\\t// 3 \u5141\u8bb8\u7684\u8bf7\u6c42\u5934\\n\\t\\t// \u5fc5\u987b\u5305\u542b Authorization \u4ee5\u652f\u6301 JWT \u7b49\u8ba4\u8bc1\u65b9\u5f0f\\n\\t\\tc.Writer.Header().Set(\\"Access-Control-Allow-Headers\\", \\"Origin, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization\\")\\n\\n\\t\\t// 4 \u5141\u8bb8\u643a\u5e26\u8ba4\u8bc1\u4fe1\u606f\uff08\u5982 Cookies\u3001HTTP \u8ba4\u8bc1\u4fe1\u606f\uff09\\n\\t\\t// \u6ce8\u610f\uff1a\u5982\u679c Access-Control-Allow-Origin \u8bbe\u7f6e\u4e3a \\"*\\"\uff0c\u5219\u4e0d\u80fd\u8bbe\u7f6e AllowCredentials \u4e3a true\\n\\t\\t// c.Writer.Header().Set(\\"Access-Control-Allow-Credentials\\", \\"true\\")\\n\\n\\t\\t// 5 \u5904\u7406\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u9884\u68c0\u8bf7\u6c42 (OPTIONS)\\n\\t\\t// \u5982\u679c\u662f OPTIONS \u8bf7\u6c42\uff0c\u76f4\u63a5\u8fd4\u56de 204 No Content\uff0c\u5e76\u4e2d\u6b62\u540e\u7eed\u5904\u7406\\n\\t\\tif c.Request.Method == \\"OPTIONS\\" {\\n\\t\\t\\tc.AbortWithStatus(http.StatusNoContent)\\n\\t\\t\\treturn\\n\\t\\t}\\n\\n\\t\\t// 6 \u6267\u884c\u540e\u7eed\u7684\u4e2d\u95f4\u4ef6\u548c\u6700\u7ec8\u7684\u4e1a\u52a1 Handler\\n\\t\\tc.Next()\\n\\t}\\n}\\n```\\n\\n### 3.2 \u4e2d\u95f4\u4ef6\u7684\u6ce8\u518c\u4e0e\u4f7f\u7528\\n\\n\u5728 Gin \u5e94\u7528\u4e2d\uff0c\u4e2d\u95f4\u4ef6\u53ef\u4ee5\u5728**\u5168\u5c40**\u3001**\u8def\u7531\u5206\u7ec4**\u6216**\u5355\u4e2a\u8def\u7531**\u7ea7\u522b\u8fdb\u884c\u6ce8\u518c\u3002\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\"net/http\\"\\n\\t\\"github.com/gin-gonic/gin\\"\\n\\t\\"your_project_name/middleware\\" \\n)\\n\\nfunc main() {\\n\\tr := gin.New()\\n\\n\\t// 1 \u5168\u5c40\u6ce8\u518c\u4e2d\u95f4\u4ef6\\n\\t// \u6240\u6709\u8bf7\u6c42\u90fd\u4f1a\u7ecf\u8fc7\u8fd9\u4e24\u4e2a\u4e2d\u95f4\u4ef6\\n\\tr.Use(gin.Recovery()) // Gin \u5185\u7f6e\u7684\u9519\u8bef\u6062\u590d\u4e2d\u95f4\u4ef6\\n\\tr.Use(middleware.CorsMiddleware()) // \u6ce8\u518c\u6211\u4eec\u7684 CORS \u4e2d\u95f4\u4ef6\\n\\n\\t// 2 \u6ce8\u518c\u8def\u7531\\n\\tr.GET(\\"/ping\\", func(c *gin.Context) {\\n\\t\\tc.JSON(http.StatusOK, gin.H{\\n\\t\\t\\t\\"message\\": \\"pong\\",\\n\\t\\t})\\n\\t})\\n\\n\\t// 3 \u8def\u7531\u5206\u7ec4\u6ce8\u518c\u4e2d\u95f4\u4ef6\\n\\t// \u53ea\u6709 /api/v1 \u4e0b\u7684\u8def\u7531\u4f1a\u5e94\u7528 AuthMiddleware\\n\\tv1 := r.Group(\\"/api/v1\\")\\n\\tv1.Use(AuthMiddleware())\\n\\t{\\n\\t\\tv1.GET(\\"/user\\", func(c *gin.Context) {\\n\\t\\t\\t// \u4e1a\u52a1\u903b\u8f91...\\n\\t\\t\\tc.JSON(http.StatusOK, gin.H{\\"user\\": \\"info\\"})\\n\\t\\t})\\n\\t}\\n\\n\\tr.Run(\\":8080\\")\\n}\\n\\n// \u6a21\u62df\u4e00\u4e2a\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\\nfunc AuthMiddleware() gin.HandlerFunc {\\n    return func(c *gin.Context) {\\n        token := c.GetHeader(\\"Authorization\\")\\n        if token == \\"\\" {\\n            c.AbortWithStatusJSON(http.StatusUnauthorized, gin.H{\\"error\\": \\"Unauthorized\\"})\\n            return\\n        }\\n        // \u9a8c\u8bc1 token \u903b\u8f91...\\n        c.Next()\\n    }\\n}\\n```\\n\\n## 4. \u6df1\u5165\u7406\u89e3\uff1a\u6d41\u7a0b\u63a7\u5236\u4e0e\u4e2d\u65ad\\n\\n\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e2d\u95f4\u4ef6\u9700\u8981\u5728\u8bf7\u6c42\u672a\u901a\u8fc7\u6821\u9a8c\u65f6**\u4e2d\u65ad**\u540e\u7eed\u7684\u6267\u884c\u3002Gin \u63d0\u4f9b\u4e86\u4e24\u4e2a\u5173\u952e\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u6d41\u7a0b\u63a7\u5236\uff1a\\n\\n### 4.1 `c.Abort()`\\n\\n**\u4f5c\u7528**\uff1a\u7acb\u5373\u505c\u6b62\u6267\u884c\u540e\u7eed\u7684\u4e2d\u95f4\u4ef6\u548c Handler\u3002\\n\\n**\u6ce8\u610f**\uff1a`c.Abort()` \u53ea\u4f1a\u963b\u6b62 `c.Next()` \u4e4b\u540e\u7684\u4ee3\u7801\u6267\u884c\uff0c\u4f46\u5f53\u524d\u4e2d\u95f4\u4ef6 `c.Abort()` \u4e4b\u540e\u7684\u4ee3\u7801**\u4ecd\u7136\u4f1a\u6267\u884c**\uff08\u5373**\u540e\u7f6e\u5904\u7406**\u90e8\u5206\uff09\u3002\\n\\n```go\\nfunc AuthMiddleware() gin.HandlerFunc {\\n    return func(c *gin.Context) {\\n        if !isValid(c) {\\n            c.JSON(http.StatusUnauthorized, gin.H{\\"error\\": \\"Invalid Token\\"})\\n            c.Abort() // \u4e2d\u65ad\u540e\u7eed\u6d41\u7a0b\\n            return\\n        }\\n        c.Next() // \u5982\u679c\u9a8c\u8bc1\u901a\u8fc7\uff0c\u8fdb\u5165\u4e0b\u4e00\u4e2a\u73af\u8282\\n    }\\n}\\n```\\n\\n### 4.2 `c.AbortWithStatusJSON()`\\n\\n**\u4f5c\u7528**\uff1a\u5728\u4e2d\u6b62\u6d41\u7a0b\u7684\u540c\u65f6\uff0c\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a JSON \u54cd\u5e94\u3002\\n\\n**\u6ce8\u610f**\uff1a\u8fd9\u4e2a\u65b9\u6cd5\u662f `c.JSON()` \u548c `c.Abort()` \u7684\u7ec4\u5408\uff0c\u662f\u5904\u7406\u9519\u8bef\u548c\u6743\u9650\u95ee\u9898\u7684\u63a8\u8350\u65b9\u5f0f\u3002\\n\\n## 5. \u603b\u7ed3\u4e0e\u6700\u4f73\u5b9e\u8df5\\n\\nGin \u7684\u4e2d\u95f4\u4ef6\u673a\u5236\u662f\u6784\u5efa\u5065\u58ee Web \u5e94\u7528\u7684\u5229\u5668\uff0c\u5b83\u5b9e\u73b0\u4e86\u804c\u8d23\u5206\u79bb\u548c\u4ee3\u7801\u590d\u7528\u3002\\n\\n| \u5b9e\u8df5\u70b9           | \u63cf\u8ff0                                                         |\\n| :--------------- | :----------------------------------------------------------- |\\n| **\u7ec6\u5316\u804c\u8d23**     | \u4e00\u4e2a\u4e2d\u95f4\u4ef6\u53ea\u505a\u4e00\u4ef6\u4e8b\uff0c\u4f8b\u5982\uff1aCORS \u53ea\u8d1f\u8d23\u8de8\u57df\u5934\uff0cAuth \u53ea\u8d1f\u8d23\u8ba4\u8bc1\u3002 |\\n| **\u9519\u8bef\u5904\u7406**     | \u4f7f\u7528 `c.AbortWithStatusJSON()` \u4f18\u96c5\u5730\u5904\u7406\u6821\u9a8c\u5931\u8d25\u548c\u6743\u9650\u62d2\u7edd\u3002 |\\n| **\u6027\u80fd\u8003\u91cf**     | \u907f\u514d\u5728\u5168\u5c40\u6ce8\u518c\u8fc7\u591a\u4e0d\u5fc5\u8981\u7684\u4e2d\u95f4\u4ef6\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u6027\u80fd\u8981\u6c42\u7684\u8def\u7531\u4e0a\u3002 |\\n| **Context \u4f7f\u7528** | \u901a\u8fc7 `c.Set()` \u548c `c.Get()` \u5728\u4e2d\u95f4\u4ef6\u4e4b\u95f4\u4ee5\u53ca\u4e2d\u95f4\u4ef6\u548c Handler \u4e4b\u95f4\u4f20\u9012\u6570\u636e\uff0c\u4f8b\u5982\u4f20\u9012\u89e3\u6790\u51fa\u7684 `user_id`\u3002 |\\n\\n\u638c\u63e1\u4e86 Gin \u7684\u6d0b\u8471\u6a21\u578b\u548c `c.Next()` \u7684\u7cbe\u9ad3\uff0c\u4f60\u5c31\u80fd\u8f7b\u677e\u5730\u5229\u7528\u4e2d\u95f4\u4ef6\u6765\u6784\u5efa\u51fa\u66f4\u52a0\u4f18\u96c5\u3001\u53ef\u7ef4\u62a4\u7684 Go Web \u670d\u52a1\u3002"},{"id":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","metadata":{"permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","source":"@site/blog/2024-04-02-JWT.md","title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","description":"\u524d\u8a00","date":"2024-04-02T00:00:00.000Z","formattedDate":"2024\u5e744\u67082\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"},{"label":"JWT","permalink":"/blog/tags/jwt"}],"readingTime":8.03,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","authors":"gugulh","tags":["Go","JWT"]},"prevItem":{"title":"Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5","permalink":"/blog/Gin \u6846\u67b6\uff1aMiddleware \u4e2d\u95f4\u4ef6\u7684\u827a\u672f\u4e0e\u5b9e\u8df5"},"nextItem":{"title":"Go \u57fa\u7840","permalink":"/blog/go \u57fa\u7840"}},"content":"## \u524d\u8a00\\n\\nJSON Web Token\uff08JWT\uff09\u5df2\u6210\u4e3a\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8eab\u4efd\u8ba4\u8bc1\u7684\u901a\u7528\u6807\u51c6\u3002\u5b83\u4ee5\u5176\u65e0\u72b6\u6001\uff08Stateless\uff09\u7279\u6027\uff0c\u5b8c\u7f8e\u5951\u5408\u4e86 RESTful API \u548c\u5fae\u670d\u52a1\u67b6\u6784\u3002\u672c\u6587\u65e8\u5728\u6df1\u5165\u6d45\u51fa\u5730\u8bb2\u89e3 JWT \u7684\u6838\u5fc3\u539f\u7406\u3001\u5b9e\u9645\u5e94\u7528\uff0c\u5e76\u5256\u6790\u4e00\u4e9b\u5f00\u53d1\u8005\u5728\u5b9e\u8df5\u4e2d\u5e38\u9047\u5230\u7684\u95ee\u9898\u3002\\n\\n## 1. \u4ec0\u4e48\u662f JWT\uff1f\\n\\nJWT \u7684\u672c\u8d28\u662f\u4e00\u4e2a\u9075\u5faa\u7279\u5b9a\u89c4\u8303\u7684\u3001\u7d27\u51d1\u4e14\u81ea\u5305\u542b\u7684 JSON \u5bf9\u8c61\u3002\u5b83\u88ab\u7528\u4e8e\u5728\u5404\u65b9\u4e4b\u95f4\u5b89\u5168\u5730\u4f20\u8f93\u4fe1\u606f\u3002\u4e00\u4e2a\u5b8c\u6574\u7684 JWT \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u7528\u70b9\uff08`.`\uff09\u5206\u9694\uff1a\\n\\n- **Header\uff08\u5934\u90e8\uff09**\uff1a\u5305\u542b\u4ee4\u724c\u7684\u7c7b\u578b\uff08`typ`\uff09\u548c\u4f7f\u7528\u7684\u7b7e\u540d\u7b97\u6cd5\uff08`alg`\uff09\u3002\u4f8b\u5982\uff1a\\n\\n  ```json\\n  {\\n    \\"alg\\": \\"HS256\\",\\n    \\"typ\\": \\"JWT\\"\\n  }\\n  ```\\n\\n- **Payload\uff08\u8f7d\u8377\uff09**\uff1a\u5305\u542b\u58f0\u660e\uff08claims\uff09\uff0c\u5373\u4e00\u4e9b\u5b9e\u4f53\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u548c\u9644\u52a0\u5143\u6570\u636e\u3002\u58f0\u660e\u5206\u4e3a\u4e09\u7c7b\uff1a\\n\\n  - **\u6ce8\u518c\u58f0\u660e\uff08Registered Claims\uff09**\uff1a\u9884\u5b9a\u4e49\u7684\u6807\u51c6\u5b57\u6bb5\uff0c\u5982 `iss`\uff08\u7b7e\u53d1\u8005\uff09\u3001`exp`\uff08\u8fc7\u671f\u65f6\u95f4\uff09\u3001`sub`\uff08\u4e3b\u9898\uff09\u7b49\u3002\\n  - **\u516c\u5171\u58f0\u660e\uff08Public Claims\uff09**\uff1a\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\uff0c\u7528\u4e8e\u4f20\u9012\u516c\u5171\u4fe1\u606f\uff0c\u5e94\u907f\u514d\u547d\u540d\u51b2\u7a81\u3002\\n  - **\u79c1\u6709\u58f0\u660e\uff08Private Claims\uff09**\uff1a\u7528\u4e8e\u5728\u7279\u5b9a\u5e94\u7528\u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u58f0\u660e\uff0c\u4e0d\u5efa\u8bae\u7528\u4e8e\u654f\u611f\u6570\u636e\u3002\\n\\n- **Signature\uff08\u7b7e\u540d\uff09**\uff1a\u7531 Base64URL \u7f16\u7801\u540e\u7684 Header\u3001Payload\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5bc6\u94a5\uff08Secret\uff09\u901a\u8fc7\u6307\u5b9a\u7684\u7b97\u6cd5\uff08\u5982 HMAC-SHA256\uff09\u8ba1\u7b97\u5f97\u5230\u3002\u5b83\u7684\u4f5c\u7528\u662f\u9a8c\u8bc1 JWT \u662f\u5426\u88ab\u7be1\u6539\u3002\\n\\n## 2. JWT \u7684\u5de5\u4f5c\u6d41\u7a0b\\n\\nJWT \u7684\u6838\u5fc3\u5de5\u4f5c\u6d41\u7a0b\u975e\u5e38\u7b80\u6d01\uff1a\\n\\n1.  **\u8ba4\u8bc1**\uff1a\u7528\u6237\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u767b\u5f55\u3002\\n2.  **\u751f\u6210\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u9a8c\u8bc1\u51ed\u636e\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u7528\u6237 ID \u548c\u5176\u4ed6\u4fe1\u606f\u7684 JWT\uff0c\u5e76\u7528\u5bc6\u94a5\u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\u3002\\n3.  **\u8fd4\u56de\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u5c06\u8fd9\u4e2a JWT \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\\n4.  **\u643a\u5e26\u4ee4\u724c**\uff1a\u5ba2\u6237\u7aef\u5728\u540e\u7eed\u7684\u6bcf\u6b21\u8bf7\u6c42\u4e2d\uff0c\u5c06 JWT \u653e\u5728 HTTP Header \u7684 `Authorization` \u5b57\u6bb5\u4e2d\uff08\u901a\u5e38\u683c\u5f0f\u4e3a `Bearer <token>`\uff09\u3002\\n5.  **\u9a8c\u8bc1\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u9a8c\u8bc1 JWT \u7684\u7b7e\u540d\uff0c\u5e76\u89e3\u6790 Payload \u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1\u3002\\n\\n```mermaid\\nsequenceDiagram\\n    participant Client\\n    participant Server\\n\\n    Client->>Server: 1. \u53d1\u9001\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\\n    Server--\x3e>Server: 2. \u9a8c\u8bc1\u51ed\u636e\\n    Server->>Server: 3. \u751f\u6210 JWT (Access Token)\\n    Server->>Client: 4. \u8fd4\u56de JWT \u7ed9\u5ba2\u6237\u7aef\\n    Client->>Client: 5. \u5ba2\u6237\u7aef\u5b58\u50a8 JWT\\n    Client->>Server: 6. \u5728\u540e\u7eed\u8bf7\u6c42\u4e2d\u643a\u5e26 JWT (Authorization: Bearer <token>)\\n    Server->>Server: 7. \u9a8c\u8bc1 JWT \u7b7e\u540d\u548c\u6709\u6548\u6027\\n    Server->>Client: 8. \u8fd4\u56de\u8bf7\u6c42\u7684\u8d44\u6e90\u6216\u6570\u636e\\n```\\n\\n## 3. \u4e3a\u4ec0\u4e48\u9009\u62e9 JWT\uff1f\\n\\n- \u65e0\u72b6\u6001\uff08Stateless\uff09\uff1a\u670d\u52a1\u5668\u65e0\u9700\u5728\u5185\u5b58\u4e2d\u4fdd\u5b58\u4f1a\u8bdd\u4fe1\u606f\uff0c\u51cf\u8f7b\u4e86\u670d\u52a1\u5668\u538b\u529b\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u548c\u5fae\u670d\u52a1\u67b6\u6784\u3002\\n\\n- \u8de8\u57df\u517c\u5bb9\uff1aJWT \u53ef\u4ee5\u901a\u8fc7 Header \u4f20\u9012\uff0c\u5929\u7136\u652f\u6301\u8de8\u57df\u8ba4\u8bc1\u3002\\n\\n- \u81ea\u5305\u542b\uff1a\u5b83\u5305\u542b\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\uff0c\u670d\u52a1\u5668\u65e0\u9700\u9891\u7e41\u67e5\u8be2\u6570\u636e\u5e93\u3002\\n\\n## 4. \u5b9e\u8df5\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5\\n\\n### \u95ee\u9898\u4e00\uff1a\u4ee4\u724c\u8fc7\u671f\u600e\u4e48\u529e\uff1f\\n\\n**\u89e3\u51b3\u65b9\u6848**\uff1a\u5f15\u5165 **Refresh Token\uff08\u5237\u65b0\u4ee4\u724c\uff09** \u673a\u5236\u3002\\n\\n- Access Token\uff08\u8bbf\u95ee\u4ee4\u724c\uff09\uff1a\u751f\u547d\u5468\u671f\u77ed\uff08\u5982 15 \u5206\u949f\uff09\uff0c\u7528\u4e8e\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90\u3002\\n\\n- Refresh Token\uff1a\u751f\u547d\u5468\u671f\u957f\uff08\u5982 7 \u5929\uff09\uff0c\u7528\u4e8e\u5728 Access Token \u8fc7\u671f\u540e\uff0c\u5411\u8ba4\u8bc1\u670d\u52a1\u5668\u8bf7\u6c42\u65b0\u7684 Access Token\u3002\\n\\n\u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u5b89\u5168\u6027\uff0c\u53c8\u63d0\u5347\u4e86\u7528\u6237\u4f53\u9a8c\u3002\\n\\n```mermaid\\nsequenceDiagram\\n    participant Client\\n    participant Server\\n\\n    Client->>Server: 1. \u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\uff0c\u4f46 Access Token \u5df2\u8fc7\u671f\\n    Server->>Client: 2. \u54cd\u5e94 401 Unauthorized\\n    Client->>Server: 3. \u643a\u5e26 Refresh Token \u8bf7\u6c42\u65b0\u7684 Access Token\\n    Server--\x3e>Server: 4. \u9a8c\u8bc1 Refresh Token\\n    Server->>Server: 5. \u751f\u6210\u65b0\u7684 Access Token \u548c Refresh Token\\n    Server->>Client: 6. \u8fd4\u56de\u65b0\u7684\u4ee4\u724c\\n    Client->>Server: 7. \u4f7f\u7528\u65b0\u7684 Access Token \u518d\u6b21\u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\\n    Server->>Client: 8. \u6210\u529f\u8fd4\u56de\u8d44\u6e90\\n```\\n\\n### \u95ee\u9898\u4e8c\uff1a\u5982\u4f55\u5904\u7406\u4ee4\u724c\u64a4\u9500\uff1f\\n\\n**\u89e3\u51b3\u65b9\u6848**\uff1a\\n\\n- \u9ed1\u540d\u5355\u673a\u5236\uff1a\u5c06\u5df2\u7b7e\u53d1\u4f46\u9700\u8981\u63d0\u524d\u5931\u6548\u7684 JWT \u5b58\u50a8\u5728 Redis \u6216\u5176\u4ed6\u7f13\u5b58\u4e2d\u3002\u6bcf\u6b21\u9a8c\u8bc1\u65f6\uff0c\u5148\u68c0\u67e5\u9ed1\u540d\u5355\u3002\\n\\n- \u7b7e\u53d1\u7248\u672c\u53f7\uff1a\u5728 Payload \u4e2d\u52a0\u5165\u7528\u6237\u7248\u672c\u53f7\uff08\u5982 version: 1\uff09\u3002\u5f53\u7528\u6237\u5bc6\u7801\u4fee\u6539\u3001\u6743\u9650\u53d8\u66f4\u7b49\u9700\u8981\u5f3a\u5236\u6240\u6709\u65e7\u4ee4\u724c\u5931\u6548\u65f6\uff0c\u66f4\u65b0\u7248\u672c\u53f7\u3002\u670d\u52a1\u5668\u9a8c\u8bc1\u65f6\uff0c\u5982\u679c\u4ee4\u724c\u4e2d\u7684\u7248\u672c\u53f7\u4e0e\u6570\u636e\u5e93\u4e0d\u4e00\u81f4\uff0c\u5219\u62d2\u7edd\u3002\\n\\n---\\n\\n## 5. \u5b89\u5168\u6027\u8003\u91cf\u4e0e\u6700\u4f73\u5b9e\u8df5\\n\\nJWT \u867d\u7136\u5f3a\u5927\uff0c\u4f46\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u4e5f\u4f1a\u5f15\u5165\u5b89\u5168\u98ce\u9669\u3002\u4ee5\u4e0b\u51e0\u70b9\u81f3\u5173\u91cd\u8981\uff1a\\n\\n1. **\u4fdd\u62a4\u4f60\u7684\u5bc6\u94a5**\uff1a\u7b7e\u540d\u5bc6\u94a5\u662f JWT \u5b89\u5168\u7684\u6838\u5fc3\u3002\u5b83\u5fc5\u987b\u88ab\u59a5\u5584\u4fdd\u7ba1\uff0c\u4e0d\u80fd\u66b4\u9732\u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u3002\u5efa\u8bae\u5c06\u5bc6\u94a5\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u6216\u4f7f\u7528\u4e13\u95e8\u7684\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\uff08\u5982 AWS KMS\u3001Vault\uff09\u3002\\n2. **Payload \u5e76\u975e\u52a0\u5bc6**\uff1a\u5207\u8bb0\uff0cJWT \u7684 Payload \u53ea\u662f\u7ecf\u8fc7 **Base64URL \u7f16\u7801**\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8f7b\u677e\u89e3\u7801\u3002\u56e0\u6b64\uff0c**\u7edd\u5bf9\u4e0d\u8981**\u5728 Payload \u4e2d\u5b58\u653e\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u5982\u5bc6\u7801\u3001\u94f6\u884c\u5361\u53f7\u7b49\u3002\\n3. **\u907f\u514d\u4f7f\u7528\u5f31\u7b97\u6cd5**\uff1a\u786e\u4fdd\u4f60\u7684\u7b7e\u540d\u7b97\u6cd5\u662f\u5b89\u5168\u7684\uff0c\u4f8b\u5982 HMAC-SHA256\u3001RSA-SHA256\u3002\u8981\u7279\u522b\u6ce8\u610f\uff0c\u907f\u514d\u4f7f\u7528**\\"none\\"\u7b97\u6cd5**\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u7ed5\u8fc7\u7b7e\u540d\u9a8c\u8bc1\uff0c\u8ba9\u653b\u51fb\u8005\u53ef\u4ee5\u4f2a\u9020\u4efb\u610f\u7684 Payload\u3002\\n\\n---\\n\\n## 6. \u5b9e\u8df5\u4ee3\u7801\u793a\u4f8b (Go)\\n\\n\u6211\u4eec\u5c06\u4f7f\u7528 github.com/golang-jwt/jwt/v5 \u8fd9\u4e2a\u6d41\u884c\u7684 Go \u5e93\u6765\u5904\u7406 JWT\u3002\\n\\n1. **\u5b89\u88c5\u5e93**\\n\\n   Bash\\n\\n   ```\\n   go get github.com/golang-jwt/jwt/v5\\n   ```\\n\\n2. **\u751f\u6210\u4ee4\u724c**\\n\\n   ```go\\n   package main\\n\\n   import (\\n   \\t\\"fmt\\"\\n   \\t\\"time\\"\\n\\n   \\t\\"github.com/golang-jwt/jwt/v5\\"\\n   )\\n\\n   // \u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\u7ed3\u6784\u4f53\\n   type UserClaims struct {\\n   \\tUserID   string `json:\\"user_id\\"`\\n   \\tUsername string `json:\\"username\\"`\\n   \\tjwt.RegisteredClaims\\n   }\\n\\n   func main() {\\n   \\t// \u5efa\u8bae\u4ece\u73af\u5883\u53d8\u91cf\u4e2d\u8bfb\u53d6\u5bc6\u94a5\\n   \\tvar SECRET_KEY = []byte(\\"your_super_secret_key\\")\\n\\n   \\t// \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\u5b9e\u4f8b\\n   \\tclaims := UserClaims{\\n   \\t\\tUserID:   \\"12345\\",\\n   \\t\\tUsername: \\"john.doe\\",\\n   \\t\\tRegisteredClaims: jwt.RegisteredClaims{\\n   \\t\\t\\tExpiresAt: jwt.NewNumericDate(time.Now().Add(time.Hour * 1)), // \u4ee4\u724c\u8fc7\u671f\u65f6\u95f4\u4e3a 1 \u5c0f\u65f6\\n   \\t\\t\\tIssuedAt:  jwt.NewNumericDate(time.Now()),                    // \u4ee4\u724c\u7b7e\u53d1\u65f6\u95f4\\n   \\t\\t\\tIssuer:    \\"your-app-name\\",                                   // \u7b7e\u53d1\u8005\\n   \\t\\t},\\n   \\t}\\n\\n   \\t// \u4f7f\u7528 HS256 \u7b97\u6cd5\u521b\u5efa\u4ee4\u724c\\n   \\ttoken := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)\\n\\n   \\t// \u4f7f\u7528\u5bc6\u94a5\u8fdb\u884c\u7b7e\u540d\\n   \\tsignedToken, err := token.SignedString(SECRET_KEY)\\n   \\tif err != nil {\\n   \\t\\tfmt.Println(\\"Error signing token:\\", err)\\n   \\t\\treturn\\n   \\t}\\n\\n   \\tfmt.Println(\\"Generated token:\\", signedToken)\\n   }\\n   ```\\n\\n3. **\u9a8c\u8bc1\u4ee4\u724c**\\n\\n   ```go\\n   package main\\n\\n   import (\\n   \\t\\"fmt\\"\\n   \\t\\"github.com/golang-jwt/jwt/v5\\"\\n   )\\n\\n   // \u5b9a\u4e49\u4e00\u4e2a\u4e0e\u751f\u6210\u4ee4\u724c\u65f6\u76f8\u540c\u7684\u81ea\u5b9a\u4e49\u58f0\u660e\u7ed3\u6784\u4f53\\n   type UserClaims struct {\\n   \\tUserID   string `json:\\"user_id\\"`\\n   \\tUsername string `json:\\"username\\"`\\n   \\tjwt.RegisteredClaims\\n   }\\n\\n   func main() {\\n   \\tvar SECRET_KEY = []byte(\\"your_super_secret_key\\")\\n\\n   \\t// \u5047\u8bbe\u8fd9\u662f\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u7684\u4ee4\u724c\\n   \\ttokenFromClient := \\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMTIzNDUiLCJ1c2VybmFtZSI6ImpvaG4uZG9lIiwiZXhwIjoxNzMxNDk0NTcwLCJpYXQiOjE2ODc2NzQwMDAsImlzcyI6InlvdXItYXBwLW5hbWUifQ.H6S-qg4-L-y_s-F6D8b-n6k-g9d-x_6o_m_LgX6o_Xw\\"\\n\\n   \\ttoken, err := jwt.ParseWithClaims(tokenFromClient, &UserClaims{}, func(token *jwt.Token) (interface{}, error) {\\n   \\t\\t// \u9a8c\u8bc1\u7b7e\u540d\u7b97\u6cd5\u662f\u5426\u4e3a HS256\\n   \\t\\tif _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok {\\n   \\t\\t\\treturn nil, fmt.Errorf(\\"unexpected signing method: %v\\", token.Header[\\"alg\\"])\\n   \\t\\t}\\n   \\t\\treturn SECRET_KEY, nil\\n   \\t})\\n\\n   \\t// \u68c0\u67e5\u89e3\u6790\u8fc7\u7a0b\u4e2d\u662f\u5426\u51fa\u9519\\n   \\tif err != nil {\\n   \\t\\tfmt.Println(\\"Token verification failed:\\", err)\\n   \\t\\treturn\\n   \\t}\\n\\n   \\t// \u5982\u679c\u4ee4\u724c\u6709\u6548\uff0c\u83b7\u53d6\u58f0\u660e\u4fe1\u606f\\n   \\tif claims, ok := token.Claims.(*UserClaims); ok && token.Valid {\\n   \\t\\tfmt.Println(\\"Token is valid. Decoded payload:\\")\\n   \\t\\tfmt.Printf(\\"User ID: %s, Username: %s\\\\n\\", claims.UserID, claims.Username)\\n   \\t} else {\\n   \\t\\tfmt.Println(\\"Token is invalid.\\")\\n   \\t}\\n   }\\n   ```"},{"id":"go \u57fa\u7840","metadata":{"permalink":"/blog/go \u57fa\u7840","source":"@site/blog/2024-03-26-go \u57fa\u7840.md","title":"Go \u57fa\u7840","description":"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b","date":"2024-03-26T00:00:00.000Z","formattedDate":"2024\u5e743\u670826\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"}],"readingTime":12.825,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"go \u57fa\u7840","title":"Go \u57fa\u7840","authors":"gugulh","tags":["Go"]},"prevItem":{"title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898"},"nextItem":{"title":"Go mod\u4f9d\u8d56\u7ba1\u7406","permalink":"/blog/go mod\u4f9d\u8d56\u7ba1\u7406"}},"content":"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b\\n\\n## 1. \u5305\u76f8\u5173\u77e5\u8bc6\\n\\n- package aaa aaa \u53ef\u4ee5\u548c\u76ee\u5f55\u5305\u540d\u4e0d\u4e00\u81f4\\n- go \u901a\u8fc7\u9996\u5b57\u6bcd\u5927\u5c0f\u5199\u63a7\u5236\u8bbf\u95ee\u6743\u9650,\u5927\u5199\u516c\u5171,\u5c0f\u5199\u79c1\u6709\\n- func init() {} \u5728 func main() {} \u4e4b\u524d\u6267\u884c\\n- \u53ea\u5f15\u7528\u5305,\u4f7f\u7528\\\\_,\u5728\u5f15\u5165\u5305\u65f6\u4e5f\u4f1a\u6267\u884c\u5176\u4e2d\u7684 init \u65b9\u6cd5\\n\\n```go\\nimport (\\n\\t_ \\"basic/package2\\"\\n)\\n```\\n\\n- A \u5f15\u7528 B \u5305,B \u5f15\u7528 C \u5305\\n\\n```mermaid\\nflowchart LR\\n    subgraph C\u5305\\n        C_Init[C\u521d\u59cb\u5316 init]\\n    end\\n    subgraph B\u5305\\n        B_Init[B\u521d\u59cb\u5316 init]\\n    end\\n    subgraph A\u5305\\n        A_Init[A\u521d\u59cb\u5316 init] --\x3e A_Main[A\u6267\u884c main]\\n    end\\n\\n    %% \u5305\u4f9d\u8d56\u4e0e\u6267\u884c\u987a\u5e8f\\n    C_Init --\x3e B_Init --\x3e A_Init\\n```\\n\\n```\\nA\u5f15\u7528B\u5305,B\u5f15\u7528C\u5305\\n1.C\u5305init\u6700\u5148\u6267\u884c\\n2.init\u603b\u662f\u5148\u4e8emain\\n```\\n\\n## 2. iota \u7528\u6cd5\\n\\n- iota \u88ab\u7528\u5728\u5e38\u91cf\u7684\u8d4b\u503c\u4e2d,\u5728\u6bcf\u4e00\u4e2a const \u5173\u952e\u5b57\u51fa\u73b0\u65f6\uff0c\u88ab\u91cd\u7f6e\u4e3a 0\uff0c\u7136\u540e\u6bcf\u51fa\u73b0\u4e00\u4e2a\u5e38\u91cf\uff0ciota \u6240\u4ee3\u8868\u7684\u6570\u503c\u4f1a\u81ea\u52a8\u589e\u52a0 1\\n- iota \u5e38\u7528\u4f5c\u679a\u4e3e\u503c\\n\\n```go\\nconst (\\n\\tB = 1 << (10 * iota)\\n\\tKB\\n\\tMB\\n\\tGB\\n\\tTB\\n)\\n```\\n\\n## 3. \u7c7b\u578b\u8f6c\u6362\\n\\n```go\\n// \u540c\u4e00\u7c7b\u578b\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u6570\u5b57, \u5b57\u7b26\u4e32\u548c\u5b57\u7b26\u548c\u5b57\u8282\\n// \u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u5b57\u7b26\u4e32\\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5176\u4ed6\u7c7b\u578b\\n\\n// \u6570\u5b57\u7c7b\u578b\u7684\u8f6c\u6362\\nvar num1 int = 100\\nfmt.Println(int64(num1))\\nvar num2 int64 = 100\\nfmt.Println(int(num2))\\n\\n// \u5b57\u7b26\u4e32\u4e0e\u6570\u5b57\\nvar num3 int = 100\\nfmt.Println(strconv.Itoa(num3) + \\"abc\\")\\nvar str1 = \\"100\\"\\nfmt.Println(strconv.Atoi(str1))\\n\\nvar num4 int64 = 1010\\nfmt.Println(strconv.FormatInt(num4, 10))\\n\\nvar str2 = \\"1010\\"\\nfmt.Println(strconv.ParseInt(str2, 10, 64))\\n\\n// \u5b57\u7b26\u4e32\u4e0e[]byte \u8f6c\u6362\\nvar str3 = \\"\u4eca\u5929\u5929\u6c14\u771f\u597d\\"\\nbytes1 := []byte(str3)\\nfmt.Println(bytes1)\\nfmt.Println(string(bytes1))\\n\\n// \u5b57\u7b26\u4e32\u4e0erune\u8f6c\u6362\\n// rune \u4e3aint32\u7c7b\u578b\\n// \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3arune\u5207\u7247,\u5b9e\u9645\u4e0arune\u5207\u7247\u4e2d\u5b58\u50a8\u5b57\u7b26\u4e32Unicode\u7801\u70b9\\nvar rune1 = []rune(str3)\\nfmt.Println(rune1)\\nfmt.Println(string(rune1))\\nfmt.Println(string(rune1[3]))\\nfmt.Println([]int32(str3))\\n\\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5177\u4f53\u7c7b\u578b\\nvar inf interface{} = 100\\nvar infStruct interface{} = user{}\\ni, err := inf.(int)\\nfmt.Println(i, err)\\nu, err := infStruct.(user)\\nfmt.Println(u, err)\\n\\n// \u65f6\u95f4\u7c7b\u578b\u8f6c\u5b57\u7b26\u4e32\\nvar t time.Time\\nt = time.Now()\\ntimeStr := t.Format(\\"2006-01-02 15:04:05Z07:00\\")\\nfmt.Println(timeStr)\\n// \u5b57\u7b26\u4e32\u8f6c\u65f6\u95f4\\nt2, _ := time.Parse(\\"2006-01-02 15:04:05Z07:00\\", timeStr)\\nfmt.Println(t2)\\n\\n// uintptr\\nu1 := user{}\\n// unsafe.Pointer\u662f\u4e00\u4e2a\u901a\u7528\u7684\u6307\u9488\u7c7b\u578b,\u4e0d\u80fd\u7528\u4e8e\u8ba1\u7b97\\nuPtr := unsafe.Pointer(&u1)\\nnamePtr := unsafe.Pointer(uintptr(uPtr) + unsafe.Offsetof(u1.Name))\\n*(*string)(namePtr) = \\"nick\\"\\nfmt.Println(u1)\\n```\\n\\n## 4. go \u4e2d switch \u8bed\u53e5\\n\\n- case \u540e\u65e0\u9700\u5199 break\\n- \u5982\u679c\u5e0c\u671b\u4e0d\u8981\u8df3\u8fc7\u4e0b\u4e00\u4e2a case,\u4f7f\u7528 fallthrough\\n\\n```go\\nswitch alpha {\\ncase \\"A\\":\\n\\tfmt.Println(\\"\u6267\u884c A \u8bed\u53e5\u5757\\")\\ncase \\"B\\":\\n\\tfmt.Println(\\"\u6267\u884c B \u8bed\u53e5\u5757\\")\\ncase \\"C\\", \\"D\\":\\n\\tfmt.Println(\\"\u6267\u884c CD \u8bed\u53e5\u5757\\")\\n\\tfallthrough\\ncase \\"E\\":\\n\\tfmt.Println(\\"\u6267\u884c E \u8bed\u53e5\u5757\\")\\ncase \\"F\\":\\n\\tfmt.Println(\\"\u6267\u884c F \u8bed\u53e5\u5757\\")\\n}\\n\\nswitch in.(type) {\\ncase string:\\n\\tfmt.Println(\\"\u8f93\u5165\u4e3a\u5b57\u7b26\u4e32\\")\\ncase int:\\n\\tfmt.Println(\\"\u8f93\u5165\u4e3aint\u7c7b\u578b\\")\\ndefault:\\n\\tfmt.Println(\\"Unknown\\")\\n}\\n```\\n\\n## 5. break label \u548c goto label\\n\\n- break label \u5fc5\u987b\u653e\u5728\u5faa\u73af\u8bed\u53e5 for \u524d\u9762\uff0c\u5e76\u4e14\u5728 break label \u8df3\u51fa\u5faa\u73af\u4e0d\u518d\u6267\u884c for \u5faa\u73af\u91cc\u7684\u4ee3\u7801\\n- goto label \u548c C \u8bed\u8a00\u4e2d\u7528\u6cd5\u4e00\u81f4\\n\\n```go\\nlabel:\\n\\tfor i := 0; i < 2; i++ {\\n\\t\\tfor j := 0; j < 2; j++ {\\n\\t\\t\\tfmt.Printf(\\"\u6267\u884c for \u8bed\u53e5\u5757, i: %d, j: %d\\\\n\\", i, j)\\n\\t\\t\\tbreak label\\n\\t\\t}\\n\\t}\\n```\\n\\n## 6. \u6cdb\u578b\u7f16\u7a0b\\n\\n- \u533f\u540d\u7ed3\u6784\u4f53\u4e0e\u533f\u540d\u51fd\u6570\u4e0d\u652f\u6301\u6cdb\u578b\\n- \u4e0d\u652f\u6301\u7c7b\u578b\u65ad\u8a00\\n- \u4e0d\u652f\u6301\u6cdb\u578b\u65b9\u6cd5,\u53ea\u80fd\u901a\u8fc7 receiver \u6765\u5b9e\u73b0\u65b9\u6cd5\u7684\u6cdb\u578b\u5904\u7406\\n- ~\u540e\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a\u57fa\u672c\u7c7b\u578b,\u4e0d\u80fd\u4e3a\u6cdb\u578b\u63a5\u53e3\\n\\n### 6.1 \u57fa\u672c\u4f7f\u7528\\n\\n```go\\ntype CusNumT interface {\\n\\t// \u652f\u6301 uint8\u3001int32\u3001float64\u4e0eint64\u53ca\u5176\u884d\u751f\u7c7b\u578b\\n\\t// ~ \u8868\u793a\u652f\u6301\u7c7b\u578b\u7684\u884d\u751f\u7c7b\u578b\\n\\t// | \u8868\u793a\u53d6\u5e76\u96c6\\n\\t// \u591a\u884c\u4e4b\u95f4\u53d6\u4ea4\u96c6\\n\\tuint8 | int32 | float64 | ~int64\\n\\tint32 | float64 | ~int64 | uint16\\n}\\n\\n// getMaxCusNum\u4e3a\u6cdb\u578b\u51fd\u6570, T \u4e3a\u6cdb\u578b\u7c7b\u578b\\nfunc getMaxCusNum[T CusNumT](a, b T) T {\\n\\tif a > b {\\n\\t\\treturn a\\n\\t}\\n\\treturn b\\n}\\n```\\n\\n### 6.2 \u6cdb\u578b\u63a5\u53e3,\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b receiver\\n\\n```go\\n// \u6cdb\u578b\u63a5\u53e3\\ntype GetKey[T comparable] interface {\\n\\tany\\n\\tGet() T\\n}\\n\\n// \u6cdb\u578b\u7ed3\u6784\u4f53\\ntype MyStruct[T interface{ *int | *string }] struct {\\n\\tName string\\n\\tData T\\n}\\n\\n// \u6cdb\u578b receiver\\nfunc (myStruct MyStruct[T]) GetData() T {\\n\\treturn myStruct.Data\\n}\\n```\\n\\n### 6.3 \u6cdb\u578b\u7684\u5229\u5f0a\\n\\n- \u63d0\u9ad8\u4e86\u4ee3\u7801\u590d\u7528\u7387\uff0c\u63d0\u9ad8\u4e86\u7f16\u7a0b\u6548\u7387\\n- \u4e0d\u540c\u7c7b\u578b\u95f4\u4ee3\u7801\u590d\u7528\uff0c\u4f7f\u5f97\u4ee3\u7801\u98ce\u683c\u66f4\u52a0\u4f18\u96c5\\n- \u589e\u52a0\u4e86\u7f16\u8bd1\u5668\u7684\u8d1f\u62c5\uff0c\u964d\u4f4e\u4e86\u7f16\u8bd1\u6548\u7387\\n\\n## 7. golang \u5e38\u7528\u6807\u51c6\u5e93\\n\\n### 7.1 \u7f16\u89e3\u7801\\n\\n```go\\n//\u5e8f\u5217\u5316\\nbytes, err := json.Marshal(u)\\nfmt.Println(bytes, err)\\nu1 := user{}\\n//\u53cd\u5e8f\u5217\u5316\\nerr = json.Unmarshal(bytes, &u1)\\nfmt.Println(u1, err)\\n\\n//base64\u7f16\u89e3\u7801\\nstr := base64.StdEncoding.EncodeToString(bytes)\\nfmt.Println(str)\\nbytes1, err := base64.StdEncoding.DecodeString(str)\\nfmt.Println(bytes1, err)\\n\\n//16\u8fdb\u5236\u7f16\u89e3\u7801\\nstr1 := hex.EncodeToString(bytes1)\\nfmt.Println(str1)\\nbytes2, err := hex.DecodeString(str1)\\nfmt.Println(bytes2, err)\\n```\\n\\n### 7.2 \u683c\u5f0f\u5316\u8f93\u51fa\\n\\n```go\\nfunc FmtCase() {\\n\\t// \u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\\n\\tfmt.Println(\\"\u4eca\u5929\u5929\u6c14\u5f88\u597d\\")\\n\\t//\u683c\u5f0f\u5316\uff0c\u5e76\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\\n\\tfmt.Printf(\\"%s\u5929\u6c14\u5f88\u597d\\\\n\\", \\"\u4eca\u5929\\")\\n\\t//\u683c\u5f0f\u5316\\n\\tstr := fmt.Sprintf(\\"%s\u5929\u6c14\u5f88\u597d\\", \\"\u4eca\u5929\u3001\u660e\u5929\\")\\n\\t// \u8f93\u51fa\u5230io.writer\\n\\tfmt.Fprint(os.Stderr, str)\\n\\tfmt.Println()\\n}\\n\\nfunc FmtCase1() {\\n\\ttype simple struct {\\n\\t\\tvalue int\\n\\t}\\n\\ta := simple{\\n\\t\\tvalue: 10,\\n\\t}\\n\\t// \u901a\u7528\u5360\u4f4d\u7b26\\n\\tfmt.Printf(\\"\u9ed8\u8ba4\u683c\u5f0f\u7684\u503c\uff1a%v \\\\n\\", a)\\n\\tfmt.Printf(\\"\u5305\u542b\u5b57\u6bb5\u540d\u7684\u503c\uff1a%+v \\\\n\\", a)\\n\\tfmt.Printf(\\"go\u8bed\u6cd5\u8868\u793a\u7684\u503c\uff1a%#v \\\\n\\", a)\\n\\tfmt.Printf(\\"go\u8bed\u6cd5\u8868\u793a\u7684\u7c7b\u578b\uff1a%T \\\\n\\", a)\\n\\tfmt.Printf(\\"\u8f93\u51fa\u5b57\u9762\u4e0a\u7684\u767e\u5206\u53f7\uff1a %%10 \\\\n\\")\\n\\n\\t// \u6574\u6570\u5360\u4f4d\u7b26\\n\\tv1 := 10\\n\\tv2 := 20170 //\\"\u4eca\\" \u5b57\u7801\u70b9\u503c\\n\\tfmt.Printf(\\"\u4e8c\u8fdb\u5236\uff1a%b \\\\n\\", v1)\\n\\tfmt.Printf(\\"Unicode \u7801\u70b9\u8f6c\u5b57\u7b26\uff1a%c \\\\n\\", v2)\\n\\tfmt.Printf(\\"\u5341\u8fdb\u5236\uff1a%d \\\\n\\", v1)\\n\\tfmt.Printf(\\"\u516b\u8fdb\u5236\uff1a%o \\\\n\\", v1)\\n\\tfmt.Printf(\\"0o\u4e3a\u524d\u7f00\u7684\u516b\u8fdb\u5236\uff1a%O \\\\n\\", v1)\\n\\tfmt.Printf(\\"\u7528\u5355\u5f15\u53f7\u5c06\u5b57\u7b26\u7684\u503c\u62b1\u8d77\u6765\uff1a%q \\\\n\\", v2)\\n\\tfmt.Printf(\\"\u5341\u516d\u8fdb\u5236\uff1a%x \\\\n\\", v1)\\n\\tfmt.Printf(\\"\u5341\u516d\u8fdb\u5236\u5927\u5199\uff1a%X \\\\n\\", v1)\\n\\tfmt.Printf(\\"Unicode\u683c\u5f0f\uff1a%U \\\\n\\", v2)\\n\\n\\t// \u5bbd\u5ea6\u8bbe\u7f6e\\n\\tfmt.Printf(\\"%v \u7684\u4e8c\u8fdb\u5236\uff1a%b; go\u8bed\u6cd5\u8868\u793a\u4e8c\u8fdb\u5236\u4e3a\uff1a%#b; \u6307\u5b9a\u4e8c\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%08b \\\\n\\", v1, v1, v1, v1)\\n\\tfmt.Printf(\\"%v \u7684\u5341\u516d\u8fdb\u5236\uff1a%x; \u4f7f\u7528go\u8bed\u6cd5\u8868\u793a,\u6307\u5b9a\u5341\u516d\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%#08x \\\\n\\", v1, v1, v1)\\n\\tfmt.Printf(\\"%v \u7684\u5b57\u7b26\u4e3a\uff1a%c; \u6307\u5b9a\u5bbd\u5ea6\u4e3a5\u4f4d\uff0c\u4e0d\u8db35\u4f4d\u8865\u7a7a\u683c\uff1a%5c \\\\n\\", v2, v2, v2)\\n\\n\\t// \u6d6e\u70b9\u6570\u5360\u4f4d\u7b26\\n\\tvar f1 = 123.789\\n\\tvar f2 = 12345678910.78999\\n\\tfmt.Printf(\\"\u6307\u6570\u4e3a\u4e8c\u7684\u5e42\u7684\u65e0\u5c0f\u6570\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %b \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %e \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u5927\u5199\uff1a %E \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u6709\u5c0f\u6570\u70b9\u800c\u65e0\u6307\u6570\uff0c\u5373\u5e38\u89c4\u7684\u6d6e\u70b9\u6570\u683c\u5f0f\u3002\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u7cbe\u5ea6\uff1a %f \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u9ed8\u8ba4\uff1a %9f \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u9ed8\u8ba4\u5bbd\u5ea6\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %.2f \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %09.2f \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u75590\u4f4d\u5c0f\u6570\uff1a %9.f \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%e \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %g %g \\\\n\\", f1, f2)\\n\\tfmt.Printf(\\"\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%E \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %G %G \\\\n\\", f1, f2)\\n\\tfmt.Printf(\\"\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff1a%x \\\\n\\", f1)\\n\\tfmt.Printf(\\"\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff0c\u5927\u5199\uff1a%X \\\\n\\", f1)\\n\\n\\t// \u5b57\u7b26\u4e32\u5360\u4f4d\u7b26\\n\\tvar str = \\"\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50\\"\\n\\tfmt.Printf(\\"\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%s \\\\n\\", str)\\n\\t//\u7528\u53cc\u5f15\u53f7\u5c06\u5b57\u7b26\u4e32\u5305\u88f9\\n\\tfmt.Printf(\\"\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%q \\\\n\\", str)\\n\\t// 16\u8fdb\u5236\u8868\u793a\\n\\tfmt.Printf(\\"%x \\\\n\\", str)\\n\\t// \u4ee5\u7a7a\u683c\u4f5c\u4e3a\u4e24\u6570\u4e4b\u95f4\u7684\u5206\u9694\u7b26\uff0c\u5e76\u7528\u5927\u519916\u8fdb\u5236\\n\\tfmt.Printf(\\"% X \\\\n\\", str)\\n\\n\\t// \u6307\u9488\u5360\u4f4d\u7b26\\n\\tvar str1 = \\"\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50\\"\\n\\tbytes := []byte(str1)\\n\\t//\u5207\u7247\u7b2c0\u4e2a\u5143\u7d20\u7684\u5730\u5740\\n\\tfmt.Printf(\\"%p \\\\n\\", bytes)\\n\\tmp := make(map[string]int, 0)\\n\\tfmt.Printf(\\"%p \\\\n\\", mp)\\n\\tvar p *map[string]int = new(map[string]int)\\n\\tfmt.Printf(\\"%p \\\\n\\", p)\\n}\\n```\\n\\n### 7.3 log\\n\\n```go\\nfunc init() {\\n\\t// \u8bbe\u7f6elog\u8f93\u51fa\\n\\tlog.SetFlags(log.Llongfile) // \u5728\u65e5\u5fd7\u6d88\u606f\u4e2d\u6dfb\u52a0\u7a0b\u5e8f\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u4f5c\u4e3a\u524d\u7f00\u7684\u6e90\u4ee3\u7801\\n\\tlog.SetOutput(os.Stderr) // \u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\\n}\\n\\nfunc LogCase() {\\n\\tvar a, b = -1, -2\\n\\t_, err := sum(a, b)\\n\\tif err != nil {\\n\\t\\tlog.Println(err)\\n\\t}\\n\\tlog.Printf(\\"a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\\\n\\", a, b, err.Error())\\n\\t// fatal \u65e5\u5fd7\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u7684\u9000\u51fa\\n\\t//log.Fatalf(\\"a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\\\n\\", a, b, err.Error())\\n}\\n```\\n\\n### 7.4 math\\n\\n```go\\nfmt.Println(\\"2\u768410\u6b21\u65b9\uff1a\\", math.Pow(2, 10))\\nfmt.Println(\\"\u8fd4\u56de\u4ee52\u4e3a\u5e95\uff0c1024\u7684\u5bf9\u6570\uff1a\\", math.Log2(1024))\\nfmt.Println(\\"\u8fd4\u56de\u4e24\u6570\u4e2d\u8f83\u5927\u7684\u503c\uff1a\\", math.Max(2, 10))\\nfmt.Println(\\"\u5411\u4e0a\u53d6\u6574\uff1a\\", math.Ceil(2.49))\\nfmt.Println(\\"\u5411\u4e0b\u53d6\u6574\uff1a\\", math.Floor(2.89))\\nfmt.Println(\\"90\u89d2\u7684\u6b63\u5f26\u503c\uff1a\\", math.Sin(math.Pi/2))\\nfmt.Println(\\"1 \u53cd\u6b63\u5f26\u503c\uff1a\\", math.Asin(1))\\n```\\n\\n### 7.5 \u6b63\u5219\u8868\u8fbe\u5f0f\\n\\n```go\\n//\u6784\u5efa\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5bf9\u8c61\\nreg := regexp.MustCompile(`^[a-z]+\\\\[[0-9]+\\\\]$`)\\n//\u5224\u65ad\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u662f\u5426\u7b26\u5408\u6b63\u5219\\nfmt.Println(reg.MatchString(\\"abcd[1234]\\"))\\n//\u4ece\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684\u5b57\u7b26\u4e32\\nbytes := reg.FindAll([]byte(\\"efg[456]\\"), -1)\\nfmt.Println(string(bytes[0]))\\n```\\n\\n### 7.6 Sort \u6392\u5e8f\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\"fmt\\"\\n\\t\\"sort\\"\\n)\\n\\ntype sortUser struct {\\n\\tID   int64\\n\\tName string\\n\\tAge  uint8\\n}\\ntype ByID []sortUser\\n\\n// \u83b7\u53d6\u957f\u5ea6\\nfunc (a ByID) Len() int {\\n\\treturn len(a)\\n}\\n\\n// \u4ea4\u6362\u4f4d\u7f6e\\nfunc (a ByID) Swap(i, j int) {\\n\\ta[i], a[j] = a[j], a[i]\\n}\\n\\n// \u8fd4\u56dei\u4f4d\u7f6e\u7684ID\u662f\u5426\u5c0f\u4e8ej\u4f4d\u7f6e\u7684ID\\nfunc (a ByID) Less(i, j int) bool {\\n\\treturn a[i].ID < a[j].ID\\n}\\n\\nfunc SortCase() {\\n\\tlist := []sortUser{\\n\\t\\t{ID: 10, Name: \\"nick\\", Age: 18},\\n\\t\\t{ID: 11, Name: \\"nick\\", Age: 19},\\n\\t\\t{ID: 1, Name: \\"nick\\", Age: 17},\\n\\t\\t{ID: 12, Name: \\"nick\\", Age: 7},\\n\\t\\t{ID: 9, Name: \\"nick\\", Age: 27},\\n\\t\\t{ID: 13, Name: \\"nick\\", Age: 15},\\n\\t\\t{ID: 7, Name: \\"nick\\", Age: 30},\\n\\t\\t{ID: 14, Name: \\"nick\\", Age: 22},\\n\\t}\\n\\n\\tsort.Slice(list, func(i, j int) bool {\\n\\t\\treturn list[i].Age < list[j].Age\\n\\t})\\n\\tfmt.Println(list)\\n\\n\\t//\u5b9e\u73b0sort.Interface\u63a5\u53e3\\n\\tsort.Sort(ByID(list))\\n\\tfmt.Println(list)\\n}\\n\\n```\\n\\n### 7.7 \u53cd\u5c04\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\"errors\\"\\n\\t\\"fmt\\"\\n\\t\\"reflect\\"\\n)\\n\\nfunc ReflectCase() {\\n\\n\\ttype user struct {\\n\\t\\tID    int64\\n\\t\\tName  string\\n\\t\\tHobby []string\\n\\t}\\n\\ttype outUser struct {\\n\\t\\tID    int64\\n\\t\\tName  string\\n\\t\\tHobby []string\\n\\t}\\n\\n\\tu := user{ID: 1, Name: \\"GuguLH\\", Hobby: []string{\\"\u7bee\u7403\\", \\"\u7fbd\u6bdb\u7403\\"}}\\n\\tout := outUser{}\\n\\n\\tres := copy(&out, u)\\n\\tfmt.Println(res, out)\\n\\n\\tlistUser := []user{\\n\\t\\t{ID: 1, Name: \\"A\\", Hobby: []string{\\"\u7bee\u7403\\", \\"\u7fbd\u6bdb\u7403\\"}},\\n\\t\\t{ID: 2, Name: \\"B\\", Hobby: []string{\\"\u7bee\u74031\\", \\"\u7fbd\u6bdb\u7403\\"}},\\n\\t\\t{ID: 3, Name: \\"C\\", Hobby: []string{\\"\u7bee\u74032\\", \\"\u7fbd\u6bdb\u7403\\"}},\\n\\t}\\n\\tlist := sliceColumn(listUser, \\"Hobby\\")\\n\\tfmt.Println(list)\\n}\\n\\nfunc copy(dest interface{}, source interface{}) error {\\n\\tsType := reflect.TypeOf(source)\\n\\tsValue := reflect.ValueOf(source)\\n\\t// \u5982\u679c\u4e3a\u6307\u9488\u7c7b\u578b\uff0c\u5219\u83b7\u53d6\u5176\u503c\\n\\tif sType.Kind() == reflect.Ptr {\\n\\t\\tsType = sType.Elem()\\n\\t\\tsValue = sValue.Elem()\\n\\t}\\n\\tdType := reflect.TypeOf(dest)\\n\\tdValue := reflect.ValueOf(dest)\\n\\tif dType.Kind() != reflect.Ptr {\\n\\t\\treturn errors.New(\\"\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6307\u9488\u7c7b\u578b\\")\\n\\t}\\n\\tdType = dType.Elem()\\n\\tdValue = dValue.Elem()\\n\\tif sValue.Kind() != reflect.Struct {\\n\\t\\treturn errors.New(\\"\u6e90\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6216struct\u7684\u6307\u9488\\")\\n\\t}\\n\\tif dValue.Kind() != reflect.Struct {\\n\\t\\treturn errors.New(\\"\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u7684\u6307\u9488\\")\\n\\t}\\n\\tdestObj := reflect.New(dType)\\n\\tfor i := 0; i < dType.NumField(); i++ {\\n\\t\\tdestField := dType.Field(i)\\n\\t\\tif sourceField, ok := sType.FieldByName(destField.Name); ok {\\n\\t\\t\\tif destField.Type != sourceField.Type {\\n\\t\\t\\t\\tcontinue\\n\\t\\t\\t}\\n\\t\\t\\tvalue := sValue.FieldByName(destField.Name)\\n\\t\\t\\tdestObj.Elem().FieldByName(destField.Name).Set(value)\\n\\t\\t}\\n\\t}\\n\\tdValue.Set(destObj.Elem())\\n\\treturn nil\\n}\\n\\nfunc sliceColumn(slice interface{}, column string) interface{} {\\n\\tt := reflect.TypeOf(slice)\\n\\tv := reflect.ValueOf(slice)\\n\\tif t.Kind() == reflect.Ptr {\\n\\t\\tt = t.Elem()\\n\\t\\tv = v.Elem()\\n\\t}\\n\\tif v.Kind() == reflect.Struct {\\n\\t\\tval := v.FieldByName(column)\\n\\t\\treturn val.Interface()\\n\\t}\\n\\tif v.Kind() != reflect.Slice {\\n\\t\\treturn nil\\n\\t}\\n\\tt = t.Elem()\\n\\tif t.Kind() == reflect.Ptr {\\n\\t\\tt = t.Elem()\\n\\t}\\n\\tf, _ := t.FieldByName(column)\\n\\tsliceType := reflect.SliceOf(f.Type)\\n\\ts := reflect.MakeSlice(sliceType, 0, 0)\\n\\tfor i := 0; i < v.Len(); i++ {\\n\\t\\to := v.Index(i)\\n\\t\\tif o.Kind() == reflect.Struct {\\n\\t\\t\\tval := o.FieldByName(column)\\n\\t\\t\\ts = reflect.Append(s, val)\\n\\t\\t}\\n\\t\\tif o.Kind() == reflect.Ptr {\\n\\t\\t\\tv1 := o.Elem()\\n\\t\\t\\tval := v1.FieldByName(column)\\n\\t\\t\\ts = reflect.Append(s, val)\\n\\t\\t}\\n\\t}\\n\\treturn s.Interface()\\n}\\n```"},{"id":"go mod\u4f9d\u8d56\u7ba1\u7406","metadata":{"permalink":"/blog/go mod\u4f9d\u8d56\u7ba1\u7406","source":"@site/blog/2024-03-21-go mod\u4f9d\u8d56\u7ba1.md","title":"Go mod\u4f9d\u8d56\u7ba1\u7406","description":"1. go.mod\u6587\u4ef6","date":"2024-03-21T00:00:00.000Z","formattedDate":"2024\u5e743\u670821\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"}],"readingTime":2.415,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"go mod\u4f9d\u8d56\u7ba1\u7406","title":"Go mod\u4f9d\u8d56\u7ba1\u7406","authors":"gugulh","tags":["Go"]},"prevItem":{"title":"Go \u57fa\u7840","permalink":"/blog/go \u57fa\u7840"}},"content":"## 1. go.mod\u6587\u4ef6\\n\\n```go\\n// \u6a21\u5757\u540d\\nmodule go-mod\\n\\n// sdk \u7248\u672c\\ngo 1.24\\n\\n// \u5f53\u524dmodule(\u9879\u76ee)\u4f9d\u8d56\u7684\u5305\\nrequire (\\n\\t//dependency latest\\n)\\n\\n// \u6392\u9664\u7b2c\u4e09\u65b9\u5305\\nexclude (\\n\\t//dependency latest\\n) \\n\\n// \u4fee\u6539\u4f9d\u8d56\u5305\u7684\u8def\u5f84\u6216\u8005\u7248\u672c\\n// 1 \u4f9d\u8d56\u5305\u53d1\u751f\u8fc1\u79fb\\n// 2 \u539f\u59cb\u5305\u65e0\u6cd5\u8bbf\u95ee\\n// 3 \u4f7f\u7528\u672c\u5730\u5305\u66ff\u6362\u539f\u59cb\u5305\\nreplace (\\n\\t//source latest => target latest\\n)\\n\\n// \u64a4\u56de\\nretract (\\n    // \u5f53\u524d\u9879\u76ee\u4f5c\u4e3a\u5176\u4ed6\u9879\u76ee\u7684\u4f9d\u8d56,\u5982\u679c\u67d0\u4e2a\u7248\u672c\u51fa\u73b0\u4e86\u95ee\u9898\u5219\u64a4\u56de\u8be5\u7248\u672c\\n\\t//v1.0.0\\n)\\n```\\n\\n## 2. go mod\u76f8\u5173\u547d\u4ee4\\n\\n```go\\n# \u5c06\u6a21\u5757\u4e0b\u8f7d\u5230\u672c\u5730\u7f13\u5b58,\u9700\u8981\u6307\u5b9a\u6a21\u5757\u8def\u5f84\u53ca\u7248\u672c\u53f7\\ngo mod download github.com/gin-gonic/gin@v1.9.0\\n\\n# \u521d\u59cb\u5316\u4e00\u4e2a\u65b0\u7684\u6a21\u5757\u5230\u5f53\u524d\u76ee\u5f55(\u901a\u5e38\u4f7f\u7528github\u7b49\u4e3a\u57df\u540d)\\ngo mod init github.com/gugulh/basic-go\\n\\n# \u6dfb\u52a0\u7f3a\u5c11\u7684\u4f9d\u8d56,\u5220\u9664\u672a\u4f7f\u7528\u7684\u4f9d\u8d56\\ngo mod tidy\\n\\n# \u901a\u8fc7\u5de5\u5177\u6216\u811a\u672c\u7f16\u8f91go.mod(\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u8fdb\u884c\u7f16\u8f91)\\ngo mod edit -require=\\"github.com/gin-gonic/gin@v1.9.0\\"\\n\\n# \u6839\u636ego.mod\u4e2d\u7684\u4f9d\u8d56\u9879\u5236\u4f5cvendor\u526f\u672c\\n# \u6709\u4e86vendor\u526f\u672c,\u9879\u76ee\u5c06\u4e0d\u518d\u4f9d\u8d56\u672c\u5730\u7f13\u5b58\\ngo mod vendor\\n\\n# \u9a8c\u8bc1\u4f9d\u8d56\u662f\u5426\u6b63\u786e\\ngo mod verify\\n\\n# \u8fd4\u56de\u5bf9\u6307\u5b9a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\u6700\u77ed\u8def\u5f84,\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4f9d\u8d56\u6307\u5b9a\u5305\\ngo mod why github.com/go-playground/validator/v10\\n```\\n\\n## 3. go install/get/clean\\n\\n```go\\n# go install \u5b89\u88c5\u53ef\u6267\u884c\u63d2\u4ef6\\ngo install github.com/google/gops@latest\\n\\n# go get \u83b7\u53d6\u6a21\u5757\u4fe1\u606f\u5e76\u66f4\u65b0go.mod\u6587\u4ef6\\n# \u82e5\u672c\u5730\u7f13\u5b58\u6ca1\u6709\u8be5\u6a21\u5757,\u5219\u4e0b\u8f7d\u6a21\u5757;\u6709\u5219\u76f4\u63a5\u5f15\u7528\\ngo get github.com/gin-gonic/gin@v1.9.0\\n\\n# go get -u \u66f4\u65b0\u6a21\u5757\u4f9d\u8d56,\u5e76\u66f4\u65b0go.mod\\ngo get -u github.com/gin-gonic/gin@v1.9.0\\n\\n# go clean \u6e05\u7406\u4e34\u65f6\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\\ngo clean -modcache\\n```\\n\\n## 4. go install \u548c go get\u7684\u533a\u522b\\n\\n\u4e8c\u8005\u90fd\u7528\u4e8e\u4ece\u8fdc\u7a0b\u4ed3\u5e93\uff08\u5982GitHub\uff09\u4e0b\u8f7d\u5305\u3002go get\u4fa7\u91cd\u4e8e\u83b7\u53d6\u548c\u66f4\u65b0\u5305\u53ca\u5176\u4f9d\u8d56\uff0c\u5e76\u66f4\u65b0go.mod\u6587\u4ef6\u3002go install\u5219\u4e13\u6ce8\u4e8e\u7f16\u8bd1\u548c\u5b89\u88c5\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800c\u4e0d\u4f1a\u66f4\u65b0go.mod\u6587\u4ef6\u3002"}]}')}}]);