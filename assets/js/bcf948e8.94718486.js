"use strict";(self.webpackChunkgugulh_blog=self.webpackChunkgugulh_blog||[]).push([[346],{5680:(n,e,t)=>{t.d(e,{xA:()=>s,yg:()=>p});var r=t(6540);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function u(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},l=Object.keys(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var f=r.createContext({}),o=function(n){var e=r.useContext(f),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},s=function(n){var e=o(n.components);return r.createElement(f.Provider,{value:e},n.children)},m="mdxType",g={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},c=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,l=n.originalType,f=n.parentName,s=u(n,["components","mdxType","originalType","parentName"]),m=o(t),c=a,p=m["".concat(f,".").concat(c)]||m[c]||g[c]||l;return t?r.createElement(p,i(i({ref:e},s),{},{components:t})):r.createElement(p,i({ref:e},s))}));function p(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var l=t.length,i=new Array(l);i[0]=c;var u={};for(var f in e)hasOwnProperty.call(e,f)&&(u[f]=e[f]);u.originalType=n,u[m]="string"==typeof n?n:a,i[1]=u;for(var o=2;o<l;o++)i[o]=t[o];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},6743:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>f,contentTitle:()=>i,default:()=>g,frontMatter:()=>l,metadata:()=>u,toc:()=>o});var r=t(8168),a=(t(6540),t(5680));const l={slug:"go \u57fa\u7840",title:"Go \u57fa\u7840",authors:"gugulh",tags:["Go"]},i=void 0,u={permalink:"/blog/go \u57fa\u7840",source:"@site/blog/2024-03-26-go \u57fa\u7840.md",title:"Go \u57fa\u7840",description:"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b",date:"2024-03-26T00:00:00.000Z",formattedDate:"2024\u5e743\u670826\u65e5",tags:[{label:"Go",permalink:"/blog/tags/go"}],readingTime:12.825,hasTruncateMarker:!1,authors:[{name:"GuguLH",title:"Back-end engineers",url:"https://github.com/gugulh",key:"gugulh"}],frontMatter:{slug:"go \u57fa\u7840",title:"Go \u57fa\u7840",authors:"gugulh",tags:["Go"]},prevItem:{title:"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898",permalink:"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898"},nextItem:{title:"Go mod\u4f9d\u8d56\u7ba1\u7406",permalink:"/blog/go mod\u4f9d\u8d56\u7ba1\u7406"}},f={authorsImageUrls:[void 0]},o=[{value:"1. \u5305\u76f8\u5173\u77e5\u8bc6",id:"1-\u5305\u76f8\u5173\u77e5\u8bc6",level:2},{value:"2. iota \u7528\u6cd5",id:"2-iota-\u7528\u6cd5",level:2},{value:"3. \u7c7b\u578b\u8f6c\u6362",id:"3-\u7c7b\u578b\u8f6c\u6362",level:2},{value:"4. go \u4e2d switch \u8bed\u53e5",id:"4-go-\u4e2d-switch-\u8bed\u53e5",level:2},{value:"5. break label \u548c goto label",id:"5-break-label-\u548c-goto-label",level:2},{value:"6. \u6cdb\u578b\u7f16\u7a0b",id:"6-\u6cdb\u578b\u7f16\u7a0b",level:2},{value:"6.1 \u57fa\u672c\u4f7f\u7528",id:"61-\u57fa\u672c\u4f7f\u7528",level:3},{value:"6.2 \u6cdb\u578b\u63a5\u53e3,\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b receiver",id:"62-\u6cdb\u578b\u63a5\u53e3\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b-receiver",level:3},{value:"6.3 \u6cdb\u578b\u7684\u5229\u5f0a",id:"63-\u6cdb\u578b\u7684\u5229\u5f0a",level:3},{value:"7. golang \u5e38\u7528\u6807\u51c6\u5e93",id:"7-golang-\u5e38\u7528\u6807\u51c6\u5e93",level:2},{value:"7.1 \u7f16\u89e3\u7801",id:"71-\u7f16\u89e3\u7801",level:3},{value:"7.2 \u683c\u5f0f\u5316\u8f93\u51fa",id:"72-\u683c\u5f0f\u5316\u8f93\u51fa",level:3},{value:"7.3 log",id:"73-log",level:3},{value:"7.4 math",id:"74-math",level:3},{value:"7.5 \u6b63\u5219\u8868\u8fbe\u5f0f",id:"75-\u6b63\u5219\u8868\u8fbe\u5f0f",level:3},{value:"7.6 Sort \u6392\u5e8f",id:"76-sort-\u6392\u5e8f",level:3},{value:"7.7 \u53cd\u5c04",id:"77-\u53cd\u5c04",level:3}],s={toc:o},m="wrapper";function g({components:n,...e}){return(0,a.yg)(m,(0,r.A)({},s,e,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b"),(0,a.yg)("h2",{id:"1-\u5305\u76f8\u5173\u77e5\u8bc6"},"1. \u5305\u76f8\u5173\u77e5\u8bc6"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"package aaa aaa \u53ef\u4ee5\u548c\u76ee\u5f55\u5305\u540d\u4e0d\u4e00\u81f4"),(0,a.yg)("li",{parentName:"ul"},"go \u901a\u8fc7\u9996\u5b57\u6bcd\u5927\u5c0f\u5199\u63a7\u5236\u8bbf\u95ee\u6743\u9650,\u5927\u5199\u516c\u5171,\u5c0f\u5199\u79c1\u6709"),(0,a.yg)("li",{parentName:"ul"},"func init() {} \u5728 func main() {} \u4e4b\u524d\u6267\u884c"),(0,a.yg)("li",{parentName:"ul"},"\u53ea\u5f15\u7528\u5305,\u4f7f\u7528","_",",\u5728\u5f15\u5165\u5305\u65f6\u4e5f\u4f1a\u6267\u884c\u5176\u4e2d\u7684 init \u65b9\u6cd5")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'import (\n    _ "basic/package2"\n)\n')),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"A \u5f15\u7528 B \u5305,B \u5f15\u7528 C \u5305")),(0,a.yg)("mermaid",{value:"flowchart LR\n    subgraph C\u5305\n        C_Init[C\u521d\u59cb\u5316 init]\n    end\n    subgraph B\u5305\n        B_Init[B\u521d\u59cb\u5316 init]\n    end\n    subgraph A\u5305\n        A_Init[A\u521d\u59cb\u5316 init] --\x3e A_Main[A\u6267\u884c main]\n    end\n\n    %% \u5305\u4f9d\u8d56\u4e0e\u6267\u884c\u987a\u5e8f\n    C_Init --\x3e B_Init --\x3e A_Init"}),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"A\u5f15\u7528B\u5305,B\u5f15\u7528C\u5305\n1.C\u5305init\u6700\u5148\u6267\u884c\n2.init\u603b\u662f\u5148\u4e8emain\n")),(0,a.yg)("h2",{id:"2-iota-\u7528\u6cd5"},"2. iota \u7528\u6cd5"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"iota \u88ab\u7528\u5728\u5e38\u91cf\u7684\u8d4b\u503c\u4e2d,\u5728\u6bcf\u4e00\u4e2a const \u5173\u952e\u5b57\u51fa\u73b0\u65f6\uff0c\u88ab\u91cd\u7f6e\u4e3a 0\uff0c\u7136\u540e\u6bcf\u51fa\u73b0\u4e00\u4e2a\u5e38\u91cf\uff0ciota \u6240\u4ee3\u8868\u7684\u6570\u503c\u4f1a\u81ea\u52a8\u589e\u52a0 1"),(0,a.yg)("li",{parentName:"ul"},"iota \u5e38\u7528\u4f5c\u679a\u4e3e\u503c")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},"const (\n    B = 1 << (10 * iota)\n    KB\n    MB\n    GB\n    TB\n)\n")),(0,a.yg)("h2",{id:"3-\u7c7b\u578b\u8f6c\u6362"},"3. \u7c7b\u578b\u8f6c\u6362"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'// \u540c\u4e00\u7c7b\u578b\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u6570\u5b57, \u5b57\u7b26\u4e32\u548c\u5b57\u7b26\u548c\u5b57\u8282\n// \u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u5b57\u7b26\u4e32\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5176\u4ed6\u7c7b\u578b\n\n// \u6570\u5b57\u7c7b\u578b\u7684\u8f6c\u6362\nvar num1 int = 100\nfmt.Println(int64(num1))\nvar num2 int64 = 100\nfmt.Println(int(num2))\n\n// \u5b57\u7b26\u4e32\u4e0e\u6570\u5b57\nvar num3 int = 100\nfmt.Println(strconv.Itoa(num3) + "abc")\nvar str1 = "100"\nfmt.Println(strconv.Atoi(str1))\n\nvar num4 int64 = 1010\nfmt.Println(strconv.FormatInt(num4, 10))\n\nvar str2 = "1010"\nfmt.Println(strconv.ParseInt(str2, 10, 64))\n\n// \u5b57\u7b26\u4e32\u4e0e[]byte \u8f6c\u6362\nvar str3 = "\u4eca\u5929\u5929\u6c14\u771f\u597d"\nbytes1 := []byte(str3)\nfmt.Println(bytes1)\nfmt.Println(string(bytes1))\n\n// \u5b57\u7b26\u4e32\u4e0erune\u8f6c\u6362\n// rune \u4e3aint32\u7c7b\u578b\n// \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3arune\u5207\u7247,\u5b9e\u9645\u4e0arune\u5207\u7247\u4e2d\u5b58\u50a8\u5b57\u7b26\u4e32Unicode\u7801\u70b9\nvar rune1 = []rune(str3)\nfmt.Println(rune1)\nfmt.Println(string(rune1))\nfmt.Println(string(rune1[3]))\nfmt.Println([]int32(str3))\n\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5177\u4f53\u7c7b\u578b\nvar inf interface{} = 100\nvar infStruct interface{} = user{}\ni, err := inf.(int)\nfmt.Println(i, err)\nu, err := infStruct.(user)\nfmt.Println(u, err)\n\n// \u65f6\u95f4\u7c7b\u578b\u8f6c\u5b57\u7b26\u4e32\nvar t time.Time\nt = time.Now()\ntimeStr := t.Format("2006-01-02 15:04:05Z07:00")\nfmt.Println(timeStr)\n// \u5b57\u7b26\u4e32\u8f6c\u65f6\u95f4\nt2, _ := time.Parse("2006-01-02 15:04:05Z07:00", timeStr)\nfmt.Println(t2)\n\n// uintptr\nu1 := user{}\n// unsafe.Pointer\u662f\u4e00\u4e2a\u901a\u7528\u7684\u6307\u9488\u7c7b\u578b,\u4e0d\u80fd\u7528\u4e8e\u8ba1\u7b97\nuPtr := unsafe.Pointer(&u1)\nnamePtr := unsafe.Pointer(uintptr(uPtr) + unsafe.Offsetof(u1.Name))\n*(*string)(namePtr) = "nick"\nfmt.Println(u1)\n')),(0,a.yg)("h2",{id:"4-go-\u4e2d-switch-\u8bed\u53e5"},"4. go \u4e2d switch \u8bed\u53e5"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"case \u540e\u65e0\u9700\u5199 break"),(0,a.yg)("li",{parentName:"ul"},"\u5982\u679c\u5e0c\u671b\u4e0d\u8981\u8df3\u8fc7\u4e0b\u4e00\u4e2a case,\u4f7f\u7528 fallthrough")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'switch alpha {\ncase "A":\n    fmt.Println("\u6267\u884c A \u8bed\u53e5\u5757")\ncase "B":\n    fmt.Println("\u6267\u884c B \u8bed\u53e5\u5757")\ncase "C", "D":\n    fmt.Println("\u6267\u884c CD \u8bed\u53e5\u5757")\n    fallthrough\ncase "E":\n    fmt.Println("\u6267\u884c E \u8bed\u53e5\u5757")\ncase "F":\n    fmt.Println("\u6267\u884c F \u8bed\u53e5\u5757")\n}\n\nswitch in.(type) {\ncase string:\n    fmt.Println("\u8f93\u5165\u4e3a\u5b57\u7b26\u4e32")\ncase int:\n    fmt.Println("\u8f93\u5165\u4e3aint\u7c7b\u578b")\ndefault:\n    fmt.Println("Unknown")\n}\n')),(0,a.yg)("h2",{id:"5-break-label-\u548c-goto-label"},"5. break label \u548c goto label"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"break label \u5fc5\u987b\u653e\u5728\u5faa\u73af\u8bed\u53e5 for \u524d\u9762\uff0c\u5e76\u4e14\u5728 break label \u8df3\u51fa\u5faa\u73af\u4e0d\u518d\u6267\u884c for \u5faa\u73af\u91cc\u7684\u4ee3\u7801"),(0,a.yg)("li",{parentName:"ul"},"goto label \u548c C \u8bed\u8a00\u4e2d\u7528\u6cd5\u4e00\u81f4")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'label:\n    for i := 0; i < 2; i++ {\n        for j := 0; j < 2; j++ {\n            fmt.Printf("\u6267\u884c for \u8bed\u53e5\u5757, i: %d, j: %d\\n", i, j)\n            break label\n        }\n    }\n')),(0,a.yg)("h2",{id:"6-\u6cdb\u578b\u7f16\u7a0b"},"6. \u6cdb\u578b\u7f16\u7a0b"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"\u533f\u540d\u7ed3\u6784\u4f53\u4e0e\u533f\u540d\u51fd\u6570\u4e0d\u652f\u6301\u6cdb\u578b"),(0,a.yg)("li",{parentName:"ul"},"\u4e0d\u652f\u6301\u7c7b\u578b\u65ad\u8a00"),(0,a.yg)("li",{parentName:"ul"},"\u4e0d\u652f\u6301\u6cdb\u578b\u65b9\u6cd5,\u53ea\u80fd\u901a\u8fc7 receiver \u6765\u5b9e\u73b0\u65b9\u6cd5\u7684\u6cdb\u578b\u5904\u7406"),(0,a.yg)("li",{parentName:"ul"},"~\u540e\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a\u57fa\u672c\u7c7b\u578b,\u4e0d\u80fd\u4e3a\u6cdb\u578b\u63a5\u53e3")),(0,a.yg)("h3",{id:"61-\u57fa\u672c\u4f7f\u7528"},"6.1 \u57fa\u672c\u4f7f\u7528"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},"type CusNumT interface {\n    // \u652f\u6301 uint8\u3001int32\u3001float64\u4e0eint64\u53ca\u5176\u884d\u751f\u7c7b\u578b\n    // ~ \u8868\u793a\u652f\u6301\u7c7b\u578b\u7684\u884d\u751f\u7c7b\u578b\n    // | \u8868\u793a\u53d6\u5e76\u96c6\n    // \u591a\u884c\u4e4b\u95f4\u53d6\u4ea4\u96c6\n    uint8 | int32 | float64 | ~int64\n    int32 | float64 | ~int64 | uint16\n}\n\n// getMaxCusNum\u4e3a\u6cdb\u578b\u51fd\u6570, T \u4e3a\u6cdb\u578b\u7c7b\u578b\nfunc getMaxCusNum[T CusNumT](a, b T) T {\n    if a > b {\n        return a\n    }\n    return b\n}\n")),(0,a.yg)("h3",{id:"62-\u6cdb\u578b\u63a5\u53e3\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b-receiver"},"6.2 \u6cdb\u578b\u63a5\u53e3,\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b receiver"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},"// \u6cdb\u578b\u63a5\u53e3\ntype GetKey[T comparable] interface {\n    any\n    Get() T\n}\n\n// \u6cdb\u578b\u7ed3\u6784\u4f53\ntype MyStruct[T interface{ *int | *string }] struct {\n    Name string\n    Data T\n}\n\n// \u6cdb\u578b receiver\nfunc (myStruct MyStruct[T]) GetData() T {\n    return myStruct.Data\n}\n")),(0,a.yg)("h3",{id:"63-\u6cdb\u578b\u7684\u5229\u5f0a"},"6.3 \u6cdb\u578b\u7684\u5229\u5f0a"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"\u63d0\u9ad8\u4e86\u4ee3\u7801\u590d\u7528\u7387\uff0c\u63d0\u9ad8\u4e86\u7f16\u7a0b\u6548\u7387"),(0,a.yg)("li",{parentName:"ul"},"\u4e0d\u540c\u7c7b\u578b\u95f4\u4ee3\u7801\u590d\u7528\uff0c\u4f7f\u5f97\u4ee3\u7801\u98ce\u683c\u66f4\u52a0\u4f18\u96c5"),(0,a.yg)("li",{parentName:"ul"},"\u589e\u52a0\u4e86\u7f16\u8bd1\u5668\u7684\u8d1f\u62c5\uff0c\u964d\u4f4e\u4e86\u7f16\u8bd1\u6548\u7387")),(0,a.yg)("h2",{id:"7-golang-\u5e38\u7528\u6807\u51c6\u5e93"},"7. golang \u5e38\u7528\u6807\u51c6\u5e93"),(0,a.yg)("h3",{id:"71-\u7f16\u89e3\u7801"},"7.1 \u7f16\u89e3\u7801"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},"//\u5e8f\u5217\u5316\nbytes, err := json.Marshal(u)\nfmt.Println(bytes, err)\nu1 := user{}\n//\u53cd\u5e8f\u5217\u5316\nerr = json.Unmarshal(bytes, &u1)\nfmt.Println(u1, err)\n\n//base64\u7f16\u89e3\u7801\nstr := base64.StdEncoding.EncodeToString(bytes)\nfmt.Println(str)\nbytes1, err := base64.StdEncoding.DecodeString(str)\nfmt.Println(bytes1, err)\n\n//16\u8fdb\u5236\u7f16\u89e3\u7801\nstr1 := hex.EncodeToString(bytes1)\nfmt.Println(str1)\nbytes2, err := hex.DecodeString(str1)\nfmt.Println(bytes2, err)\n")),(0,a.yg)("h3",{id:"72-\u683c\u5f0f\u5316\u8f93\u51fa"},"7.2 \u683c\u5f0f\u5316\u8f93\u51fa"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'func FmtCase() {\n    // \u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\n    fmt.Println("\u4eca\u5929\u5929\u6c14\u5f88\u597d")\n    //\u683c\u5f0f\u5316\uff0c\u5e76\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\n    fmt.Printf("%s\u5929\u6c14\u5f88\u597d\\n", "\u4eca\u5929")\n    //\u683c\u5f0f\u5316\n    str := fmt.Sprintf("%s\u5929\u6c14\u5f88\u597d", "\u4eca\u5929\u3001\u660e\u5929")\n    // \u8f93\u51fa\u5230io.writer\n    fmt.Fprint(os.Stderr, str)\n    fmt.Println()\n}\n\nfunc FmtCase1() {\n    type simple struct {\n        value int\n    }\n    a := simple{\n        value: 10,\n    }\n    // \u901a\u7528\u5360\u4f4d\u7b26\n    fmt.Printf("\u9ed8\u8ba4\u683c\u5f0f\u7684\u503c\uff1a%v \\n", a)\n    fmt.Printf("\u5305\u542b\u5b57\u6bb5\u540d\u7684\u503c\uff1a%+v \\n", a)\n    fmt.Printf("go\u8bed\u6cd5\u8868\u793a\u7684\u503c\uff1a%#v \\n", a)\n    fmt.Printf("go\u8bed\u6cd5\u8868\u793a\u7684\u7c7b\u578b\uff1a%T \\n", a)\n    fmt.Printf("\u8f93\u51fa\u5b57\u9762\u4e0a\u7684\u767e\u5206\u53f7\uff1a %%10 \\n")\n\n    // \u6574\u6570\u5360\u4f4d\u7b26\n    v1 := 10\n    v2 := 20170 //"\u4eca" \u5b57\u7801\u70b9\u503c\n    fmt.Printf("\u4e8c\u8fdb\u5236\uff1a%b \\n", v1)\n    fmt.Printf("Unicode \u7801\u70b9\u8f6c\u5b57\u7b26\uff1a%c \\n", v2)\n    fmt.Printf("\u5341\u8fdb\u5236\uff1a%d \\n", v1)\n    fmt.Printf("\u516b\u8fdb\u5236\uff1a%o \\n", v1)\n    fmt.Printf("0o\u4e3a\u524d\u7f00\u7684\u516b\u8fdb\u5236\uff1a%O \\n", v1)\n    fmt.Printf("\u7528\u5355\u5f15\u53f7\u5c06\u5b57\u7b26\u7684\u503c\u62b1\u8d77\u6765\uff1a%q \\n", v2)\n    fmt.Printf("\u5341\u516d\u8fdb\u5236\uff1a%x \\n", v1)\n    fmt.Printf("\u5341\u516d\u8fdb\u5236\u5927\u5199\uff1a%X \\n", v1)\n    fmt.Printf("Unicode\u683c\u5f0f\uff1a%U \\n", v2)\n\n    // \u5bbd\u5ea6\u8bbe\u7f6e\n    fmt.Printf("%v \u7684\u4e8c\u8fdb\u5236\uff1a%b; go\u8bed\u6cd5\u8868\u793a\u4e8c\u8fdb\u5236\u4e3a\uff1a%#b; \u6307\u5b9a\u4e8c\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%08b \\n", v1, v1, v1, v1)\n    fmt.Printf("%v \u7684\u5341\u516d\u8fdb\u5236\uff1a%x; \u4f7f\u7528go\u8bed\u6cd5\u8868\u793a,\u6307\u5b9a\u5341\u516d\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%#08x \\n", v1, v1, v1)\n    fmt.Printf("%v \u7684\u5b57\u7b26\u4e3a\uff1a%c; \u6307\u5b9a\u5bbd\u5ea6\u4e3a5\u4f4d\uff0c\u4e0d\u8db35\u4f4d\u8865\u7a7a\u683c\uff1a%5c \\n", v2, v2, v2)\n\n    // \u6d6e\u70b9\u6570\u5360\u4f4d\u7b26\n    var f1 = 123.789\n    var f2 = 12345678910.78999\n    fmt.Printf("\u6307\u6570\u4e3a\u4e8c\u7684\u5e42\u7684\u65e0\u5c0f\u6570\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %b \\n", f1)\n    fmt.Printf("\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %e \\n", f1)\n    fmt.Printf("\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u5927\u5199\uff1a %E \\n", f1)\n    fmt.Printf("\u6709\u5c0f\u6570\u70b9\u800c\u65e0\u6307\u6570\uff0c\u5373\u5e38\u89c4\u7684\u6d6e\u70b9\u6570\u683c\u5f0f\u3002\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u7cbe\u5ea6\uff1a %f \\n", f1)\n    fmt.Printf("\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u9ed8\u8ba4\uff1a %9f \\n", f1)\n    fmt.Printf("\u9ed8\u8ba4\u5bbd\u5ea6\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %.2f \\n", f1)\n    fmt.Printf("\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %09.2f \\n", f1)\n    fmt.Printf("\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u75590\u4f4d\u5c0f\u6570\uff1a %9.f \\n", f1)\n    fmt.Printf("\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%e \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %g %g \\n", f1, f2)\n    fmt.Printf("\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%E \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %G %G \\n", f1, f2)\n    fmt.Printf("\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff1a%x \\n", f1)\n    fmt.Printf("\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff0c\u5927\u5199\uff1a%X \\n", f1)\n\n    // \u5b57\u7b26\u4e32\u5360\u4f4d\u7b26\n    var str = "\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50"\n    fmt.Printf("\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%s \\n", str)\n    //\u7528\u53cc\u5f15\u53f7\u5c06\u5b57\u7b26\u4e32\u5305\u88f9\n    fmt.Printf("\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%q \\n", str)\n    // 16\u8fdb\u5236\u8868\u793a\n    fmt.Printf("%x \\n", str)\n    // \u4ee5\u7a7a\u683c\u4f5c\u4e3a\u4e24\u6570\u4e4b\u95f4\u7684\u5206\u9694\u7b26\uff0c\u5e76\u7528\u5927\u519916\u8fdb\u5236\n    fmt.Printf("% X \\n", str)\n\n    // \u6307\u9488\u5360\u4f4d\u7b26\n    var str1 = "\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50"\n    bytes := []byte(str1)\n    //\u5207\u7247\u7b2c0\u4e2a\u5143\u7d20\u7684\u5730\u5740\n    fmt.Printf("%p \\n", bytes)\n    mp := make(map[string]int, 0)\n    fmt.Printf("%p \\n", mp)\n    var p *map[string]int = new(map[string]int)\n    fmt.Printf("%p \\n", p)\n}\n')),(0,a.yg)("h3",{id:"73-log"},"7.3 log"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'func init() {\n    // \u8bbe\u7f6elog\u8f93\u51fa\n    log.SetFlags(log.Llongfile) // \u5728\u65e5\u5fd7\u6d88\u606f\u4e2d\u6dfb\u52a0\u7a0b\u5e8f\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u4f5c\u4e3a\u524d\u7f00\u7684\u6e90\u4ee3\u7801\n    log.SetOutput(os.Stderr) // \u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\n}\n\nfunc LogCase() {\n    var a, b = -1, -2\n    _, err := sum(a, b)\n    if err != nil {\n        log.Println(err)\n    }\n    log.Printf("a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\n", a, b, err.Error())\n    // fatal \u65e5\u5fd7\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u7684\u9000\u51fa\n    //log.Fatalf("a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\n", a, b, err.Error())\n}\n')),(0,a.yg)("h3",{id:"74-math"},"7.4 math"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'fmt.Println("2\u768410\u6b21\u65b9\uff1a", math.Pow(2, 10))\nfmt.Println("\u8fd4\u56de\u4ee52\u4e3a\u5e95\uff0c1024\u7684\u5bf9\u6570\uff1a", math.Log2(1024))\nfmt.Println("\u8fd4\u56de\u4e24\u6570\u4e2d\u8f83\u5927\u7684\u503c\uff1a", math.Max(2, 10))\nfmt.Println("\u5411\u4e0a\u53d6\u6574\uff1a", math.Ceil(2.49))\nfmt.Println("\u5411\u4e0b\u53d6\u6574\uff1a", math.Floor(2.89))\nfmt.Println("90\u89d2\u7684\u6b63\u5f26\u503c\uff1a", math.Sin(math.Pi/2))\nfmt.Println("1 \u53cd\u6b63\u5f26\u503c\uff1a", math.Asin(1))\n')),(0,a.yg)("h3",{id:"75-\u6b63\u5219\u8868\u8fbe\u5f0f"},"7.5 \u6b63\u5219\u8868\u8fbe\u5f0f"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'//\u6784\u5efa\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5bf9\u8c61\nreg := regexp.MustCompile(`^[a-z]+\\[[0-9]+\\]$`)\n//\u5224\u65ad\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u662f\u5426\u7b26\u5408\u6b63\u5219\nfmt.Println(reg.MatchString("abcd[1234]"))\n//\u4ece\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684\u5b57\u7b26\u4e32\nbytes := reg.FindAll([]byte("efg[456]"), -1)\nfmt.Println(string(bytes[0]))\n')),(0,a.yg)("h3",{id:"76-sort-\u6392\u5e8f"},"7.6 Sort \u6392\u5e8f"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "sort"\n)\n\ntype sortUser struct {\n    ID   int64\n    Name string\n    Age  uint8\n}\ntype ByID []sortUser\n\n// \u83b7\u53d6\u957f\u5ea6\nfunc (a ByID) Len() int {\n    return len(a)\n}\n\n// \u4ea4\u6362\u4f4d\u7f6e\nfunc (a ByID) Swap(i, j int) {\n    a[i], a[j] = a[j], a[i]\n}\n\n// \u8fd4\u56dei\u4f4d\u7f6e\u7684ID\u662f\u5426\u5c0f\u4e8ej\u4f4d\u7f6e\u7684ID\nfunc (a ByID) Less(i, j int) bool {\n    return a[i].ID < a[j].ID\n}\n\nfunc SortCase() {\n    list := []sortUser{\n        {ID: 10, Name: "nick", Age: 18},\n        {ID: 11, Name: "nick", Age: 19},\n        {ID: 1, Name: "nick", Age: 17},\n        {ID: 12, Name: "nick", Age: 7},\n        {ID: 9, Name: "nick", Age: 27},\n        {ID: 13, Name: "nick", Age: 15},\n        {ID: 7, Name: "nick", Age: 30},\n        {ID: 14, Name: "nick", Age: 22},\n    }\n\n    sort.Slice(list, func(i, j int) bool {\n        return list[i].Age < list[j].Age\n    })\n    fmt.Println(list)\n\n    //\u5b9e\u73b0sort.Interface\u63a5\u53e3\n    sort.Sort(ByID(list))\n    fmt.Println(list)\n}\n\n')),(0,a.yg)("h3",{id:"77-\u53cd\u5c04"},"7.7 \u53cd\u5c04"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "errors"\n    "fmt"\n    "reflect"\n)\n\nfunc ReflectCase() {\n\n    type user struct {\n        ID    int64\n        Name  string\n        Hobby []string\n    }\n    type outUser struct {\n        ID    int64\n        Name  string\n        Hobby []string\n    }\n\n    u := user{ID: 1, Name: "GuguLH", Hobby: []string{"\u7bee\u7403", "\u7fbd\u6bdb\u7403"}}\n    out := outUser{}\n\n    res := copy(&out, u)\n    fmt.Println(res, out)\n\n    listUser := []user{\n        {ID: 1, Name: "A", Hobby: []string{"\u7bee\u7403", "\u7fbd\u6bdb\u7403"}},\n        {ID: 2, Name: "B", Hobby: []string{"\u7bee\u74031", "\u7fbd\u6bdb\u7403"}},\n        {ID: 3, Name: "C", Hobby: []string{"\u7bee\u74032", "\u7fbd\u6bdb\u7403"}},\n    }\n    list := sliceColumn(listUser, "Hobby")\n    fmt.Println(list)\n}\n\nfunc copy(dest interface{}, source interface{}) error {\n    sType := reflect.TypeOf(source)\n    sValue := reflect.ValueOf(source)\n    // \u5982\u679c\u4e3a\u6307\u9488\u7c7b\u578b\uff0c\u5219\u83b7\u53d6\u5176\u503c\n    if sType.Kind() == reflect.Ptr {\n        sType = sType.Elem()\n        sValue = sValue.Elem()\n    }\n    dType := reflect.TypeOf(dest)\n    dValue := reflect.ValueOf(dest)\n    if dType.Kind() != reflect.Ptr {\n        return errors.New("\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6307\u9488\u7c7b\u578b")\n    }\n    dType = dType.Elem()\n    dValue = dValue.Elem()\n    if sValue.Kind() != reflect.Struct {\n        return errors.New("\u6e90\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6216struct\u7684\u6307\u9488")\n    }\n    if dValue.Kind() != reflect.Struct {\n        return errors.New("\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u7684\u6307\u9488")\n    }\n    destObj := reflect.New(dType)\n    for i := 0; i < dType.NumField(); i++ {\n        destField := dType.Field(i)\n        if sourceField, ok := sType.FieldByName(destField.Name); ok {\n            if destField.Type != sourceField.Type {\n                continue\n            }\n            value := sValue.FieldByName(destField.Name)\n            destObj.Elem().FieldByName(destField.Name).Set(value)\n        }\n    }\n    dValue.Set(destObj.Elem())\n    return nil\n}\n\nfunc sliceColumn(slice interface{}, column string) interface{} {\n    t := reflect.TypeOf(slice)\n    v := reflect.ValueOf(slice)\n    if t.Kind() == reflect.Ptr {\n        t = t.Elem()\n        v = v.Elem()\n    }\n    if v.Kind() == reflect.Struct {\n        val := v.FieldByName(column)\n        return val.Interface()\n    }\n    if v.Kind() != reflect.Slice {\n        return nil\n    }\n    t = t.Elem()\n    if t.Kind() == reflect.Ptr {\n        t = t.Elem()\n    }\n    f, _ := t.FieldByName(column)\n    sliceType := reflect.SliceOf(f.Type)\n    s := reflect.MakeSlice(sliceType, 0, 0)\n    for i := 0; i < v.Len(); i++ {\n        o := v.Index(i)\n        if o.Kind() == reflect.Struct {\n            val := o.FieldByName(column)\n            s = reflect.Append(s, val)\n        }\n        if o.Kind() == reflect.Ptr {\n            v1 := o.Elem()\n            val := v1.FieldByName(column)\n            s = reflect.Append(s, val)\n        }\n    }\n    return s.Interface()\n}\n')))}g.isMDXComponent=!0}}]);