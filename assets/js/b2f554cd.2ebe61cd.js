"use strict";(self.webpackChunkgugulh_blog=self.webpackChunkgugulh_blog||[]).push([[894],{6042:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"vue\u8fdb\u9636","metadata":{"permalink":"/blog/vue\u8fdb\u9636","source":"@site/blog/2025-05-30-Vue\u8fdb\u9636.md","title":"Vue\u8fdb\u9636","description":"1. \u4f7f\u7528 v-html \u5728\u6a21\u677f\u4e2d\u8f93\u51fa\u5143\u7d20\u7684 html \u4ee3\u7801","date":"2025-05-30T00:00:00.000Z","formattedDate":"2025\u5e745\u670830\u65e5","tags":[{"label":"Vue","permalink":"/blog/tags/vue"}],"readingTime":7.45,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"vue\u8fdb\u9636","title":"Vue\u8fdb\u9636","authors":"gugulh","tags":["Vue"]},"nextItem":{"title":"Spring AI\u5feb\u901f\u5165\u95e8","permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8"}},"content":"## 1. \u4f7f\u7528 v-html \u5728\u6a21\u677f\u4e2d\u8f93\u51fa\u5143\u7d20\u7684 html \u4ee3\u7801\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      content: `<p>\u8fd9\u662f\u4e00\u6bb5<span style=\\"color: hsl(0, 80%, 70%);\\">HTML</span>\u4ee3\u7801</p>`,\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    \x3c!-- \u4f1a\u8fdb\u884c\u6e32\u67d3 --\x3e\\r\\n    \x3c!-- <article v-html=\\"content\\" /> --\x3e\\r\\n    \x3c!-- \u4f1a\u539f\u6837\u8f93\u51fahtml\u4ee3\u7801 --\x3e\\r\\n    <article>{{ content }}</article>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 2. v-once:\u53ea\u6e32\u67d3\u4e00\u6b21 html \u6a21\u677f\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      list: [1, 2, 3],\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <p v-once>list \u521d\u59cb\u957f\u5ea6\uff1a {{ list.length }}</p>\\r\\n    <p>list \u65b0\u957f\u5ea6\uff1a {{ list.length }}</p>\\r\\n    <button @click=\\"list.push(list.length + 1)\\">\u6dfb\u52a0\u5143\u7d20</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 3. \u7ed9 v-bind \u548c v-on \u8bbe\u7f6e\u52a8\u6001\u53c2\u6570\\r\\n\\r\\n- \u4e5f\u53ef\u4ee5\u5199\u6210`<input type=\\"text\\" :[\'place\'+\'holer\']=\\"value\\" @[event]=\\"handleChange\\" />`,\u4f46\u6ce8\u610f\u4e0d\u8981\u6709+\u4e24\u8fb9\u4e0d\u8981\u6709\u7a7a\u683c\\r\\n- \u5982\u679c`<input type=\\"text\\" :[null]=\\"value\\" @[event]=\\"handleChange\\" />`\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      attr: \\"placeholder\\",\\r\\n      value: \\"\u8bf7\u8f93\u5165\u4e00\u4e9b\u5b57\u7b26\\",\\r\\n      event: \\"change\\",\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    handleChange() {\\r\\n      console.log(\\"input \u53d8\u5316\\");\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <input type=\\"text\\" :[attr]=\\"value\\" @[event]=\\"handleChange\\" />\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 4. v-for \u8fdb\u9636\u7528\u6cd5\u793a\u4f8b\\r\\n\\r\\n```js\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      blogPost: {\\r\\n        title: \\"GuguLH\'s Home\\",\\r\\n        author: \\"gugulh\\",\\r\\n        pubDate: \\"2022-02-22\\",\\r\\n      },\\r\\n      todos: [\\r\\n        {\\r\\n          id: 1,\\r\\n          content: \\"\u5f85\u529e1\\",\\r\\n        },\\r\\n        {\\r\\n          id: 2,\\r\\n          content: \\"\u5f85\u529e2\\",\\r\\n        },\\r\\n        {\\r\\n          id: 3,\\r\\n          content: \\"\u5f85\u529e3\\",\\r\\n        },\\r\\n      ],\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <ul>\\r\\n      \x3c!-- <li v-for=\\"value in blogPost\\">{{value}}</li> --\x3e\\r\\n      <li v-for=\\"(value, name, index) in blogPost\\">\\r\\n        {{index}}. {{name}} - {{value}}\\r\\n      </li>\\r\\n    </ul>\\r\\n    <ul>\\r\\n      <li v-for=\\"todo in todos\\" :key=\\"todo.id\\">{{ todo.content }}</li>\\r\\n    </ul>\\r\\n    <ul>\\r\\n      <li v-for=\\"n in 5\\" :key=\\"n\\">{{ n }}</li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 5. `<template/>`\u6807\u7b7e\u7528\u6cd5\\r\\n\\r\\n- `<template/>`\u6e32\u67d3\u4e00\u7ec4\u6807\u7b7e\u4f46\u4e0d\u989d\u5916\u589e\u52a0\u591a\u4f59\u5d4c\u5957\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <template v-if=\\"show\\" class=\\"content\\">\\r\\n      <h1>\u6807\u9898</h1>\\r\\n      <p>\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\r\\n    </template>\\r\\n    <button @click=\\"show = !show\\">\u5207\u6362\u663e\u793a</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 6. \u4e8b\u4ef6\u4f20\u53c2\u4e0e\u591a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\\r\\n\\r\\n- `@click=\\"handleClick(msg)\\"`\\r\\n\\r\\n- `@click=\\"handleClick(msg, $event)\\"`: `$event`\u53ef\u4ee5\u8bbf\u95ee\u5e76\u4f20\u9012\u539f\u751f\u7684 js dom \u4e8b\u4ef6\\r\\n- `@click=\\"handleClick1(), handlerClick2()\\"`:\u53ef\u4ee5\u4f20\u9012\u591a\u4e2a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570, \u7528`,`\u9694\u5f00\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      todos: [\\r\\n        {\\r\\n          id: 1,\\r\\n          content: \\"\u5f85\u529e1\\",\\r\\n        },\\r\\n        {\\r\\n          id: 2,\\r\\n          content: \\"\u5f85\u529e2\\",\\r\\n        },\\r\\n        {\\r\\n          id: 3,\\r\\n          content: \\"\u5f85\u529e3\\",\\r\\n        },\\r\\n      ],\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    handleClick(id, e) {\\r\\n      alert(id + \\", \\" + e.clientX + \\", \\" + e.clientY);\\r\\n    },\\r\\n    showContent(content) {\\r\\n      alert(content);\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <ul>\\r\\n      <li\\r\\n        v-for=\\"todo in todos\\"\\r\\n        :key=\\"todo.id\\"\\r\\n        @click=\\"handleClick(todo.id, $event), showContent(todo.content)\\"\\r\\n      >\\r\\n        {{todo.content}}\\r\\n      </li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 7. \u5e38\u7528\u4e8b\u4ef6\u76f8\u5173\u7684\u4fee\u9970\u7b26\\r\\n\\r\\n| \u4fee\u9970\u7b26  |                                               \u8bf4\u660e                                                |\\r\\n| :-----: | :-----------------------------------------------------------------------------------------------: |\\r\\n| prevent |                                           \u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6                                            |\\r\\n|  stop   |                                             \u963b\u6b62\u5192\u6ce1                                              |\\r\\n| capture | capture \u5b9e\u73b0\u6355\u83b7\u89e6\u53d1\u4e8b\u4ef6\u7684\u673a\u5236 \u5373\u662f\u7ed9\u5143\u7d20\u6dfb\u52a0\u4e00\u4e2a\u76d1\u542c\u5668,\u5f53\u5143\u7d20\u53d1\u751f\u5192\u6ce1\u65f6,\u5148\u89e6\u53d1\u5e26\u6709\u8be5\u4fee\u9970\u7b26\u7684\u5143\u7d20 |\\r\\n|  once   |                                          \u53ea\u89e6\u53d1\u4e00\u6b21\u4e8b\u4ef6                                           |\\r\\n|  self   |                                \u53ea\u6709\u70b9\u51fb\u5f53\u524d\u5143\u7d20\u672c\u8eab\u65f6\u624d\u4f1a\u89e6\u53d1\u56de\u8c03                                 |\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {};\\r\\n  },\\r\\n  methods: {\\r\\n    handleUlClick() {\\r\\n      alert(0);\\r\\n    },\\r\\n    handleLiClick() {\\r\\n      alert(1);\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <a href=\\"https://gugulh.github.io\\" @click.prevent=\\"\\">\u70b9\u51fb\u8df3\u8f6c</a>\\r\\n    \x3c!-- <ul @click=\\"handleUlClick\\">\\r\\n          <li @click=\\"handleLiClick\\">1</li>\\r\\n          <li>2</li>\\r\\n        </ul>  --\x3e\\r\\n    \x3c!-- stop--\x3e\\r\\n    <ul @click=\\"handleUlClick\\">\\r\\n      <li @click.stop=\\"handleLiClick\\">1</li>\\r\\n      <li>2</li>\\r\\n    </ul>\\r\\n    \x3c!-- capture --\x3e\\r\\n    \x3c!-- <ul @click.capture=\\"handleUlClick\\">\\r\\n          <li @click=\\"handleLiClick\\">1</li>\\r\\n          <li>2</li>\\r\\n        </ul> --\x3e\\r\\n    \x3c!-- self --\x3e\\r\\n    \x3c!-- <ul @click.self=\\"handleUlClick\\">\\r\\n          <li @click=\\"handleLiClick\\">1</li>\\r\\n          <li>2</li>\\r\\n        </ul> --\x3e\\r\\n    \x3c!-- once --\x3e\\r\\n    \x3c!-- <ul @click.once=\\"handleUlClick\\">\\r\\n          <li @click=\\"handleLiClick\\">1</li>\\r\\n          <li>2</li>\\r\\n        </ul> --\x3e\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 8. \u5e38\u89c1\u5904\u7406\u952e\u76d8,\u9f20\u6807\u4e8b\u4ef6\u7684\u4fee\u9970\u7b26\\r\\n\\r\\n- \u952e\u76d8\u4fee\u9970\u7b26: `.enter`,`.tab`,`.delete`,`.esc`,`.up`,`.down`,`.left`,`.right`\\r\\n- \u5e38\u89c1\u7ec4\u5408\u952e\u4fee\u9970\u7b26: `.ctrl`,`.alt`,`.shift`,`.meta`(Win \u662f\u5fbd\u6807\u952e,Mac \u662f Command \u952e)\\r\\n- \u9f20\u6807\u4fee\u9970\u7b26: `.left`,`.middle`,`.right`\\r\\n\\r\\n- `.exact`: \u5141\u8bb8\u7cbe\u786e\u5730\u63a7\u5236\u4fee\u9970\u7b26\u7ec4\u5408\u89e6\u53d1\u7684\u4e8b\u4ef6\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      comments: [\\"\u597d\\", \\"\u975e\u5e38\u597d\\", \\"\u8d5e\\"],\\r\\n      comment: \\"\\",\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    addComment() {\\r\\n      this.comments.push(this.comment);\\r\\n      this.comment = \\"\\";\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <ul @mousedown.right=\\"comments.reverse()\\">\\r\\n      <li v-for=\\"content in comments\\">{{ content }}</li>\\r\\n    </ul>\\r\\n    <input type=\\"text\\" v-model=\\"comment\\" @keyup.ctrl.enter.exact=\\"addComment\\" />\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 9. \u8868\u5355\u8f93\u5165\u76f8\u5173\u7684\u4fee\u9970\u7b26`.lazy` `.trim` `.number`\\r\\n\\r\\n- `.lazy`: `@input` => `@change`\\r\\n- `.number`: \u8f6c\u6362\u4e3a\u6570\u5b57\u7c7b\u578b\\r\\n- `.trim`: \u53bb\u9664\u6536\u5c3e\u7a7a\u683c\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      username: \\"\\",\\r\\n      year: 2000,\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <input type=\\"text\\" v-model.lazy.trim=\\"username\\" />\\r\\n    <p>{{ username }}</p>\\r\\n    \x3c!-- <input type=\\"text\\" v-model.number=\\"year\\" /> --\x3e\\r\\n    <input type=\\"number\\" v-model=\\"year\\" />\\r\\n    <p>{{ typeof year }}</p>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 10. \u901a\u8fc7 Vue \u5b9e\u4f8b\u8bbf\u95ee\u548c\u4fee\u6539\u5e94\u7528\u7684\u914d\u7f6e\\r\\n\\r\\n- \u5b9e\u4f8b\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee data \u5c5e\u6027\\r\\n- \u4e5f\u53ef\u4ee5\u901a\u8fc7`$data`\u8bbf\u95ee\\r\\n- \u53ef\u4ee5\u8bbf\u95ee`computed`, `methods` \u548c `watch`\\r\\n- \u9002\u5408\u4f20\u7edf\u7f51\u7ad9\u548c Vue \u76f8\u7ed3\u5408\u7684\u573a\u666f\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      msg: \\"\u4f60\u597d\uff01\\",\\r\\n      name: \\"\u5f20\u4e09\\",\\r\\n    };\\r\\n  },\\r\\n  computed: {\\r\\n    greetings() {\\r\\n      return `${this.msg} ${this.name}`;\\r\\n    },\\r\\n  },\\r\\n  methods: {\\r\\n    changeName(name) {\\r\\n      this.name = name;\\r\\n    },\\r\\n  },\\r\\n  watch: {\\r\\n    name(newName) {\\r\\n      console.log(\\"watch \u76d1\u542c\uff1a\\" + newName);\\r\\n    },\\r\\n  },\\r\\n});\\r\\nconst vm = app.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <p>{{ msg }} {{ name }}</p>\\r\\n    \x3c!-- <p>{{ greetings }}</p> --\x3e\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 11. Vue \u751f\u547d\u5468\u671f\u51fd\u6570\\r\\n\\r\\n- beforeCreate: \u8c03\u7528`app.mount()`\u521b\u5efa Vue \u5b9e\u4f8b\u4e4b\u540e, `createApp()`\u4e2d\u914d\u7f6e\u9879\u751f\u6548\u4e4b\u524d\u8c03\u7528\\r\\n- created: \u5728`beforeCreate()`\u4e4b\u540e,`createApp()`\u4e2d\u914d\u7f6e\u9879\u751f\u6548\u4e4b\u524d\u8c03\u7528,\u8fd9\u4e2a\u65f6\u5019 computed,method \u548c watch \u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\\r\\n- beforeMount: \u5728 created \u751f\u547d\u5468\u671f\u6267\u884c\u5b8c\u6210\u4e4b\u540e,\u5e94\u7528\u8fd8\u6ca1\u6709\u6302\u8f7d\u5230`app.mount()`\u6307\u5b9a\u7684 html \u5143\u7d20\u4e0a,\u5728\u6302\u8f7d\u4e4b\u524d\u4f1a\u8c03\u7528`beforeMount()`\u751f\u547d\u5468\u671f\u94a9\u5b50,\u8fd9\u4e2a\u65f6\u5019\u5e94\u7528\u8fd8\u6ca1\u5728\u9875\u9762\u4e0a\u6e32\u67d3\u51fa\u6765\\r\\n- mounted: `mounted()`\u4f1a\u5728\u5e94\u7528\u6302\u8f7d\u5230`app.mount()`\u6307\u5b9a\u7684 html \u5143\u7d20\u540e\u6267\u884c,\u8fd9\u4e2a\u65f6\u5019\u5e94\u7528\u5df2\u7ecf\u5728\u9875\u9762\u4e0a\u6e32\u67d3\u51fa\u6765\u4e86\\r\\n- beforeUpdate: \u5f53\u5e94\u7528\u4e2d html \u6a21\u677f\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u65f6,\u4f8b\u5982 data \u4e2d\u7684\u5c5e\u6027\u53d1\u751f\u4e86\u53d8\u5316,\u90a3\u4e48\u5728\u5237\u65b0\u4e4b\u524d\u4f1a\u6267\u884c`beforeUpdate()`\u751f\u547d\u5468\u671f\u94a9\u5b50\\r\\n- updated: `updated()`\u662f\u5728\u6570\u636e\u66f4\u65b0\u4e4b\u540e,html \u91cd\u65b0\u6e32\u67d3\u5b8c\u6210\u4e4b\u540e\u8c03\u7528\\r\\n- beforeUnmount: `beforeUnmount()`\u4f1a\u5728\u5e94\u7528\u5378\u8f7d\u524d\u6267\u884c,\u8c03\u7528`app.unmount()`\u4f1a\u5378\u8f7d\u7ec4\u4ef6,\u90a3\u4e48\u6b63\u5f0f\u5378\u8f7d\u524d,\u5148\u6267\u884c`beforeUnmount()`\u751f\u547d\u5468\u671f\u94a9\u5b50,\u8fd9\u4e2a\u65f6\u5019 Vue \u8fd8\u662f\u6b63\u5e38\u7684,\u53ef\u4ee5\u5728\u91cc\u9762\u505a\u4e00\u4e9b\u6e05\u7406\u6536\u5c3e\u64cd\u4f5c\\r\\n- unmounted: `unmounted()`\u751f\u547d\u5468\u671f\u4f1a\u5728\u5e94\u7528\u6b63\u5f0f\u5378\u8f7d\u4e4b\u540e\u8c03\u7528,\u8fd9\u4e2a\u65f6\u5019\u8ddf\u5e94\u7528\u6709\u5173\u7684\u4e8b\u4ef6\u76d1\u542c,\u6216\u8005\u6307\u4ee4\u7ed1\u5b9a\u90fd\u5df2\u7ecf\u5378\u8f7d\u4e86\\r\\n- \u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\\r\\n\\r\\n|                             created                             |              mounted              |\\r\\n| :-------------------------------------------------------------: | :-------------------------------: |\\r\\n| 1.\u6700\u65e9\u53ef\u4ee5\u8bbf\u95ee this<br/>2.\u53ef\u4ee5\u4fee\u6539 data \u5c5e\u6027<br/>3.\u8bf7\u6c42\u8fdc\u7a0b\u6570\u636e | DOM \u8282\u70b9\u5df2\u6302\u8f7d,\u53ef\u4ee5\u4fee\u6539\u548c\u8bbf\u95ee DOM |\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      posts: [],\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    async fetchPosts() {\\r\\n      // \u6a21\u62df\u8bf7\u6c42\u8fdc\u7a0b\u6570\u636e\\r\\n      const res = await fetch(\\"./sample.json\\");\\r\\n      const retData = await res.json();\\r\\n      this.posts = retData;\\r\\n    },\\r\\n  },\\r\\n  created() {\\r\\n    this.fetchPosts();\\r\\n  },\\r\\n});\\r\\nconst vm = app.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <ul>\\r\\n      <li v-for=\\"post in posts\\" :key=\\"post.id\\">{{ post.title }}</li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n```"},{"id":"spring ai\u5feb\u901f\u5165\u95e8","metadata":{"permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8","source":"@site/blog/2025-05-28-Spring AI\u5feb\u901f\u5165\u95e8.md","title":"Spring AI\u5feb\u901f\u5165\u95e8","description":"\u4e4b\u524d\u4e00\u76f4\u4f7f\u7528 Langchain \u5f00\u53d1\u7684\u5927\u6a21\u578b\u76f8\u5173\u5e94\u7528,\u8fd1\u671f\u56e0\u9700\u8981,\u8bd5\u4e00\u8bd5 Spring AI","date":"2025-05-28T00:00:00.000Z","formattedDate":"2025\u5e745\u670828\u65e5","tags":[{"label":"Spring AI","permalink":"/blog/tags/spring-ai"}],"readingTime":4.24,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"spring ai\u5feb\u901f\u5165\u95e8","title":"Spring AI\u5feb\u901f\u5165\u95e8","authors":"gugulh","tags":["Spring AI"]},"prevItem":{"title":"Vue\u8fdb\u9636","permalink":"/blog/vue\u8fdb\u9636"},"nextItem":{"title":"Vue\u57fa\u7840\u5165\u95e8","permalink":"/blog/vue\u57fa\u7840\u5165\u95e8"}},"content":"\u4e4b\u524d\u4e00\u76f4\u4f7f\u7528 Langchain \u5f00\u53d1\u7684\u5927\u6a21\u578b\u76f8\u5173\u5e94\u7528,\u8fd1\u671f\u56e0\u9700\u8981,\u8bd5\u4e00\u8bd5 Spring AI\\r\\n\\r\\n\u4e00\u4e9b\u5927\u6a21\u578b\u76f8\u5173\u7684\u524d\u7f6e\u77e5\u8bc6\u4e0d\u518d\u8d58\u8ff0,\u76f4\u63a5\u5b9e\u64cd\\r\\n\\r\\n## 1. \u524d\u7f6e\u8981\u6c42\\r\\n\\r\\n- JDK17+\\r\\n- \u6709\u4f7f\u7528\u7b2c\u4e09\u65b9\u5bc6\u94a5\u6216\u8005\u6709\u90e8\u7f72\u672c\u5730\u5927\u6a21\u578b(Ollma)\\r\\n\\r\\n## 2. \u521b\u5efa Spring Boot3 \u9879\u76ee\\r\\n\\r\\n```xml\\r\\n    <parent>\\r\\n        <groupId>org.springframework.boot</groupId>\\r\\n        <artifactId>spring-boot-starter-parent</artifactId>\\r\\n        <version>3.4.6</version>\\r\\n        <relativePath/>\\r\\n    </parent>\\r\\n\\r\\n    <properties>\\r\\n        <maven.compiler.source>17</maven.compiler.source>\\r\\n        <maven.compiler.target>17</maven.compiler.target>\\r\\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\\r\\n        <spring-ai.ver>1.0.0</spring-ai.ver>\\r\\n    </properties>\\r\\n\\r\\n    <dependencyManagement>\\r\\n        \x3c!-- Spring AI --\x3e\\r\\n        <dependencies>\\r\\n            <dependency>\\r\\n                <groupId>org.springframework.ai</groupId>\\r\\n                <artifactId>spring-ai-bom</artifactId>\\r\\n                <version>${spring-ai.ver}</version>\\r\\n                <type>pom</type>\\r\\n                <scope>import</scope>\\r\\n            </dependency>\\r\\n        </dependencies>\\r\\n    </dependencyManagement>\\r\\n\\r\\n    <dependencies>\\r\\n        \x3c!-- Web\u4f9d\u8d56 --\x3e\\r\\n        <dependency>\\r\\n            <groupId>org.springframework.boot</groupId>\\r\\n            <artifactId>spring-boot-starter-web</artifactId>\\r\\n        </dependency>\\r\\n        \x3c!-- MySQL\u9a71\u52a8 --\x3e\\r\\n        <dependency>\\r\\n            <groupId>com.mysql</groupId>\\r\\n            <artifactId>mysql-connector-j</artifactId>\\r\\n            <scope>runtime</scope>\\r\\n        </dependency>\\r\\n        \x3c!-- Spring AI Deepseek --\x3e\\r\\n        \x3c!-- \u53ef\u4ee5\u6362\u6210\u5176\u4ed6\u7684\u5927\u6a21\u578b\u63d0\u4f9b\u5546,\u81ea\u5df1\u53bb\u7236pom\u627e --\x3e\\r\\n        <dependency>\\r\\n            <groupId>org.springframework.ai</groupId>\\r\\n            <artifactId>spring-ai-starter-model-deepseek</artifactId>\\r\\n        </dependency>\\r\\n        \x3c!-- Lombok --\x3e\\r\\n        <dependency>\\r\\n            <groupId>org.projectlombok</groupId>\\r\\n            <artifactId>lombok</artifactId>\\r\\n        </dependency>\\r\\n\\r\\n        <dependency>\\r\\n            <groupId>org.springframework.boot</groupId>\\r\\n            <artifactId>spring-boot-starter-test</artifactId>\\r\\n        </dependency>\\r\\n    </dependencies>\\r\\n\\r\\n    <build>\\r\\n        <plugins>\\r\\n            <plugin>\\r\\n                <groupId>org.springframework.boot</groupId>\\r\\n                <artifactId>spring-boot-maven-plugin</artifactId>\\r\\n            </plugin>\\r\\n        </plugins>\\r\\n    </build>\\r\\n```\\r\\n\\r\\n## 3. application.yaml\\r\\n\\r\\n```yaml\\r\\nspring:\\r\\n  application:\\r\\n    name: spring-ai\\r\\n  ai:\\r\\n    deepseek:\\r\\n      api-key: \u4f60\u7684API Key\\r\\n      base-url: https://api.deepseek.com\\r\\n      chat:\\r\\n        options:\\r\\n          model: deepseek-chat\\r\\n          temperature: 0.2\\r\\n```\\r\\n\\r\\n## 4. \u914d\u7f6e DeepSeek \u5ba2\u6237\u7aef\\r\\n\\r\\n```java\\r\\n    /**\\r\\n     * \u914d\u7f6e\u5ba2\u6237\u7aef\\r\\n     */\\r\\n    @Bean\\r\\n    public ChatClient chatClient(DeepSeekChatModel model) {\\r\\n        String SYSTEM_PROMPT = \\"\\"\\"\\r\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\r\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\r\\n                \\"\\"\\";\\r\\n\\r\\n        return ChatClient.builder(model)\\r\\n                .defaultSystem(SYSTEM_PROMPT)\\r\\n                .build();\\r\\n    }\\r\\n```\\r\\n\\r\\n## 5. \u5b9a\u4e49 Controller,\u5b8c\u6210\u7b80\u5355\u5bf9\u8bdd\\r\\n\\r\\n- \u963b\u585e\u5f0f\u54cd\u5e94: \u7b49\u5927\u6a21\u578b\u5b8c\u5168\u8f93\u51fa\u7ed3\u679c\u540e\u8fd4\u56de\\r\\n- \u6d41\u5f0f\u54cd\u5e94: \u5927\u6a21\u578b\u4f1a\u6bcf\u6b21\u5410\u51fa\u4e00\u4e2a\u5b57, \u7c7b\u4f3c\u524d\u7aef\u6253\u5b57\u673a\u6548\u679c\\r\\n\\r\\n```java\\r\\n    @Autowired\\r\\n    private ChatClient chatClient;\\r\\n\\r\\n    /**\\r\\n     * \u963b\u585e\u5f0f\u8c03\u7528\\r\\n     */\\r\\n    @GetMapping(\\"/chat\\")\\r\\n    public String chat(@RequestParam(name = \\"prompt\\", required = true) String prompt) {\\r\\n        return chatClient.prompt()\\r\\n                .user(prompt)\\r\\n                .call() // \u963b\u585e\u5f0f\u8c03\u7528\\r\\n                .content();\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * \u4f7f\u7528WebFlux\u5b8c\u6210\u6d41\u5f0f\u54cd\u5e94,\u524d\u7aef\u7c7b\u4f3c\u6253\u5b57\u673a\u6548\u679c\\r\\n     */\\r\\n    @GetMapping(value = \\"/chat-stream\\", produces = \\"text/html;charset=utf-8\\")\\r\\n    public Flux<String> chatStream(@RequestParam(name = \\"prompt\\", required = true) String prompt) {\\r\\n        return chatClient.prompt()\\r\\n                .user(prompt)\\r\\n                .stream() // \u6d41\u5f0f\u54cd\u5e94\\r\\n                .content();\\r\\n    }\\r\\n```\\r\\n\\r\\n## 6. \u6dfb\u52a0\u65e5\u5fd7\\r\\n\\r\\n- \u63a5\u53e3\u662f Advisor, \u53ef\u4ee5\u9009\u62e9\u5b9e\u73b0\u7c7b SimpleLoggerAdvisor, \u4f1a\u5728\u63a7\u5236\u53f0\u6253\u5370\\r\\n- \u9700\u8981\u914d\u7f6e\u65e5\u5fd7\u7ea7\u522b\\r\\n\\r\\n```java\\r\\n    @Bean\\r\\n    public ChatClient chatClient(DeepSeekChatModel model) {\\r\\n        String SYSTEM_PROMPT = \\"\\"\\"\\r\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\r\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\r\\n                \\"\\"\\";\\r\\n\\r\\n        return ChatClient.builder(model)\\r\\n                .defaultSystem(SYSTEM_PROMPT)\\r\\n                .defaultAdvisors(new SimpleLoggerAdvisor()) // \u73af\u7ed5\u589e\u5f3a,\u6dfb\u52a0\u65e5\u5fd7\u6253\u5370, advisors\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\\r\\n                .build();\\r\\n    }\\r\\n```\\r\\n\\r\\n```yaml\\r\\nlogging:\\r\\n  level:\\r\\n    org.springframework.ai.chat.client.advisor: debug\\r\\n```\\r\\n\\r\\n## 7. \u6dfb\u52a0\u4f1a\u8bdd\u8bb0\u5fc6\u529f\u80fd\\r\\n\\r\\n- \u5b9e\u73b0 ChatMemory \u63a5\u53e3,\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u5b9e\u73b0 MessageWindowChatMemory(\u76ee\u524d\u6700\u65b0\u7248\u672c Spring AI \u5c31\u8fd9\u4e00\u4e2a\u5b9e\u73b0, \u57fa\u4e8e\u77ed\u671f\u6d88\u606f\u7a97\u53e3\u5b9e\u73b0, \u5982\u679c\u6d88\u606f\u5b58\u50a8\u5927\u4e8e\u4e86\u9608\u503c \u9ed8\u8ba4 20,\u5219\u4f1a\u629b\u5f03\u6700\u65e7\u7684\u6d88\u606f)\\r\\n- \u53ef\u81ea\u5b9a\u4e49\u5b9e\u73b0\\r\\n\\r\\n```java\\r\\n    /**\\r\\n     * \u914d\u7f6eChatMemory\\r\\n     */\\r\\n    @Bean\\r\\n    public ChatMemory chatMemory() {\\r\\n        return MessageWindowChatMemory.builder().build();\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * \u914d\u7f6e\u5ba2\u6237\u7aef\\r\\n     */\\r\\n    @Bean\\r\\n    public ChatClient chatClient(DeepSeekChatModel model, ChatMemory chatMemory) {\\r\\n        String SYSTEM_PROMPT = \\"\\"\\"\\r\\n                    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6570\u7801\u4ea7\u54c1\u5bfc\u8d2d\u4eba\u5458,\u4f60\u64c5\u957f\u4e8e\u624b\u673a,\u7535\u8111,\u76f8\u673a\u7b49\u6570\u7801\u4ea7\u54c1\u7684\u4ecb\u7ecd\u4e0e\u63a8\u8350.\u4f60\u7684\u540d\u5b57\u662f\\"\u5c0f\u667a\\"\\r\\n                    \u4f60\u603b\u662f\u4ee5\u6e29\u67d4,\u5e7d\u9ed8\u7684\u8bed\u6c14\u56de\u7b54\u7528\u6237\u63d0\u51fa\u7684\u95ee\u9898.\\r\\n                \\"\\"\\";\\r\\n\\r\\n        return ChatClient.builder(model)\\r\\n                .defaultSystem(SYSTEM_PROMPT)\\r\\n                .defaultAdvisors(\\r\\n                        new SimpleLoggerAdvisor(), // \u73af\u7ed5\u589e\u5f3a,\u6dfb\u52a0\u65e5\u5fd7\u6253\u5370\\r\\n                        MessageChatMemoryAdvisor.builder(chatMemory).build() // \u6dfb\u52a0\u4f1a\u8bdd\u8bb0\u5fc6\u529f\u80fd\\r\\n                )\\r\\n                .build();\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * controller\u9700\u8981\u5bf9\u6bcf\u4e00\u6b21\u7684\u4f1a\u8bddid\u8fdb\u884c\u7ef4\u62a4\\r\\n     */\\r\\n    @PostMapping(value = \\"/chat-stream\\", produces = \\"text/html;charset=utf-8\\")\\r\\n    public Flux<String> chatStream(\\r\\n            @RequestParam(name = \\"prompt\\", required = true) String prompt,\\r\\n            @RequestParam(name = \\"chatId\\", required = true) String chatId\\r\\n    ) {\\r\\n        return chatClient.prompt()\\r\\n                .user(prompt)\\r\\n                .advisors(advisorSpec -> advisorSpec.param(ChatMemory.CONVERSATION_ID, chatId)) // \u6dfb\u52a0\u4f1a\u8bddID\u5230Advisor\u4e0a\u4e0b\u6587\u4e2d\\r\\n                .stream() // \u6d41\u5f0f\u54cd\u5e94\\r\\n                .content();\\r\\n    }\\r\\n```"},{"id":"vue\u57fa\u7840\u5165\u95e8","metadata":{"permalink":"/blog/vue\u57fa\u7840\u5165\u95e8","source":"@site/blog/2025-05-26-Vue\u57fa\u7840\u5165\u95e8.md","title":"Vue\u57fa\u7840\u5165\u95e8","description":"1. \u4f7f\u7528 data \u63d0\u4f9b\u6570\u636e","date":"2025-05-26T00:00:00.000Z","formattedDate":"2025\u5e745\u670826\u65e5","tags":[{"label":"Vue","permalink":"/blog/tags/vue"}],"readingTime":10.75,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"vue\u57fa\u7840\u5165\u95e8","title":"Vue\u57fa\u7840\u5165\u95e8","authors":"gugulh","tags":["Vue"]},"prevItem":{"title":"Spring AI\u5feb\u901f\u5165\u95e8","permalink":"/blog/spring ai\u5feb\u901f\u5165\u95e8"},"nextItem":{"title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898"}},"content":"## 1. \u4f7f\u7528 data \u63d0\u4f9b\u6570\u636e\\r\\n\\r\\n- data \u5c5e\u6027\u662f\u4e00\u4e2a\u51fd\u6570\\r\\n- \u51fd\u6570\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\\r\\n- \u5728\u6a21\u677f\u4e2d\u8bbf\u95ee\u9876\u7ea7\u5c5e\u6027: `<div>{{prop}}</div>`\\r\\n- \u5d4c\u5957\u5c5e\u6027: `<div>{{prop.username}}</div>`\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      name: \\"\u5f20\u5c71\\",\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <h1>\u4f60\u597d,{{name}}!</h1>\\r\\n</div>\\r\\n```\\r\\n\\r\\n# 2. \u5728 html \u5c5e\u6027\u4e2d\u7ed1\u5b9a data \u6570\u636e: v-bind\\r\\n\\r\\n- `<a v-bind:href=\\"link\\">\u94fe\u63a5</a>`\\r\\n- `<a :href=\\"link\\">\u94fe\u63a5</a>`\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      link: \\"https://gugulh.github.io/\\",\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <a v-bind:href=\\"link\\">\u94fe\u63a5</a>\\r\\n  <a :href=\\"link\\">\u94fe\u63a5</a>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 3. \u5c55\u793a\u5217\u8868\u5185\u5bb9: v-for\\r\\n\\r\\n- \u904d\u5386\u6570\u7ec4\u7c7b\u578b\u6570\u636e\\r\\n- \u53ef\u4ee5\u8bbf\u95ee\u7d22\u5f15:`<li v-for=\\"(todo, index) in todos\\">{{index + 1}} - {{todo}}</li>`\\r\\n- \u80fd\u591f\u904d\u5386\u5bf9\u8c61\u6570\u7ec4\\r\\n- \u53ef\u4ee5\u5728\u6307\u4ee4\u4e2d\u4f7f\u7528 js \u8868\u8fbe\u5f0f\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      // todos: [\\"\u4e00\u8d77\u538b\u9a6c\u8def\\", \\"\u4e00\u8d77\u5403\u996d\\", \\"\u4e00\u8d77\u6e9cpp\\"]\\r\\n      todos: [\\r\\n        {\\r\\n          content: \\"\u4e00\u8d77\u5403\u996d\\",\\r\\n          complete: true,\\r\\n        },\\r\\n        {\\r\\n          content: \\"\u4e00\u8d77\u538b\u9a6c\u8def\\",\\r\\n          complete: true,\\r\\n        },\\r\\n        {\\r\\n          content: \\"\u4e00\u8d77\u6e9cpp\\",\\r\\n          complete: false,\\r\\n        },\\r\\n      ],\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <ul>\\r\\n    \x3c!-- <li v-for=\\"(todo, index) in todos\\">{{index + 1}} - {{todo}}</li> --\x3e\\r\\n    <li v-for=\\"(todo, index) in todos\\">\\r\\n      <input type=\\"checkbox\\" :checked=\\"todo.complete\\" />{{todo.content}}\\r\\n    </li>\\r\\n  </ul>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 4. \u6839\u636e\u6761\u4ef6\u5c55\u793a\u9875\u9762\u5185\u5bb9\\r\\n\\r\\n- v-if, v-else-if, \u548c v-else\\r\\n- \u4e0e js \u4e2d if, else...if, else \u4e00\u6837\\r\\n- \u8fd9\u4e09\u4e2a\u6807\u7b7e\u5fc5\u987b\u76f8\u90bb\u4f7f\u7528\\r\\n- v-show \u4f1a\u8bbe\u7f6e display \u5c5e\u6027\u4e3a none \u9690\u85cf\u5143\u7d20\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      // books: [\\"JavaScript \u57fa\u7840\u8bed\u6cd5\u8be6\u89e3\\", \\"Vue \u5165\u95e8\u5b9e\u6218\\", \\"React \u5165\u95e8\u5230\u7cbe\u901a\\"],\\r\\n      books: [],\\r\\n      // books: [\\"JavaScript \u57fa\u7840\u8bed\u6cd5\u8be6\u89e3\\"],\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  \x3c!-- <p v-if=\\"books.length === 0\\">\u76ee\u524d\u6ca1\u6709\u4efb\u4f55\u4e66\u7c4d</p>\\r\\n    <h2 v-else-if=\\"books.length === 1\\">{{ books[0] }}</h2>\\r\\n    <ul v-else>\\r\\n      <li v-for=\\"book in books\\">{{ book }}</li>\\r\\n    </ul> --\x3e\\r\\n  <p v-show=\\"books.length === 0\\">\u76ee\u524d\u6ca1\u6709\u4efb\u4f55\u4e66\u7c4d</p>\\r\\n  <ul v-show=\\"books.length > 0\\">\\r\\n    <li v-for=\\"book in books\\">{{ book }}</li>\\r\\n  </ul>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 5. \u4e8b\u4ef6\u4e0e\u54cd\u5e94\u5165\u95e8\\r\\n\\r\\n- v-on:\u4e8b\u4ef6\u540d \u6216 @\u4e8b\u4ef6\u540d\\r\\n- \u503c\u53ef\u4ee5\u4e3a js \u8868\u8fbe\u5f0f\u6216\u51fd\u6570\\r\\n- \u5e38\u89c1\u7684\u6ce8\u518c\u4e8b\u4ef6\\r\\n\\r\\n| HTML \u4e8b\u4ef6\u540d | Vue \u4e8b\u4ef6\u540d |\\r\\n| :---------: | :--------: |\\r\\n|   onclick   |   click    |\\r\\n|  onchange   |   change   |\\r\\n|   onblur    |    blur    |\\r\\n|   onfocus   |   focus    |\\r\\n|  onsubmit   |   submit   |\\r\\n|   onreset   |   reset    |\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      showAnswer: false,\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div class=\\"question\\">\\r\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\r\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\r\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\r\\n    </p>\\r\\n    <button @click=\\"showAnswer = !showAnswer\\">\\r\\n      {{ showAnswer ? \\"\u9690\u85cf\\" : \\"\u663e\u793a\\" }}\u7b54\u6848\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 6. computed \u8ba1\u7b97\u5c5e\u6027\\r\\n\\r\\n- \u4f7f\u7528 computed \u914d\u7f6e\u9879\u5b9a\u4e49\u8ba1\u7b97\u5c5e\u6027\\r\\n- \u6bcf\u4e2a\u8ba1\u7b97\u5c5e\u6027\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\\r\\n- \u51fd\u6570\u53ef\u4ee5\u4f7f\u7528 this \u8bbf\u95ee data \u6216\u5176\u4ed6\u914d\u7f6e\u9879\u4e2d\u7684\u503c\\r\\n- \u5728\u6a21\u677f\u4e2d\u53ef\u4ee5\u50cf data \u5c5e\u6027\u4e00\u6837\u4f7f\u7528\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      showAnswer: false,\\r\\n    };\\r\\n  },\\r\\n  computed: {\\r\\n    label() {\\r\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848\\" : \\"\u663e\u793a\u7b54\u6848\\";\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div class=\\"question\\">\\r\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\r\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\r\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\r\\n    </p>\\r\\n    <button @click=\\"showAnswer = !showAnswer\\">{{ label }}</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n\u4f18\u70b9: \u907f\u514d\u5728 html \u4e2d\u76f4\u63a5\u5199\u8ba1\u7b97\u903b\u8f91,\u53ef\u4ee5\u4ee3\u7801\u590d\u7528,\u51cf\u5c11\u5197\u4f59\u4ee3\u7801\\r\\n\\r\\n## 7. methods \u65b9\u6cd5\u5904\u7406\u4e8b\u4ef6\\r\\n\\r\\n- \u4f7f\u7528 methods \u914d\u7f6e\u9879\u5904\u7406\u4e8b\u4ef6\u6216\u590d\u7528\u903b\u8f91\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      showAnswer: false,\\r\\n    };\\r\\n  },\\r\\n  computed: {\\r\\n    label() {\\r\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848\\" : \\"\u663e\u793a\u7b54\u6848\\";\\r\\n    },\\r\\n  },\\r\\n  methods: {\\r\\n    toggleAnswer() {\\r\\n      this.showAnswer = !this.showAnswer;\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div class=\\"question\\">\\r\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\r\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\r\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\r\\n    </p>\\r\\n    <button @click=\\"toggleAnswer\\">{{ label }}</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 8. watch \u76d1\u542c\u6570\u636e\u53d8\u5316\\r\\n\\r\\n- \u4f7f\u7528 watch \u5b9a\u4e49\u76d1\u542c\u5668: watcher \u53ef\u4ee5\u662f\u5b9a\u65f6\u5668,\u8bf7\u6c42 API \u7b49\u8017\u65f6\u64cd\u4f5c\\r\\n\\r\\n```mermaid\\r\\nflowchart LR\\r\\n    A[data \u5c5e\u6027] --\x3e B[watcher \u76d1\u542c\u5668]\\r\\n    B --\x3e C[\u4fee\u6539\u5176\u5b83 data \u5c5e\u6027]\\r\\n    C --\x3e D[\u53cd\u5e94\u5230\u6a21\u677f\u4e0a]\\r\\n```\\r\\n\\r\\n- \u76d1\u542c\u5668\u540d\u5b57\u8981\u548c\u76d1\u542c\u7684\u5c5e\u6027\u540d\u4fdd\u6301\u4e00\u81f4\\r\\n- \u76d1\u542c\u5668\u63a5\u6536\u5c5e\u6027\u65e7\u503c\u548c\u65b0\u503c\u4f5c\u4e3a\u53c2\u6570\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      showAnswer: false,\\r\\n      countDown: 5,\\r\\n      timer: null,\\r\\n    };\\r\\n  },\\r\\n  computed: {\\r\\n    label() {\\r\\n      return this.showAnswer ? \\"\u9690\u85cf\u7b54\u6848 \\" + this.countDown : \\"\u663e\u793a\u7b54\u6848\\";\\r\\n    },\\r\\n  },\\r\\n  methods: {\\r\\n    toggleAnswer() {\\r\\n      this.showAnswer = !this.showAnswer;\\r\\n    },\\r\\n  },\\r\\n  watch: {\\r\\n    showAnswer(newVal, oldVal) {\\r\\n      if (newVal) {\\r\\n        this.countDown = 5;\\r\\n        if (this.timer) {\\r\\n          clearInterval(this.timer);\\r\\n          this.timer = null;\\r\\n        }\\r\\n        // 5\u79d2\u540e\u5173\u95ed\u7b54\u6848\\r\\n        this.timer = setInterval(() => {\\r\\n          this.countDown -= 1;\\r\\n          if (this.countDown === 0) {\\r\\n            this.showAnswer = false;\\r\\n            clearInterval(this.timer);\\r\\n            this.timer = null;\\r\\n          }\\r\\n        }, 1000);\\r\\n      }\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div class=\\"question\\">\\r\\n    <p>\u95ee\uff1aVue \u662f\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u6846\u67b6\uff1f</p>\\r\\n    <p v-show=\\"showAnswer\\" class=\\"answer\\">\\r\\n      \u7b54\uff1aVue \u662f\u4e00\u5957\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6e10\u8fdb\u5f0f\u6846\u67b6\u3002\\r\\n    </p>\\r\\n    <button @click=\\"toggleAnswer\\">{{ label }}</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 9. computed, methods \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\r\\n\\r\\n- computed \u548c methods \u4e4b\u95f4\u7684\u533a\u522b\\r\\n  - \u8ba1\u7b97\u5c5e\u6027\u9002\u5408\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u64cd\u4f5c,\u7ed3\u679c\u4f1a\u7f13\u5b58\\r\\n  - \u8ba1\u7b97\u5c5e\u6027\u53ef\u4ee5\u76f4\u63a5\u5728 html \u4e2d,\u50cf data \u4e2d\u7684\u5c5e\u6027\u4e00\u6837\u4f7f\u7528\\r\\n  - \u65b9\u6cd5\u9002\u5408\u505a\u590d\u6742\u7684\u64cd\u4f5c,\u901a\u5e38\u4f5c\u4e3a\u4e8b\u4ef6\u76d1\u542c\u6216\u8005\u516c\u5171\u4e1a\u52a1\u903b\u8f91\\r\\n  - \u65b9\u6cd5\u53ef\u4ee5\u5f53\u4f5c\u666e\u901a js \u51fd\u6570\u4f7f\u7528\\r\\n- computed \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\r\\n\\r\\n|               computed                |          watch          |\\r\\n| :-----------------------------------: | :---------------------: |\\r\\n|          \u7b80\u5355\u7684\u4e1a\u52a1\u903b\u8f91\u8ba1\u7b97           | \u8017\u65f6\u64cd\u4f5c\u548c\u8fdc\u7a0b API \u52a0\u8f7d |\\r\\n|      \u53ef\u4ee5\u76f4\u63a5\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528       | \u4e0d\u80fd\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528  |\\r\\n|          \u54cd\u5e94 data \u6570\u636e\u53d8\u5316           |      \u54cd\u5e94\u6570\u636e\u53d8\u5316       |\\r\\n|            \u6709\u8fd4\u56de\u503c/getter            |       \u6ca1\u6709\u8fd4\u56de\u503c        |\\r\\n| \u4e5f\u53ef\u4ee5\u4f7f\u7528 setters \u4fee\u6539 data \u4e2d\u7684\u6570\u636e | \u53ef\u4ee5\u4fee\u6539 data \u4e2d\u7684\u6570\u636e  |\\r\\n\\r\\n- methods \u548c watch \u4e4b\u95f4\u7684\u533a\u522b\\r\\n\\r\\n|          methods           |         watch          |\\r\\n| :------------------------: | :--------------------: |\\r\\n|   \u53ef\u4ee5\u5728 watch \u4e2d\u88ab\u8c03\u7528    |        \u4e0d\u80fd\u8c03\u7528        |\\r\\n| \u53ef\u4ee5\u76f4\u63a5\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528 | \u4e0d\u80fd\u5728 html \u6a21\u677f\u4e2d\u4f7f\u7528 |\\r\\n|     \u54cd\u5e94 data \u6570\u636e\u53d8\u5316     |   \u54cd\u5e94 data \u6570\u636e\u53d8\u5316   |\\r\\n|  \u53ef\u4ee5\u6709\u8fd4\u56de\u503c,\u4e5f\u53ef\u4ee5\u6ca1\u6709   |       \u6ca1\u6709\u8fd4\u56de\u503c       |\\r\\n\\r\\n- \u5e94\u7528\u573a\u666f\\r\\n  - computed \u9002\u5408\u6839\u636e data \u4e2d\u7684\u5c5e\u6027\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u8ba1\u7b97\u5e76\u8fd4\u56de\u7ed3\u679c,\u4f8b\u5982\u6570\u7ec4\u7684\u6392\u5e8f\u7b5b\u9009,\u53ea\u6709 data \u4e2d\u7684\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u65f6,\u624d\u4f1a\u91cd\u65b0\u8ba1\u7b97,\u5176\u4ed6\u60c5\u51b5\u4f1a\u7f13\u5b58\u7ed3\u679c\\r\\n  - watch \u9002\u5408\u5728 js \u4e2d\u76d1\u542c data \u7684\u53d8\u5316,\u5e76\u6839\u636e\u53d8\u5316\u505a\u4e00\u4e9b\u8017\u65f6\u7684\u64cd\u4f5c\\r\\n  - methods \u9002\u5408\u66f4\u590d\u6742\u7684\u8ba1\u7b97,\u901a\u5e38\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f7f\u7528\u6216\u8005\u662f\u62bd\u53d6\u516c\u5171\u7684\u4e1a\u52a1\u903b\u8f91,\u5f53\u4f5c\u666e\u901a\u7684 js \u51fd\u6570\\r\\n\\r\\n## 10. \u8868\u5355\u8f93\u5165\u6570\u636e\u5904\u7406\\r\\n\\r\\n- \u7ed9 input \u6dfb\u52a0@input \u4e8b\u4ef6\\r\\n- \u5728 input \u4e8b\u4ef6\u76d1\u542c\u4e2d,\u4fee\u6539 data \u5c5e\u6027\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      username: \\"\\",\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    handleInput(e) {\\r\\n      this.username = e.target.value;\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <div class=\\"input-field\\">\\r\\n      <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\r\\n      <input id=\\"username\\" type=\\"text\\" @input=\\"handleInput\\" />\\r\\n    </div>\\r\\n    <div class=\\"result\\">\\r\\n      <p>\u4f60\u8f93\u5165\u7684\u7528\u6237\u540d\u662f\uff1a{{ username }}</p>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 11. \u53cc\u5411\u7ed1\u5b9a\u548c v-model\\r\\n\\r\\n- \u53cc\u5411\u7ed1\u5b9a:\u8f93\u5165\u6846\u7684\u503c\u548c data \u7b49\u5c5e\u6027\u503c\u4e92\u76f8\u540c\u6b65\\r\\n- v-model \u7b80\u5316\u4e86@input \u548c:value \u6570\u636e\u7684\u540c\u6b65\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      username: \\"\\",\\r\\n    };\\r\\n  },\\r\\n  methods: {\\r\\n    handleInput(e) {\\r\\n      this.username = e.target.value;\\r\\n    },\\r\\n    resetUsername() {\\r\\n      this.username = \\"\\";\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <div class=\\"input-field\\">\\r\\n      <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\r\\n      <input\\r\\n        id=\\"username\\"\\r\\n        type=\\"text\\"\\r\\n        @input=\\"handleInput\\"\\r\\n        :value=\\"username\\"\\r\\n        \x3c!--\\r\\n        v-model=\\"username\\"\\r\\n        --\\r\\n      />\\r\\n      />\\r\\n      <button @click=\\"resetUsername\\">\u91cd\u7f6e</button>\\r\\n    </div>\\r\\n    <div class=\\"result\\">\\r\\n      <p>\u4f60\u8f93\u5165\u7684\u7528\u6237\u540d\u662f\uff1a{{ username }}</p>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 12. \u5176\u4ed6\u8868\u5355\u63a7\u4ef6\u4e8b\u4ef6\u5904\u7406\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      username: \\"\\",\\r\\n      gender: \\"\\",\\r\\n      interests: [],\\r\\n      occupation: \\"\\",\\r\\n      intro: \\"\\",\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div class=\\"form\\">\\r\\n    <label for=\\"username\\">\u7528\u6237\u540d\uff1a</label>\\r\\n    <input id=\\"username\\" type=\\"text\\" v-model=\\"username\\" />\\r\\n    <label for=\\"gender\\">\u6027\u522b\uff1a</label>\\r\\n    <div id=\\"gender\\" class=\\"radio-group\\">\\r\\n      <input name=\\"gender\\" type=\\"radio\\" value=\\"male\\" v-model=\\"gender\\" />\\r\\n      <span>\u7537</span>\\r\\n      <input name=\\"gender\\" type=\\"radio\\" value=\\"female\\" v-model=\\"gender\\" />\\r\\n      <span>\u5973</span>\\r\\n    </div>\\r\\n    <label for=\\"interest\\">\u5174\u8da3\uff1a</label>\\r\\n    <div id=\\"interest\\" class=\\"checkbox-group\\">\\r\\n      <input\\r\\n        type=\\"checkbox\\"\\r\\n        name=\\"interests\\"\\r\\n        value=\\"frontend\\"\\r\\n        v-model=\\"interests\\"\\r\\n      />\\r\\n      <span>\u524d\u7aef</span>\\r\\n      <input\\r\\n        type=\\"checkbox\\"\\r\\n        name=\\"interests\\"\\r\\n        value=\\"backend\\"\\r\\n        v-model=\\"interests\\"\\r\\n      />\\r\\n      <span>\u540e\u7aef</span>\\r\\n      <input\\r\\n        type=\\"checkbox\\"\\r\\n        name=\\"interests\\"\\r\\n        value=\\"fullstack\\"\\r\\n        v-model=\\"interests\\"\\r\\n      />\\r\\n      <span>\u5168\u6808</span>\\r\\n    </div>\\r\\n    <label for=\\"occupation\\">\u804c\u4e1a\uff1a</label>\\r\\n    <select name=\\"occupation\\" id=\\"occupation\\" v-model=\\"occupation\\">\\r\\n      <option value=\\"frontend\\">\u524d\u7aef\u5de5\u7a0b\u5e08</option>\\r\\n      <option value=\\"backend\\">\u540e\u7aef\u5de5\u7a0b\u5e08</option>\\r\\n      <option value=\\"fullstack\\">\u5168\u6808\u5de5\u7a0b\u5e08</option>\\r\\n    </select>\\r\\n    <label for=\\"intro\\">\u81ea\u6211\u4ecb\u7ecd\uff1a</label>\\r\\n    <textarea id=\\"intro\\" rows=\\"10\\" v-model=\\"intro\\"></textarea>\\r\\n  </div>\\r\\n  <div class=\\"result\\">\\r\\n    <ul>\\r\\n      <li>\u7528\u6237\u540d\uff1a {{ username }}</li>\\r\\n      <li>\u6027\u522b\uff1a{{ gender }}</li>\\r\\n      <li>\u5174\u8da3\uff1a{{ interests }}</li>\\r\\n      <li>\u804c\u4e1a\uff1a{{ occupation }}</li>\\r\\n      <li>\u81ea\u6211\u4ecb\u7ecd\uff1a {{ intro }}</li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 13. \u8868\u5355\u63d0\u4ea4\u4e8b\u4ef6\u5904\u7406\\r\\n\\r\\n- \u4f7f\u7528`<form @submit.prevent=\\"handleSubmit\\">...</form>`\\r\\n- \u6216\u8005\u4f7f\u7528`<form @submit=\\"handleSubmit\\">...</form>`, \u4f46\u662f\u5728 js \u4e2d\u8981\u8bbe\u7f6e`e.preventDefault();`\u963b\u6b62\u9ed8\u8ba4\u8df3\u8f6c\\r\\n- \u5207\u8bb0\u8fd8\u6709\u4e00\u4e2a button \u7528\u6765\u63d0\u4ea4`<button type=\\"submit\\">\u63d0\u4ea4</button>`\\r\\n\\r\\n## 14. \u5728 inline-style \u5185\u8054\u6837\u5f0f\u4e2d\u7ed1\u5b9a data \u6570\u636e\\r\\n\\r\\n- \u76f4\u63a5\u4f7f\u7528 v-bind \u7ed1\u5b9a\\r\\n- \u4e5f\u53ef\u4ee5\u7ed1\u5b9a\u8ba1\u7b97\u5c5e\u6027,\u65b9\u6cd5\u7b49\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      fontSize: 16,\\r\\n    };\\r\\n  },\\r\\n  computed: {\\r\\n    pStyle() {\\r\\n      return {\\r\\n        color: \\"white\\",\\r\\n        fontSize: this.fontSize + \\"px\\",\\r\\n      };\\r\\n    },\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <div>\\r\\n    <p :style=\\"pStyle\\">\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\r\\n    <button class=\\"btn\\" @click=\\"fontSize += 1\\">+</button>\\r\\n    <button class=\\"btn\\" @click=\\"fontSize -= 1\\">-</button>\\r\\n  </div>\\r\\n</div>\\r\\n```\\r\\n\\r\\n## 15. \u6839\u636e\u6761\u4ef6\u6dfb\u52a0\u6216\u5220\u9664 class \u6837\u5f0f\\r\\n\\r\\n- \u76f4\u63a5\u4f7f\u7528 v-bind \u7ed1\u5b9a\\r\\n- \u53ef\u4ee5\u7ed1\u5b9a\u5355\u4e2a class\\r\\n- \u53ef\u4ee5\u7528\u6570\u7ec4\u7ed1\u5b9a\u591a\u4e2a class\\r\\n- \u53ef\u4ee5\u7528\u5bf9\u8c61\u6839\u636e\u6761\u4ef6\u6dfb\u52a0/\u79fb\u9664 class\\r\\n\\r\\n```javascript\\r\\nconst app = Vue.createApp({\\r\\n  data() {\\r\\n    return {\\r\\n      textClass: \\"text-blue\\",\\r\\n      stateClass: \\"danger\\",\\r\\n      isHidden: false,\\r\\n    };\\r\\n  },\\r\\n});\\r\\napp.mount(\\"#app\\");\\r\\n```\\r\\n\\r\\n```html\\r\\n<div id=\\"app\\">\\r\\n  <p :class=\\"[textClass, stateClass, { hide: isHidden }]\\">\u8fd9\u662f\u4e00\u4e2a\u6bb5\u843d</p>\\r\\n  <button @click=\\"isHidden = !isHidden\\">\u5207\u6362\u72b6\u6001</button>\\r\\n</div>\\r\\n```"},{"id":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","metadata":{"permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","source":"@site/blog/2024-04-02-JWT.md","title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","description":"\u524d\u8a00","date":"2024-04-02T00:00:00.000Z","formattedDate":"2024\u5e744\u67082\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"},{"label":"JWT","permalink":"/blog/tags/jwt"}],"readingTime":8.03,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","authors":"gugulh","tags":["Go","JWT"]},"prevItem":{"title":"Vue\u57fa\u7840\u5165\u95e8","permalink":"/blog/vue\u57fa\u7840\u5165\u95e8"},"nextItem":{"title":"Go \u57fa\u7840","permalink":"/blog/go \u57fa\u7840"}},"content":"## \u524d\u8a00\\r\\n\\r\\nJSON Web Token\uff08JWT\uff09\u5df2\u6210\u4e3a\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8eab\u4efd\u8ba4\u8bc1\u7684\u901a\u7528\u6807\u51c6\u3002\u5b83\u4ee5\u5176\u65e0\u72b6\u6001\uff08Stateless\uff09\u7279\u6027\uff0c\u5b8c\u7f8e\u5951\u5408\u4e86 RESTful API \u548c\u5fae\u670d\u52a1\u67b6\u6784\u3002\u672c\u6587\u65e8\u5728\u6df1\u5165\u6d45\u51fa\u5730\u8bb2\u89e3 JWT \u7684\u6838\u5fc3\u539f\u7406\u3001\u5b9e\u9645\u5e94\u7528\uff0c\u5e76\u5256\u6790\u4e00\u4e9b\u5f00\u53d1\u8005\u5728\u5b9e\u8df5\u4e2d\u5e38\u9047\u5230\u7684\u95ee\u9898\u3002\\r\\n\\r\\n## 1. \u4ec0\u4e48\u662f JWT\uff1f\\r\\n\\r\\nJWT \u7684\u672c\u8d28\u662f\u4e00\u4e2a\u9075\u5faa\u7279\u5b9a\u89c4\u8303\u7684\u3001\u7d27\u51d1\u4e14\u81ea\u5305\u542b\u7684 JSON \u5bf9\u8c61\u3002\u5b83\u88ab\u7528\u4e8e\u5728\u5404\u65b9\u4e4b\u95f4\u5b89\u5168\u5730\u4f20\u8f93\u4fe1\u606f\u3002\u4e00\u4e2a\u5b8c\u6574\u7684 JWT \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u7528\u70b9\uff08`.`\uff09\u5206\u9694\uff1a\\r\\n\\r\\n- **Header\uff08\u5934\u90e8\uff09**\uff1a\u5305\u542b\u4ee4\u724c\u7684\u7c7b\u578b\uff08`typ`\uff09\u548c\u4f7f\u7528\u7684\u7b7e\u540d\u7b97\u6cd5\uff08`alg`\uff09\u3002\u4f8b\u5982\uff1a\\r\\n\\r\\n  ```json\\r\\n  {\\r\\n    \\"alg\\": \\"HS256\\",\\r\\n    \\"typ\\": \\"JWT\\"\\r\\n  }\\r\\n  ```\\r\\n\\r\\n- **Payload\uff08\u8f7d\u8377\uff09**\uff1a\u5305\u542b\u58f0\u660e\uff08claims\uff09\uff0c\u5373\u4e00\u4e9b\u5b9e\u4f53\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u548c\u9644\u52a0\u5143\u6570\u636e\u3002\u58f0\u660e\u5206\u4e3a\u4e09\u7c7b\uff1a\\r\\n\\r\\n  - **\u6ce8\u518c\u58f0\u660e\uff08Registered Claims\uff09**\uff1a\u9884\u5b9a\u4e49\u7684\u6807\u51c6\u5b57\u6bb5\uff0c\u5982 `iss`\uff08\u7b7e\u53d1\u8005\uff09\u3001`exp`\uff08\u8fc7\u671f\u65f6\u95f4\uff09\u3001`sub`\uff08\u4e3b\u9898\uff09\u7b49\u3002\\r\\n  - **\u516c\u5171\u58f0\u660e\uff08Public Claims\uff09**\uff1a\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\uff0c\u7528\u4e8e\u4f20\u9012\u516c\u5171\u4fe1\u606f\uff0c\u5e94\u907f\u514d\u547d\u540d\u51b2\u7a81\u3002\\r\\n  - **\u79c1\u6709\u58f0\u660e\uff08Private Claims\uff09**\uff1a\u7528\u4e8e\u5728\u7279\u5b9a\u5e94\u7528\u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u58f0\u660e\uff0c\u4e0d\u5efa\u8bae\u7528\u4e8e\u654f\u611f\u6570\u636e\u3002\\r\\n\\r\\n- **Signature\uff08\u7b7e\u540d\uff09**\uff1a\u7531 Base64URL \u7f16\u7801\u540e\u7684 Header\u3001Payload\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5bc6\u94a5\uff08Secret\uff09\u901a\u8fc7\u6307\u5b9a\u7684\u7b97\u6cd5\uff08\u5982 HMAC-SHA256\uff09\u8ba1\u7b97\u5f97\u5230\u3002\u5b83\u7684\u4f5c\u7528\u662f\u9a8c\u8bc1 JWT \u662f\u5426\u88ab\u7be1\u6539\u3002\\r\\n\\r\\n## 2. JWT \u7684\u5de5\u4f5c\u6d41\u7a0b\\r\\n\\r\\nJWT \u7684\u6838\u5fc3\u5de5\u4f5c\u6d41\u7a0b\u975e\u5e38\u7b80\u6d01\uff1a\\r\\n\\r\\n1.  **\u8ba4\u8bc1**\uff1a\u7528\u6237\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u767b\u5f55\u3002\\r\\n2.  **\u751f\u6210\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u9a8c\u8bc1\u51ed\u636e\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u7528\u6237 ID \u548c\u5176\u4ed6\u4fe1\u606f\u7684 JWT\uff0c\u5e76\u7528\u5bc6\u94a5\u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\u3002\\r\\n3.  **\u8fd4\u56de\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u5c06\u8fd9\u4e2a JWT \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\\r\\n4.  **\u643a\u5e26\u4ee4\u724c**\uff1a\u5ba2\u6237\u7aef\u5728\u540e\u7eed\u7684\u6bcf\u6b21\u8bf7\u6c42\u4e2d\uff0c\u5c06 JWT \u653e\u5728 HTTP Header \u7684 `Authorization` \u5b57\u6bb5\u4e2d\uff08\u901a\u5e38\u683c\u5f0f\u4e3a `Bearer <token>`\uff09\u3002\\r\\n5.  **\u9a8c\u8bc1\u4ee4\u724c**\uff1a\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u9a8c\u8bc1 JWT \u7684\u7b7e\u540d\uff0c\u5e76\u89e3\u6790 Payload \u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1\u3002\\r\\n\\r\\n```mermaid\\r\\nsequenceDiagram\\r\\n    participant Client\\r\\n    participant Server\\r\\n\\r\\n    Client->>Server: 1. \u53d1\u9001\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\\r\\n    Server--\x3e>Server: 2. \u9a8c\u8bc1\u51ed\u636e\\r\\n    Server->>Server: 3. \u751f\u6210 JWT (Access Token)\\r\\n    Server->>Client: 4. \u8fd4\u56de JWT \u7ed9\u5ba2\u6237\u7aef\\r\\n    Client->>Client: 5. \u5ba2\u6237\u7aef\u5b58\u50a8 JWT\\r\\n    Client->>Server: 6. \u5728\u540e\u7eed\u8bf7\u6c42\u4e2d\u643a\u5e26 JWT (Authorization: Bearer <token>)\\r\\n    Server->>Server: 7. \u9a8c\u8bc1 JWT \u7b7e\u540d\u548c\u6709\u6548\u6027\\r\\n    Server->>Client: 8. \u8fd4\u56de\u8bf7\u6c42\u7684\u8d44\u6e90\u6216\u6570\u636e\\r\\n```\\r\\n\\r\\n## 3. \u4e3a\u4ec0\u4e48\u9009\u62e9 JWT\uff1f\\r\\n\\r\\n- \u65e0\u72b6\u6001\uff08Stateless\uff09\uff1a\u670d\u52a1\u5668\u65e0\u9700\u5728\u5185\u5b58\u4e2d\u4fdd\u5b58\u4f1a\u8bdd\u4fe1\u606f\uff0c\u51cf\u8f7b\u4e86\u670d\u52a1\u5668\u538b\u529b\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u548c\u5fae\u670d\u52a1\u67b6\u6784\u3002\\r\\n\\r\\n- \u8de8\u57df\u517c\u5bb9\uff1aJWT \u53ef\u4ee5\u901a\u8fc7 Header \u4f20\u9012\uff0c\u5929\u7136\u652f\u6301\u8de8\u57df\u8ba4\u8bc1\u3002\\r\\n\\r\\n- \u81ea\u5305\u542b\uff1a\u5b83\u5305\u542b\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\uff0c\u670d\u52a1\u5668\u65e0\u9700\u9891\u7e41\u67e5\u8be2\u6570\u636e\u5e93\u3002\\r\\n\\r\\n## 4. \u5b9e\u8df5\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5\\r\\n\\r\\n### \u95ee\u9898\u4e00\uff1a\u4ee4\u724c\u8fc7\u671f\u600e\u4e48\u529e\uff1f\\r\\n\\r\\n**\u89e3\u51b3\u65b9\u6848**\uff1a\u5f15\u5165 **Refresh Token\uff08\u5237\u65b0\u4ee4\u724c\uff09** \u673a\u5236\u3002\\r\\n\\r\\n- Access Token\uff08\u8bbf\u95ee\u4ee4\u724c\uff09\uff1a\u751f\u547d\u5468\u671f\u77ed\uff08\u5982 15 \u5206\u949f\uff09\uff0c\u7528\u4e8e\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90\u3002\\r\\n\\r\\n- Refresh Token\uff1a\u751f\u547d\u5468\u671f\u957f\uff08\u5982 7 \u5929\uff09\uff0c\u7528\u4e8e\u5728 Access Token \u8fc7\u671f\u540e\uff0c\u5411\u8ba4\u8bc1\u670d\u52a1\u5668\u8bf7\u6c42\u65b0\u7684 Access Token\u3002\\r\\n\\r\\n\u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u5b89\u5168\u6027\uff0c\u53c8\u63d0\u5347\u4e86\u7528\u6237\u4f53\u9a8c\u3002\\r\\n\\r\\n```mermaid\\r\\nsequenceDiagram\\r\\n    participant Client\\r\\n    participant Server\\r\\n\\r\\n    Client->>Server: 1. \u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\uff0c\u4f46 Access Token \u5df2\u8fc7\u671f\\r\\n    Server->>Client: 2. \u54cd\u5e94 401 Unauthorized\\r\\n    Client->>Server: 3. \u643a\u5e26 Refresh Token \u8bf7\u6c42\u65b0\u7684 Access Token\\r\\n    Server--\x3e>Server: 4. \u9a8c\u8bc1 Refresh Token\\r\\n    Server->>Server: 5. \u751f\u6210\u65b0\u7684 Access Token \u548c Refresh Token\\r\\n    Server->>Client: 6. \u8fd4\u56de\u65b0\u7684\u4ee4\u724c\\r\\n    Client->>Server: 7. \u4f7f\u7528\u65b0\u7684 Access Token \u518d\u6b21\u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\\r\\n    Server->>Client: 8. \u6210\u529f\u8fd4\u56de\u8d44\u6e90\\r\\n```\\r\\n\\r\\n### \u95ee\u9898\u4e8c\uff1a\u5982\u4f55\u5904\u7406\u4ee4\u724c\u64a4\u9500\uff1f\\r\\n\\r\\n**\u89e3\u51b3\u65b9\u6848**\uff1a\\r\\n\\r\\n- \u9ed1\u540d\u5355\u673a\u5236\uff1a\u5c06\u5df2\u7b7e\u53d1\u4f46\u9700\u8981\u63d0\u524d\u5931\u6548\u7684 JWT \u5b58\u50a8\u5728 Redis \u6216\u5176\u4ed6\u7f13\u5b58\u4e2d\u3002\u6bcf\u6b21\u9a8c\u8bc1\u65f6\uff0c\u5148\u68c0\u67e5\u9ed1\u540d\u5355\u3002\\r\\n\\r\\n- \u7b7e\u53d1\u7248\u672c\u53f7\uff1a\u5728 Payload \u4e2d\u52a0\u5165\u7528\u6237\u7248\u672c\u53f7\uff08\u5982 version: 1\uff09\u3002\u5f53\u7528\u6237\u5bc6\u7801\u4fee\u6539\u3001\u6743\u9650\u53d8\u66f4\u7b49\u9700\u8981\u5f3a\u5236\u6240\u6709\u65e7\u4ee4\u724c\u5931\u6548\u65f6\uff0c\u66f4\u65b0\u7248\u672c\u53f7\u3002\u670d\u52a1\u5668\u9a8c\u8bc1\u65f6\uff0c\u5982\u679c\u4ee4\u724c\u4e2d\u7684\u7248\u672c\u53f7\u4e0e\u6570\u636e\u5e93\u4e0d\u4e00\u81f4\uff0c\u5219\u62d2\u7edd\u3002\\r\\n\\r\\n---\\r\\n\\r\\n## 5. \u5b89\u5168\u6027\u8003\u91cf\u4e0e\u6700\u4f73\u5b9e\u8df5\\r\\n\\r\\nJWT \u867d\u7136\u5f3a\u5927\uff0c\u4f46\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u4e5f\u4f1a\u5f15\u5165\u5b89\u5168\u98ce\u9669\u3002\u4ee5\u4e0b\u51e0\u70b9\u81f3\u5173\u91cd\u8981\uff1a\\r\\n\\r\\n1. **\u4fdd\u62a4\u4f60\u7684\u5bc6\u94a5**\uff1a\u7b7e\u540d\u5bc6\u94a5\u662f JWT \u5b89\u5168\u7684\u6838\u5fc3\u3002\u5b83\u5fc5\u987b\u88ab\u59a5\u5584\u4fdd\u7ba1\uff0c\u4e0d\u80fd\u66b4\u9732\u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u3002\u5efa\u8bae\u5c06\u5bc6\u94a5\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u6216\u4f7f\u7528\u4e13\u95e8\u7684\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\uff08\u5982 AWS KMS\u3001Vault\uff09\u3002\\r\\n2. **Payload \u5e76\u975e\u52a0\u5bc6**\uff1a\u5207\u8bb0\uff0cJWT \u7684 Payload \u53ea\u662f\u7ecf\u8fc7 **Base64URL \u7f16\u7801**\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8f7b\u677e\u89e3\u7801\u3002\u56e0\u6b64\uff0c**\u7edd\u5bf9\u4e0d\u8981**\u5728 Payload \u4e2d\u5b58\u653e\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u5982\u5bc6\u7801\u3001\u94f6\u884c\u5361\u53f7\u7b49\u3002\\r\\n3. **\u907f\u514d\u4f7f\u7528\u5f31\u7b97\u6cd5**\uff1a\u786e\u4fdd\u4f60\u7684\u7b7e\u540d\u7b97\u6cd5\u662f\u5b89\u5168\u7684\uff0c\u4f8b\u5982 HMAC-SHA256\u3001RSA-SHA256\u3002\u8981\u7279\u522b\u6ce8\u610f\uff0c\u907f\u514d\u4f7f\u7528**\\"none\\"\u7b97\u6cd5**\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u7ed5\u8fc7\u7b7e\u540d\u9a8c\u8bc1\uff0c\u8ba9\u653b\u51fb\u8005\u53ef\u4ee5\u4f2a\u9020\u4efb\u610f\u7684 Payload\u3002\\r\\n\\r\\n---\\r\\n\\r\\n## 6. \u5b9e\u8df5\u4ee3\u7801\u793a\u4f8b (Go)\\r\\n\\r\\n\u6211\u4eec\u5c06\u4f7f\u7528 github.com/golang-jwt/jwt/v5 \u8fd9\u4e2a\u6d41\u884c\u7684 Go \u5e93\u6765\u5904\u7406 JWT\u3002\\r\\n\\r\\n1. **\u5b89\u88c5\u5e93**\\r\\n\\r\\n   Bash\\r\\n\\r\\n   ```\\r\\n   go get github.com/golang-jwt/jwt/v5\\r\\n   ```\\r\\n\\r\\n2. **\u751f\u6210\u4ee4\u724c**\\r\\n\\r\\n   ```go\\r\\n   package main\\r\\n\\r\\n   import (\\r\\n   \\t\\"fmt\\"\\r\\n   \\t\\"time\\"\\r\\n\\r\\n   \\t\\"github.com/golang-jwt/jwt/v5\\"\\r\\n   )\\r\\n\\r\\n   // \u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\u7ed3\u6784\u4f53\\r\\n   type UserClaims struct {\\r\\n   \\tUserID   string `json:\\"user_id\\"`\\r\\n   \\tUsername string `json:\\"username\\"`\\r\\n   \\tjwt.RegisteredClaims\\r\\n   }\\r\\n\\r\\n   func main() {\\r\\n   \\t// \u5efa\u8bae\u4ece\u73af\u5883\u53d8\u91cf\u4e2d\u8bfb\u53d6\u5bc6\u94a5\\r\\n   \\tvar SECRET_KEY = []byte(\\"your_super_secret_key\\")\\r\\n\\r\\n   \\t// \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u58f0\u660e\u5b9e\u4f8b\\r\\n   \\tclaims := UserClaims{\\r\\n   \\t\\tUserID:   \\"12345\\",\\r\\n   \\t\\tUsername: \\"john.doe\\",\\r\\n   \\t\\tRegisteredClaims: jwt.RegisteredClaims{\\r\\n   \\t\\t\\tExpiresAt: jwt.NewNumericDate(time.Now().Add(time.Hour * 1)), // \u4ee4\u724c\u8fc7\u671f\u65f6\u95f4\u4e3a 1 \u5c0f\u65f6\\r\\n   \\t\\t\\tIssuedAt:  jwt.NewNumericDate(time.Now()),                    // \u4ee4\u724c\u7b7e\u53d1\u65f6\u95f4\\r\\n   \\t\\t\\tIssuer:    \\"your-app-name\\",                                   // \u7b7e\u53d1\u8005\\r\\n   \\t\\t},\\r\\n   \\t}\\r\\n\\r\\n   \\t// \u4f7f\u7528 HS256 \u7b97\u6cd5\u521b\u5efa\u4ee4\u724c\\r\\n   \\ttoken := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)\\r\\n\\r\\n   \\t// \u4f7f\u7528\u5bc6\u94a5\u8fdb\u884c\u7b7e\u540d\\r\\n   \\tsignedToken, err := token.SignedString(SECRET_KEY)\\r\\n   \\tif err != nil {\\r\\n   \\t\\tfmt.Println(\\"Error signing token:\\", err)\\r\\n   \\t\\treturn\\r\\n   \\t}\\r\\n\\r\\n   \\tfmt.Println(\\"Generated token:\\", signedToken)\\r\\n   }\\r\\n   ```\\r\\n\\r\\n3. **\u9a8c\u8bc1\u4ee4\u724c**\\r\\n\\r\\n   ```go\\r\\n   package main\\r\\n\\r\\n   import (\\r\\n   \\t\\"fmt\\"\\r\\n   \\t\\"github.com/golang-jwt/jwt/v5\\"\\r\\n   )\\r\\n\\r\\n   // \u5b9a\u4e49\u4e00\u4e2a\u4e0e\u751f\u6210\u4ee4\u724c\u65f6\u76f8\u540c\u7684\u81ea\u5b9a\u4e49\u58f0\u660e\u7ed3\u6784\u4f53\\r\\n   type UserClaims struct {\\r\\n   \\tUserID   string `json:\\"user_id\\"`\\r\\n   \\tUsername string `json:\\"username\\"`\\r\\n   \\tjwt.RegisteredClaims\\r\\n   }\\r\\n\\r\\n   func main() {\\r\\n   \\tvar SECRET_KEY = []byte(\\"your_super_secret_key\\")\\r\\n\\r\\n   \\t// \u5047\u8bbe\u8fd9\u662f\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u7684\u4ee4\u724c\\r\\n   \\ttokenFromClient := \\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMTIzNDUiLCJ1c2VybmFtZSI6ImpvaG4uZG9lIiwiZXhwIjoxNzMxNDk0NTcwLCJpYXQiOjE2ODc2NzQwMDAsImlzcyI6InlvdXItYXBwLW5hbWUifQ.H6S-qg4-L-y_s-F6D8b-n6k-g9d-x_6o_m_LgX6o_Xw\\"\\r\\n\\r\\n   \\ttoken, err := jwt.ParseWithClaims(tokenFromClient, &UserClaims{}, func(token *jwt.Token) (interface{}, error) {\\r\\n   \\t\\t// \u9a8c\u8bc1\u7b7e\u540d\u7b97\u6cd5\u662f\u5426\u4e3a HS256\\r\\n   \\t\\tif _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok {\\r\\n   \\t\\t\\treturn nil, fmt.Errorf(\\"unexpected signing method: %v\\", token.Header[\\"alg\\"])\\r\\n   \\t\\t}\\r\\n   \\t\\treturn SECRET_KEY, nil\\r\\n   \\t})\\r\\n\\r\\n   \\t// \u68c0\u67e5\u89e3\u6790\u8fc7\u7a0b\u4e2d\u662f\u5426\u51fa\u9519\\r\\n   \\tif err != nil {\\r\\n   \\t\\tfmt.Println(\\"Token verification failed:\\", err)\\r\\n   \\t\\treturn\\r\\n   \\t}\\r\\n\\r\\n   \\t// \u5982\u679c\u4ee4\u724c\u6709\u6548\uff0c\u83b7\u53d6\u58f0\u660e\u4fe1\u606f\\r\\n   \\tif claims, ok := token.Claims.(*UserClaims); ok && token.Valid {\\r\\n   \\t\\tfmt.Println(\\"Token is valid. Decoded payload:\\")\\r\\n   \\t\\tfmt.Printf(\\"User ID: %s, Username: %s\\\\n\\", claims.UserID, claims.Username)\\r\\n   \\t} else {\\r\\n   \\t\\tfmt.Println(\\"Token is invalid.\\")\\r\\n   \\t}\\r\\n   }\\r\\n   ```"},{"id":"go \u57fa\u7840","metadata":{"permalink":"/blog/go \u57fa\u7840","source":"@site/blog/2024-03-26-go \u57fa\u7840.md","title":"Go \u57fa\u7840","description":"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b","date":"2024-03-26T00:00:00.000Z","formattedDate":"2024\u5e743\u670826\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"}],"readingTime":12.825,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"go \u57fa\u7840","title":"Go \u57fa\u7840","authors":"gugulh","tags":["Go"]},"prevItem":{"title":"JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898","permalink":"/blog/JWT \u89e3\u6790\uff1a\u539f\u7406\u3001\u5b9e\u8df5\u4e0e\u5e38\u89c1\u95ee\u9898"},"nextItem":{"title":"Go mod\u4f9d\u8d56\u7ba1\u7406","permalink":"/blog/go mod\u4f9d\u8d56\u7ba1\u7406"}},"content":"\u53ea\u662f\u8bb0\u5f55\u4e00\u4e9b\u6211\u8ba4\u4e3a\u7684\u6613\u5fd8\u70b9,\u4ee5\u53ca\u4ee3\u7801\u793a\u4f8b\\r\\n\\r\\n## 1. \u5305\u76f8\u5173\u77e5\u8bc6\\r\\n\\r\\n- package aaa aaa \u53ef\u4ee5\u548c\u76ee\u5f55\u5305\u540d\u4e0d\u4e00\u81f4\\r\\n- go \u901a\u8fc7\u9996\u5b57\u6bcd\u5927\u5c0f\u5199\u63a7\u5236\u8bbf\u95ee\u6743\u9650,\u5927\u5199\u516c\u5171,\u5c0f\u5199\u79c1\u6709\\r\\n- func init() {} \u5728 func main() {} \u4e4b\u524d\u6267\u884c\\r\\n- \u53ea\u5f15\u7528\u5305,\u4f7f\u7528\\\\_,\u5728\u5f15\u5165\u5305\u65f6\u4e5f\u4f1a\u6267\u884c\u5176\u4e2d\u7684 init \u65b9\u6cd5\\r\\n\\r\\n```go\\r\\nimport (\\r\\n\\t_ \\"basic/package2\\"\\r\\n)\\r\\n```\\r\\n\\r\\n- A \u5f15\u7528 B \u5305,B \u5f15\u7528 C \u5305\\r\\n\\r\\n```mermaid\\r\\nflowchart LR\\r\\n    subgraph C\u5305\\r\\n        C_Init[C\u521d\u59cb\u5316 init]\\r\\n    end\\r\\n    subgraph B\u5305\\r\\n        B_Init[B\u521d\u59cb\u5316 init]\\r\\n    end\\r\\n    subgraph A\u5305\\r\\n        A_Init[A\u521d\u59cb\u5316 init] --\x3e A_Main[A\u6267\u884c main]\\r\\n    end\\r\\n\\r\\n    %% \u5305\u4f9d\u8d56\u4e0e\u6267\u884c\u987a\u5e8f\\r\\n    C_Init --\x3e B_Init --\x3e A_Init\\r\\n```\\r\\n\\r\\n```\\r\\nA\u5f15\u7528B\u5305,B\u5f15\u7528C\u5305\\r\\n1.C\u5305init\u6700\u5148\u6267\u884c\\r\\n2.init\u603b\u662f\u5148\u4e8emain\\r\\n```\\r\\n\\r\\n## 2. iota \u7528\u6cd5\\r\\n\\r\\n- iota \u88ab\u7528\u5728\u5e38\u91cf\u7684\u8d4b\u503c\u4e2d,\u5728\u6bcf\u4e00\u4e2a const \u5173\u952e\u5b57\u51fa\u73b0\u65f6\uff0c\u88ab\u91cd\u7f6e\u4e3a 0\uff0c\u7136\u540e\u6bcf\u51fa\u73b0\u4e00\u4e2a\u5e38\u91cf\uff0ciota \u6240\u4ee3\u8868\u7684\u6570\u503c\u4f1a\u81ea\u52a8\u589e\u52a0 1\\r\\n- iota \u5e38\u7528\u4f5c\u679a\u4e3e\u503c\\r\\n\\r\\n```go\\r\\nconst (\\r\\n\\tB = 1 << (10 * iota)\\r\\n\\tKB\\r\\n\\tMB\\r\\n\\tGB\\r\\n\\tTB\\r\\n)\\r\\n```\\r\\n\\r\\n## 3. \u7c7b\u578b\u8f6c\u6362\\r\\n\\r\\n```go\\r\\n// \u540c\u4e00\u7c7b\u578b\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u6570\u5b57, \u5b57\u7b26\u4e32\u548c\u5b57\u7b26\u548c\u5b57\u8282\\r\\n// \u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u8f6c\u6362 \u6570\u5b57\u548c\u5b57\u7b26\u4e32\\r\\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5176\u4ed6\u7c7b\u578b\\r\\n\\r\\n// \u6570\u5b57\u7c7b\u578b\u7684\u8f6c\u6362\\r\\nvar num1 int = 100\\r\\nfmt.Println(int64(num1))\\r\\nvar num2 int64 = 100\\r\\nfmt.Println(int(num2))\\r\\n\\r\\n// \u5b57\u7b26\u4e32\u4e0e\u6570\u5b57\\r\\nvar num3 int = 100\\r\\nfmt.Println(strconv.Itoa(num3) + \\"abc\\")\\r\\nvar str1 = \\"100\\"\\r\\nfmt.Println(strconv.Atoi(str1))\\r\\n\\r\\nvar num4 int64 = 1010\\r\\nfmt.Println(strconv.FormatInt(num4, 10))\\r\\n\\r\\nvar str2 = \\"1010\\"\\r\\nfmt.Println(strconv.ParseInt(str2, 10, 64))\\r\\n\\r\\n// \u5b57\u7b26\u4e32\u4e0e[]byte \u8f6c\u6362\\r\\nvar str3 = \\"\u4eca\u5929\u5929\u6c14\u771f\u597d\\"\\r\\nbytes1 := []byte(str3)\\r\\nfmt.Println(bytes1)\\r\\nfmt.Println(string(bytes1))\\r\\n\\r\\n// \u5b57\u7b26\u4e32\u4e0erune\u8f6c\u6362\\r\\n// rune \u4e3aint32\u7c7b\u578b\\r\\n// \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3arune\u5207\u7247,\u5b9e\u9645\u4e0arune\u5207\u7247\u4e2d\u5b58\u50a8\u5b57\u7b26\u4e32Unicode\u7801\u70b9\\r\\nvar rune1 = []rune(str3)\\r\\nfmt.Println(rune1)\\r\\nfmt.Println(string(rune1))\\r\\nfmt.Println(string(rune1[3]))\\r\\nfmt.Println([]int32(str3))\\r\\n\\r\\n// \u63a5\u53e3\u7c7b\u578b\u8f6c\u5177\u4f53\u7c7b\u578b\\r\\nvar inf interface{} = 100\\r\\nvar infStruct interface{} = user{}\\r\\ni, err := inf.(int)\\r\\nfmt.Println(i, err)\\r\\nu, err := infStruct.(user)\\r\\nfmt.Println(u, err)\\r\\n\\r\\n// \u65f6\u95f4\u7c7b\u578b\u8f6c\u5b57\u7b26\u4e32\\r\\nvar t time.Time\\r\\nt = time.Now()\\r\\ntimeStr := t.Format(\\"2006-01-02 15:04:05Z07:00\\")\\r\\nfmt.Println(timeStr)\\r\\n// \u5b57\u7b26\u4e32\u8f6c\u65f6\u95f4\\r\\nt2, _ := time.Parse(\\"2006-01-02 15:04:05Z07:00\\", timeStr)\\r\\nfmt.Println(t2)\\r\\n\\r\\n// uintptr\\r\\nu1 := user{}\\r\\n// unsafe.Pointer\u662f\u4e00\u4e2a\u901a\u7528\u7684\u6307\u9488\u7c7b\u578b,\u4e0d\u80fd\u7528\u4e8e\u8ba1\u7b97\\r\\nuPtr := unsafe.Pointer(&u1)\\r\\nnamePtr := unsafe.Pointer(uintptr(uPtr) + unsafe.Offsetof(u1.Name))\\r\\n*(*string)(namePtr) = \\"nick\\"\\r\\nfmt.Println(u1)\\r\\n```\\r\\n\\r\\n## 4. go \u4e2d switch \u8bed\u53e5\\r\\n\\r\\n- case \u540e\u65e0\u9700\u5199 break\\r\\n- \u5982\u679c\u5e0c\u671b\u4e0d\u8981\u8df3\u8fc7\u4e0b\u4e00\u4e2a case,\u4f7f\u7528 fallthrough\\r\\n\\r\\n```go\\r\\nswitch alpha {\\r\\ncase \\"A\\":\\r\\n\\tfmt.Println(\\"\u6267\u884c A \u8bed\u53e5\u5757\\")\\r\\ncase \\"B\\":\\r\\n\\tfmt.Println(\\"\u6267\u884c B \u8bed\u53e5\u5757\\")\\r\\ncase \\"C\\", \\"D\\":\\r\\n\\tfmt.Println(\\"\u6267\u884c CD \u8bed\u53e5\u5757\\")\\r\\n\\tfallthrough\\r\\ncase \\"E\\":\\r\\n\\tfmt.Println(\\"\u6267\u884c E \u8bed\u53e5\u5757\\")\\r\\ncase \\"F\\":\\r\\n\\tfmt.Println(\\"\u6267\u884c F \u8bed\u53e5\u5757\\")\\r\\n}\\r\\n\\r\\nswitch in.(type) {\\r\\ncase string:\\r\\n\\tfmt.Println(\\"\u8f93\u5165\u4e3a\u5b57\u7b26\u4e32\\")\\r\\ncase int:\\r\\n\\tfmt.Println(\\"\u8f93\u5165\u4e3aint\u7c7b\u578b\\")\\r\\ndefault:\\r\\n\\tfmt.Println(\\"Unknown\\")\\r\\n}\\r\\n```\\r\\n\\r\\n## 5. break label \u548c goto label\\r\\n\\r\\n- break label \u5fc5\u987b\u653e\u5728\u5faa\u73af\u8bed\u53e5 for \u524d\u9762\uff0c\u5e76\u4e14\u5728 break label \u8df3\u51fa\u5faa\u73af\u4e0d\u518d\u6267\u884c for \u5faa\u73af\u91cc\u7684\u4ee3\u7801\\r\\n- goto label \u548c C \u8bed\u8a00\u4e2d\u7528\u6cd5\u4e00\u81f4\\r\\n\\r\\n```go\\r\\nlabel:\\r\\n\\tfor i := 0; i < 2; i++ {\\r\\n\\t\\tfor j := 0; j < 2; j++ {\\r\\n\\t\\t\\tfmt.Printf(\\"\u6267\u884c for \u8bed\u53e5\u5757, i: %d, j: %d\\\\n\\", i, j)\\r\\n\\t\\t\\tbreak label\\r\\n\\t\\t}\\r\\n\\t}\\r\\n```\\r\\n\\r\\n## 6. \u6cdb\u578b\u7f16\u7a0b\\r\\n\\r\\n- \u533f\u540d\u7ed3\u6784\u4f53\u4e0e\u533f\u540d\u51fd\u6570\u4e0d\u652f\u6301\u6cdb\u578b\\r\\n- \u4e0d\u652f\u6301\u7c7b\u578b\u65ad\u8a00\\r\\n- \u4e0d\u652f\u6301\u6cdb\u578b\u65b9\u6cd5,\u53ea\u80fd\u901a\u8fc7 receiver \u6765\u5b9e\u73b0\u65b9\u6cd5\u7684\u6cdb\u578b\u5904\u7406\\r\\n- ~\u540e\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a\u57fa\u672c\u7c7b\u578b,\u4e0d\u80fd\u4e3a\u6cdb\u578b\u63a5\u53e3\\r\\n\\r\\n### 6.1 \u57fa\u672c\u4f7f\u7528\\r\\n\\r\\n```go\\r\\ntype CusNumT interface {\\r\\n\\t// \u652f\u6301 uint8\u3001int32\u3001float64\u4e0eint64\u53ca\u5176\u884d\u751f\u7c7b\u578b\\r\\n\\t// ~ \u8868\u793a\u652f\u6301\u7c7b\u578b\u7684\u884d\u751f\u7c7b\u578b\\r\\n\\t// | \u8868\u793a\u53d6\u5e76\u96c6\\r\\n\\t// \u591a\u884c\u4e4b\u95f4\u53d6\u4ea4\u96c6\\r\\n\\tuint8 | int32 | float64 | ~int64\\r\\n\\tint32 | float64 | ~int64 | uint16\\r\\n}\\r\\n\\r\\n// getMaxCusNum\u4e3a\u6cdb\u578b\u51fd\u6570, T \u4e3a\u6cdb\u578b\u7c7b\u578b\\r\\nfunc getMaxCusNum[T CusNumT](a, b T) T {\\r\\n\\tif a > b {\\r\\n\\t\\treturn a\\r\\n\\t}\\r\\n\\treturn b\\r\\n}\\r\\n```\\r\\n\\r\\n### 6.2 \u6cdb\u578b\u63a5\u53e3,\u6cdb\u578b\u7ed3\u6784\u4f53\u4e0e\u6cdb\u578b receiver\\r\\n\\r\\n```go\\r\\n// \u6cdb\u578b\u63a5\u53e3\\r\\ntype GetKey[T comparable] interface {\\r\\n\\tany\\r\\n\\tGet() T\\r\\n}\\r\\n\\r\\n// \u6cdb\u578b\u7ed3\u6784\u4f53\\r\\ntype MyStruct[T interface{ *int | *string }] struct {\\r\\n\\tName string\\r\\n\\tData T\\r\\n}\\r\\n\\r\\n// \u6cdb\u578b receiver\\r\\nfunc (myStruct MyStruct[T]) GetData() T {\\r\\n\\treturn myStruct.Data\\r\\n}\\r\\n```\\r\\n\\r\\n### 6.3 \u6cdb\u578b\u7684\u5229\u5f0a\\r\\n\\r\\n- \u63d0\u9ad8\u4e86\u4ee3\u7801\u590d\u7528\u7387\uff0c\u63d0\u9ad8\u4e86\u7f16\u7a0b\u6548\u7387\\r\\n- \u4e0d\u540c\u7c7b\u578b\u95f4\u4ee3\u7801\u590d\u7528\uff0c\u4f7f\u5f97\u4ee3\u7801\u98ce\u683c\u66f4\u52a0\u4f18\u96c5\\r\\n- \u589e\u52a0\u4e86\u7f16\u8bd1\u5668\u7684\u8d1f\u62c5\uff0c\u964d\u4f4e\u4e86\u7f16\u8bd1\u6548\u7387\\r\\n\\r\\n## 7. golang \u5e38\u7528\u6807\u51c6\u5e93\\r\\n\\r\\n### 7.1 \u7f16\u89e3\u7801\\r\\n\\r\\n```go\\r\\n//\u5e8f\u5217\u5316\\r\\nbytes, err := json.Marshal(u)\\r\\nfmt.Println(bytes, err)\\r\\nu1 := user{}\\r\\n//\u53cd\u5e8f\u5217\u5316\\r\\nerr = json.Unmarshal(bytes, &u1)\\r\\nfmt.Println(u1, err)\\r\\n\\r\\n//base64\u7f16\u89e3\u7801\\r\\nstr := base64.StdEncoding.EncodeToString(bytes)\\r\\nfmt.Println(str)\\r\\nbytes1, err := base64.StdEncoding.DecodeString(str)\\r\\nfmt.Println(bytes1, err)\\r\\n\\r\\n//16\u8fdb\u5236\u7f16\u89e3\u7801\\r\\nstr1 := hex.EncodeToString(bytes1)\\r\\nfmt.Println(str1)\\r\\nbytes2, err := hex.DecodeString(str1)\\r\\nfmt.Println(bytes2, err)\\r\\n```\\r\\n\\r\\n### 7.2 \u683c\u5f0f\u5316\u8f93\u51fa\\r\\n\\r\\n```go\\r\\nfunc FmtCase() {\\r\\n\\t// \u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\\r\\n\\tfmt.Println(\\"\u4eca\u5929\u5929\u6c14\u5f88\u597d\\")\\r\\n\\t//\u683c\u5f0f\u5316\uff0c\u5e76\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\\r\\n\\tfmt.Printf(\\"%s\u5929\u6c14\u5f88\u597d\\\\n\\", \\"\u4eca\u5929\\")\\r\\n\\t//\u683c\u5f0f\u5316\\r\\n\\tstr := fmt.Sprintf(\\"%s\u5929\u6c14\u5f88\u597d\\", \\"\u4eca\u5929\u3001\u660e\u5929\\")\\r\\n\\t// \u8f93\u51fa\u5230io.writer\\r\\n\\tfmt.Fprint(os.Stderr, str)\\r\\n\\tfmt.Println()\\r\\n}\\r\\n\\r\\nfunc FmtCase1() {\\r\\n\\ttype simple struct {\\r\\n\\t\\tvalue int\\r\\n\\t}\\r\\n\\ta := simple{\\r\\n\\t\\tvalue: 10,\\r\\n\\t}\\r\\n\\t// \u901a\u7528\u5360\u4f4d\u7b26\\r\\n\\tfmt.Printf(\\"\u9ed8\u8ba4\u683c\u5f0f\u7684\u503c\uff1a%v \\\\n\\", a)\\r\\n\\tfmt.Printf(\\"\u5305\u542b\u5b57\u6bb5\u540d\u7684\u503c\uff1a%+v \\\\n\\", a)\\r\\n\\tfmt.Printf(\\"go\u8bed\u6cd5\u8868\u793a\u7684\u503c\uff1a%#v \\\\n\\", a)\\r\\n\\tfmt.Printf(\\"go\u8bed\u6cd5\u8868\u793a\u7684\u7c7b\u578b\uff1a%T \\\\n\\", a)\\r\\n\\tfmt.Printf(\\"\u8f93\u51fa\u5b57\u9762\u4e0a\u7684\u767e\u5206\u53f7\uff1a %%10 \\\\n\\")\\r\\n\\r\\n\\t// \u6574\u6570\u5360\u4f4d\u7b26\\r\\n\\tv1 := 10\\r\\n\\tv2 := 20170 //\\"\u4eca\\" \u5b57\u7801\u70b9\u503c\\r\\n\\tfmt.Printf(\\"\u4e8c\u8fdb\u5236\uff1a%b \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"Unicode \u7801\u70b9\u8f6c\u5b57\u7b26\uff1a%c \\\\n\\", v2)\\r\\n\\tfmt.Printf(\\"\u5341\u8fdb\u5236\uff1a%d \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"\u516b\u8fdb\u5236\uff1a%o \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"0o\u4e3a\u524d\u7f00\u7684\u516b\u8fdb\u5236\uff1a%O \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"\u7528\u5355\u5f15\u53f7\u5c06\u5b57\u7b26\u7684\u503c\u62b1\u8d77\u6765\uff1a%q \\\\n\\", v2)\\r\\n\\tfmt.Printf(\\"\u5341\u516d\u8fdb\u5236\uff1a%x \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"\u5341\u516d\u8fdb\u5236\u5927\u5199\uff1a%X \\\\n\\", v1)\\r\\n\\tfmt.Printf(\\"Unicode\u683c\u5f0f\uff1a%U \\\\n\\", v2)\\r\\n\\r\\n\\t// \u5bbd\u5ea6\u8bbe\u7f6e\\r\\n\\tfmt.Printf(\\"%v \u7684\u4e8c\u8fdb\u5236\uff1a%b; go\u8bed\u6cd5\u8868\u793a\u4e8c\u8fdb\u5236\u4e3a\uff1a%#b; \u6307\u5b9a\u4e8c\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%08b \\\\n\\", v1, v1, v1, v1)\\r\\n\\tfmt.Printf(\\"%v \u7684\u5341\u516d\u8fdb\u5236\uff1a%x; \u4f7f\u7528go\u8bed\u6cd5\u8868\u793a,\u6307\u5b9a\u5341\u516d\u8fdb\u5236\u5bbd\u5ea6\u4e3a8\uff0c\u4e0d\u8db38\u4f4d\u88650\uff1a%#08x \\\\n\\", v1, v1, v1)\\r\\n\\tfmt.Printf(\\"%v \u7684\u5b57\u7b26\u4e3a\uff1a%c; \u6307\u5b9a\u5bbd\u5ea6\u4e3a5\u4f4d\uff0c\u4e0d\u8db35\u4f4d\u8865\u7a7a\u683c\uff1a%5c \\\\n\\", v2, v2, v2)\\r\\n\\r\\n\\t// \u6d6e\u70b9\u6570\u5360\u4f4d\u7b26\\r\\n\\tvar f1 = 123.789\\r\\n\\tvar f2 = 12345678910.78999\\r\\n\\tfmt.Printf(\\"\u6307\u6570\u4e3a\u4e8c\u7684\u5e42\u7684\u65e0\u5c0f\u6570\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %b \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a %e \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u5927\u5199\uff1a %E \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u6709\u5c0f\u6570\u70b9\u800c\u65e0\u6307\u6570\uff0c\u5373\u5e38\u89c4\u7684\u6d6e\u70b9\u6570\u683c\u5f0f\u3002\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u7cbe\u5ea6\uff1a %f \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u9ed8\u8ba4\uff1a %9f \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u9ed8\u8ba4\u5bbd\u5ea6\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %.2f \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff1a %09.2f \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u5bbd\u5ea6\u4e3a9\uff0c\u7cbe\u5ea6\u4fdd\u75590\u4f4d\u5c0f\u6570\uff1a %9.f \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%e \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %g %g \\\\n\\", f1, f2)\\r\\n\\tfmt.Printf(\\"\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u9009%%E \u6216 %%f \u6765\u8f93\u51fa\uff0c\u4ee5\u4ea7\u751f\u66f4\u7d27\u51d1\u7684\u8f93\u51fa\uff08\u672b\u4f4d\u65e00\uff09\uff1a %G %G \\\\n\\", f1, f2)\\r\\n\\tfmt.Printf(\\"\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff1a%x \\\\n\\", f1)\\r\\n\\tfmt.Printf(\\"\u4ee5\u5341\u516d\u8fdb\u5236\u65b9\u5f0f\u8868\u793a\uff0c\u5927\u5199\uff1a%X \\\\n\\", f1)\\r\\n\\r\\n\\t// \u5b57\u7b26\u4e32\u5360\u4f4d\u7b26\\r\\n\\tvar str = \\"\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50\\"\\r\\n\\tfmt.Printf(\\"\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%s \\\\n\\", str)\\r\\n\\t//\u7528\u53cc\u5f15\u53f7\u5c06\u5b57\u7b26\u4e32\u5305\u88f9\\r\\n\\tfmt.Printf(\\"\u63cf\u8ff0\u4e00\u4e0b\u4eca\u5929\uff1a%q \\\\n\\", str)\\r\\n\\t// 16\u8fdb\u5236\u8868\u793a\\r\\n\\tfmt.Printf(\\"%x \\\\n\\", str)\\r\\n\\t// \u4ee5\u7a7a\u683c\u4f5c\u4e3a\u4e24\u6570\u4e4b\u95f4\u7684\u5206\u9694\u7b26\uff0c\u5e76\u7528\u5927\u519916\u8fdb\u5236\\r\\n\\tfmt.Printf(\\"% X \\\\n\\", str)\\r\\n\\r\\n\\t// \u6307\u9488\u5360\u4f4d\u7b26\\r\\n\\tvar str1 = \\"\u4eca\u5929\u662f\u4e2a\u597d\u65e5\u5b50\\"\\r\\n\\tbytes := []byte(str1)\\r\\n\\t//\u5207\u7247\u7b2c0\u4e2a\u5143\u7d20\u7684\u5730\u5740\\r\\n\\tfmt.Printf(\\"%p \\\\n\\", bytes)\\r\\n\\tmp := make(map[string]int, 0)\\r\\n\\tfmt.Printf(\\"%p \\\\n\\", mp)\\r\\n\\tvar p *map[string]int = new(map[string]int)\\r\\n\\tfmt.Printf(\\"%p \\\\n\\", p)\\r\\n}\\r\\n```\\r\\n\\r\\n### 7.3 log\\r\\n\\r\\n```go\\r\\nfunc init() {\\r\\n\\t// \u8bbe\u7f6elog\u8f93\u51fa\\r\\n\\tlog.SetFlags(log.Llongfile) // \u5728\u65e5\u5fd7\u6d88\u606f\u4e2d\u6dfb\u52a0\u7a0b\u5e8f\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u4f5c\u4e3a\u524d\u7f00\u7684\u6e90\u4ee3\u7801\\r\\n\\tlog.SetOutput(os.Stderr) // \u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\\r\\n}\\r\\n\\r\\nfunc LogCase() {\\r\\n\\tvar a, b = -1, -2\\r\\n\\t_, err := sum(a, b)\\r\\n\\tif err != nil {\\r\\n\\t\\tlog.Println(err)\\r\\n\\t}\\r\\n\\tlog.Printf(\\"a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\\\n\\", a, b, err.Error())\\r\\n\\t// fatal \u65e5\u5fd7\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u7684\u9000\u51fa\\r\\n\\t//log.Fatalf(\\"a:%d,b%d,\u4e24\u6570\u6c42\u548c\u51fa\u73b0\u9519\u8bef\uff1a%s \\\\n\\", a, b, err.Error())\\r\\n}\\r\\n```\\r\\n\\r\\n### 7.4 math\\r\\n\\r\\n```go\\r\\nfmt.Println(\\"2\u768410\u6b21\u65b9\uff1a\\", math.Pow(2, 10))\\r\\nfmt.Println(\\"\u8fd4\u56de\u4ee52\u4e3a\u5e95\uff0c1024\u7684\u5bf9\u6570\uff1a\\", math.Log2(1024))\\r\\nfmt.Println(\\"\u8fd4\u56de\u4e24\u6570\u4e2d\u8f83\u5927\u7684\u503c\uff1a\\", math.Max(2, 10))\\r\\nfmt.Println(\\"\u5411\u4e0a\u53d6\u6574\uff1a\\", math.Ceil(2.49))\\r\\nfmt.Println(\\"\u5411\u4e0b\u53d6\u6574\uff1a\\", math.Floor(2.89))\\r\\nfmt.Println(\\"90\u89d2\u7684\u6b63\u5f26\u503c\uff1a\\", math.Sin(math.Pi/2))\\r\\nfmt.Println(\\"1 \u53cd\u6b63\u5f26\u503c\uff1a\\", math.Asin(1))\\r\\n```\\r\\n\\r\\n### 7.5 \u6b63\u5219\u8868\u8fbe\u5f0f\\r\\n\\r\\n```go\\r\\n//\u6784\u5efa\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5bf9\u8c61\\r\\nreg := regexp.MustCompile(`^[a-z]+\\\\[[0-9]+\\\\]$`)\\r\\n//\u5224\u65ad\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u662f\u5426\u7b26\u5408\u6b63\u5219\\r\\nfmt.Println(reg.MatchString(\\"abcd[1234]\\"))\\r\\n//\u4ece\u7ed9\u5b9a\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684\u5b57\u7b26\u4e32\\r\\nbytes := reg.FindAll([]byte(\\"efg[456]\\"), -1)\\r\\nfmt.Println(string(bytes[0]))\\r\\n```\\r\\n\\r\\n### 7.6 Sort \u6392\u5e8f\\r\\n\\r\\n```go\\r\\npackage main\\r\\n\\r\\nimport (\\r\\n\\t\\"fmt\\"\\r\\n\\t\\"sort\\"\\r\\n)\\r\\n\\r\\ntype sortUser struct {\\r\\n\\tID   int64\\r\\n\\tName string\\r\\n\\tAge  uint8\\r\\n}\\r\\ntype ByID []sortUser\\r\\n\\r\\n// \u83b7\u53d6\u957f\u5ea6\\r\\nfunc (a ByID) Len() int {\\r\\n\\treturn len(a)\\r\\n}\\r\\n\\r\\n// \u4ea4\u6362\u4f4d\u7f6e\\r\\nfunc (a ByID) Swap(i, j int) {\\r\\n\\ta[i], a[j] = a[j], a[i]\\r\\n}\\r\\n\\r\\n// \u8fd4\u56dei\u4f4d\u7f6e\u7684ID\u662f\u5426\u5c0f\u4e8ej\u4f4d\u7f6e\u7684ID\\r\\nfunc (a ByID) Less(i, j int) bool {\\r\\n\\treturn a[i].ID < a[j].ID\\r\\n}\\r\\n\\r\\nfunc SortCase() {\\r\\n\\tlist := []sortUser{\\r\\n\\t\\t{ID: 10, Name: \\"nick\\", Age: 18},\\r\\n\\t\\t{ID: 11, Name: \\"nick\\", Age: 19},\\r\\n\\t\\t{ID: 1, Name: \\"nick\\", Age: 17},\\r\\n\\t\\t{ID: 12, Name: \\"nick\\", Age: 7},\\r\\n\\t\\t{ID: 9, Name: \\"nick\\", Age: 27},\\r\\n\\t\\t{ID: 13, Name: \\"nick\\", Age: 15},\\r\\n\\t\\t{ID: 7, Name: \\"nick\\", Age: 30},\\r\\n\\t\\t{ID: 14, Name: \\"nick\\", Age: 22},\\r\\n\\t}\\r\\n\\r\\n\\tsort.Slice(list, func(i, j int) bool {\\r\\n\\t\\treturn list[i].Age < list[j].Age\\r\\n\\t})\\r\\n\\tfmt.Println(list)\\r\\n\\r\\n\\t//\u5b9e\u73b0sort.Interface\u63a5\u53e3\\r\\n\\tsort.Sort(ByID(list))\\r\\n\\tfmt.Println(list)\\r\\n}\\r\\n\\r\\n```\\r\\n\\r\\n### 7.7 \u53cd\u5c04\\r\\n\\r\\n```go\\r\\npackage main\\r\\n\\r\\nimport (\\r\\n\\t\\"errors\\"\\r\\n\\t\\"fmt\\"\\r\\n\\t\\"reflect\\"\\r\\n)\\r\\n\\r\\nfunc ReflectCase() {\\r\\n\\r\\n\\ttype user struct {\\r\\n\\t\\tID    int64\\r\\n\\t\\tName  string\\r\\n\\t\\tHobby []string\\r\\n\\t}\\r\\n\\ttype outUser struct {\\r\\n\\t\\tID    int64\\r\\n\\t\\tName  string\\r\\n\\t\\tHobby []string\\r\\n\\t}\\r\\n\\r\\n\\tu := user{ID: 1, Name: \\"GuguLH\\", Hobby: []string{\\"\u7bee\u7403\\", \\"\u7fbd\u6bdb\u7403\\"}}\\r\\n\\tout := outUser{}\\r\\n\\r\\n\\tres := copy(&out, u)\\r\\n\\tfmt.Println(res, out)\\r\\n\\r\\n\\tlistUser := []user{\\r\\n\\t\\t{ID: 1, Name: \\"A\\", Hobby: []string{\\"\u7bee\u7403\\", \\"\u7fbd\u6bdb\u7403\\"}},\\r\\n\\t\\t{ID: 2, Name: \\"B\\", Hobby: []string{\\"\u7bee\u74031\\", \\"\u7fbd\u6bdb\u7403\\"}},\\r\\n\\t\\t{ID: 3, Name: \\"C\\", Hobby: []string{\\"\u7bee\u74032\\", \\"\u7fbd\u6bdb\u7403\\"}},\\r\\n\\t}\\r\\n\\tlist := sliceColumn(listUser, \\"Hobby\\")\\r\\n\\tfmt.Println(list)\\r\\n}\\r\\n\\r\\nfunc copy(dest interface{}, source interface{}) error {\\r\\n\\tsType := reflect.TypeOf(source)\\r\\n\\tsValue := reflect.ValueOf(source)\\r\\n\\t// \u5982\u679c\u4e3a\u6307\u9488\u7c7b\u578b\uff0c\u5219\u83b7\u53d6\u5176\u503c\\r\\n\\tif sType.Kind() == reflect.Ptr {\\r\\n\\t\\tsType = sType.Elem()\\r\\n\\t\\tsValue = sValue.Elem()\\r\\n\\t}\\r\\n\\tdType := reflect.TypeOf(dest)\\r\\n\\tdValue := reflect.ValueOf(dest)\\r\\n\\tif dType.Kind() != reflect.Ptr {\\r\\n\\t\\treturn errors.New(\\"\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6307\u9488\u7c7b\u578b\\")\\r\\n\\t}\\r\\n\\tdType = dType.Elem()\\r\\n\\tdValue = dValue.Elem()\\r\\n\\tif sValue.Kind() != reflect.Struct {\\r\\n\\t\\treturn errors.New(\\"\u6e90\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u6216struct\u7684\u6307\u9488\\")\\r\\n\\t}\\r\\n\\tif dValue.Kind() != reflect.Struct {\\r\\n\\t\\treturn errors.New(\\"\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u4e3astruct\u7684\u6307\u9488\\")\\r\\n\\t}\\r\\n\\tdestObj := reflect.New(dType)\\r\\n\\tfor i := 0; i < dType.NumField(); i++ {\\r\\n\\t\\tdestField := dType.Field(i)\\r\\n\\t\\tif sourceField, ok := sType.FieldByName(destField.Name); ok {\\r\\n\\t\\t\\tif destField.Type != sourceField.Type {\\r\\n\\t\\t\\t\\tcontinue\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tvalue := sValue.FieldByName(destField.Name)\\r\\n\\t\\t\\tdestObj.Elem().FieldByName(destField.Name).Set(value)\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\tdValue.Set(destObj.Elem())\\r\\n\\treturn nil\\r\\n}\\r\\n\\r\\nfunc sliceColumn(slice interface{}, column string) interface{} {\\r\\n\\tt := reflect.TypeOf(slice)\\r\\n\\tv := reflect.ValueOf(slice)\\r\\n\\tif t.Kind() == reflect.Ptr {\\r\\n\\t\\tt = t.Elem()\\r\\n\\t\\tv = v.Elem()\\r\\n\\t}\\r\\n\\tif v.Kind() == reflect.Struct {\\r\\n\\t\\tval := v.FieldByName(column)\\r\\n\\t\\treturn val.Interface()\\r\\n\\t}\\r\\n\\tif v.Kind() != reflect.Slice {\\r\\n\\t\\treturn nil\\r\\n\\t}\\r\\n\\tt = t.Elem()\\r\\n\\tif t.Kind() == reflect.Ptr {\\r\\n\\t\\tt = t.Elem()\\r\\n\\t}\\r\\n\\tf, _ := t.FieldByName(column)\\r\\n\\tsliceType := reflect.SliceOf(f.Type)\\r\\n\\ts := reflect.MakeSlice(sliceType, 0, 0)\\r\\n\\tfor i := 0; i < v.Len(); i++ {\\r\\n\\t\\to := v.Index(i)\\r\\n\\t\\tif o.Kind() == reflect.Struct {\\r\\n\\t\\t\\tval := o.FieldByName(column)\\r\\n\\t\\t\\ts = reflect.Append(s, val)\\r\\n\\t\\t}\\r\\n\\t\\tif o.Kind() == reflect.Ptr {\\r\\n\\t\\t\\tv1 := o.Elem()\\r\\n\\t\\t\\tval := v1.FieldByName(column)\\r\\n\\t\\t\\ts = reflect.Append(s, val)\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\treturn s.Interface()\\r\\n}\\r\\n```"},{"id":"go mod\u4f9d\u8d56\u7ba1\u7406","metadata":{"permalink":"/blog/go mod\u4f9d\u8d56\u7ba1\u7406","source":"@site/blog/2024-03-21-go mod\u4f9d\u8d56\u7ba1.md","title":"Go mod\u4f9d\u8d56\u7ba1\u7406","description":"1. go.mod\u6587\u4ef6","date":"2024-03-21T00:00:00.000Z","formattedDate":"2024\u5e743\u670821\u65e5","tags":[{"label":"Go","permalink":"/blog/tags/go"}],"readingTime":2.415,"hasTruncateMarker":false,"authors":[{"name":"GuguLH","title":"Back-end engineers","url":"https://github.com/gugulh","key":"gugulh"}],"frontMatter":{"slug":"go mod\u4f9d\u8d56\u7ba1\u7406","title":"Go mod\u4f9d\u8d56\u7ba1\u7406","authors":"gugulh","tags":["Go"]},"prevItem":{"title":"Go \u57fa\u7840","permalink":"/blog/go \u57fa\u7840"}},"content":"## 1. go.mod\u6587\u4ef6\\r\\n\\r\\n```go\\r\\n// \u6a21\u5757\u540d\\r\\nmodule go-mod\\r\\n\\r\\n// sdk \u7248\u672c\\r\\ngo 1.24\\r\\n\\r\\n// \u5f53\u524dmodule(\u9879\u76ee)\u4f9d\u8d56\u7684\u5305\\r\\nrequire (\\r\\n\\t//dependency latest\\r\\n)\\r\\n\\r\\n// \u6392\u9664\u7b2c\u4e09\u65b9\u5305\\r\\nexclude (\\r\\n\\t//dependency latest\\r\\n) \\r\\n\\r\\n// \u4fee\u6539\u4f9d\u8d56\u5305\u7684\u8def\u5f84\u6216\u8005\u7248\u672c\\r\\n// 1 \u4f9d\u8d56\u5305\u53d1\u751f\u8fc1\u79fb\\r\\n// 2 \u539f\u59cb\u5305\u65e0\u6cd5\u8bbf\u95ee\\r\\n// 3 \u4f7f\u7528\u672c\u5730\u5305\u66ff\u6362\u539f\u59cb\u5305\\r\\nreplace (\\r\\n\\t//source latest => target latest\\r\\n)\\r\\n\\r\\n// \u64a4\u56de\\r\\nretract (\\r\\n    // \u5f53\u524d\u9879\u76ee\u4f5c\u4e3a\u5176\u4ed6\u9879\u76ee\u7684\u4f9d\u8d56,\u5982\u679c\u67d0\u4e2a\u7248\u672c\u51fa\u73b0\u4e86\u95ee\u9898\u5219\u64a4\u56de\u8be5\u7248\u672c\\r\\n\\t//v1.0.0\\r\\n)\\r\\n```\\r\\n\\r\\n## 2. go mod\u76f8\u5173\u547d\u4ee4\\r\\n\\r\\n```go\\r\\n# \u5c06\u6a21\u5757\u4e0b\u8f7d\u5230\u672c\u5730\u7f13\u5b58,\u9700\u8981\u6307\u5b9a\u6a21\u5757\u8def\u5f84\u53ca\u7248\u672c\u53f7\\r\\ngo mod download github.com/gin-gonic/gin@v1.9.0\\r\\n\\r\\n# \u521d\u59cb\u5316\u4e00\u4e2a\u65b0\u7684\u6a21\u5757\u5230\u5f53\u524d\u76ee\u5f55(\u901a\u5e38\u4f7f\u7528github\u7b49\u4e3a\u57df\u540d)\\r\\ngo mod init github.com/gugulh/basic-go\\r\\n\\r\\n# \u6dfb\u52a0\u7f3a\u5c11\u7684\u4f9d\u8d56,\u5220\u9664\u672a\u4f7f\u7528\u7684\u4f9d\u8d56\\r\\ngo mod tidy\\r\\n\\r\\n# \u901a\u8fc7\u5de5\u5177\u6216\u811a\u672c\u7f16\u8f91go.mod(\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u8fdb\u884c\u7f16\u8f91)\\r\\ngo mod edit -require=\\"github.com/gin-gonic/gin@v1.9.0\\"\\r\\n\\r\\n# \u6839\u636ego.mod\u4e2d\u7684\u4f9d\u8d56\u9879\u5236\u4f5cvendor\u526f\u672c\\r\\n# \u6709\u4e86vendor\u526f\u672c,\u9879\u76ee\u5c06\u4e0d\u518d\u4f9d\u8d56\u672c\u5730\u7f13\u5b58\\r\\ngo mod vendor\\r\\n\\r\\n# \u9a8c\u8bc1\u4f9d\u8d56\u662f\u5426\u6b63\u786e\\r\\ngo mod verify\\r\\n\\r\\n# \u8fd4\u56de\u5bf9\u6307\u5b9a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\u6700\u77ed\u8def\u5f84,\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4f9d\u8d56\u6307\u5b9a\u5305\\r\\ngo mod why github.com/go-playground/validator/v10\\r\\n```\\r\\n\\r\\n## 3. go install/get/clean\\r\\n\\r\\n```go\\r\\n# go install \u5b89\u88c5\u53ef\u6267\u884c\u63d2\u4ef6\\r\\ngo install github.com/google/gops@latest\\r\\n\\r\\n# go get \u83b7\u53d6\u6a21\u5757\u4fe1\u606f\u5e76\u66f4\u65b0go.mod\u6587\u4ef6\\r\\n# \u82e5\u672c\u5730\u7f13\u5b58\u6ca1\u6709\u8be5\u6a21\u5757,\u5219\u4e0b\u8f7d\u6a21\u5757;\u6709\u5219\u76f4\u63a5\u5f15\u7528\\r\\ngo get github.com/gin-gonic/gin@v1.9.0\\r\\n\\r\\n# go get -u \u66f4\u65b0\u6a21\u5757\u4f9d\u8d56,\u5e76\u66f4\u65b0go.mod\\r\\ngo get -u github.com/gin-gonic/gin@v1.9.0\\r\\n\\r\\n# go clean \u6e05\u7406\u4e34\u65f6\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\\r\\ngo clean -modcache\\r\\n```\\r\\n\\r\\n## 4. go install \u548c go get\u7684\u533a\u522b\\r\\n\\r\\n\u4e8c\u8005\u90fd\u7528\u4e8e\u4ece\u8fdc\u7a0b\u4ed3\u5e93\uff08\u5982GitHub\uff09\u4e0b\u8f7d\u5305\u3002go get\u4fa7\u91cd\u4e8e\u83b7\u53d6\u548c\u66f4\u65b0\u5305\u53ca\u5176\u4f9d\u8d56\uff0c\u5e76\u66f4\u65b0go.mod\u6587\u4ef6\u3002go install\u5219\u4e13\u6ce8\u4e8e\u7f16\u8bd1\u548c\u5b89\u88c5\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800c\u4e0d\u4f1a\u66f4\u65b0go.mod\u6587\u4ef6\u3002"}]}')}}]);